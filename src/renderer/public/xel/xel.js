if(!1===MouseEvent.prototype.hasOwnProperty("pointerType")&&Object.defineProperty(MouseEvent.prototype,"pointerType",{get(){return this.sourceCapabilities.firesTouchEvents?"touch":"mouse"}}),Element.prototype.setPointerCapture){let t=Element.prototype.setPointerCapture;Element.prototype.setPointerCapture=function(e){if(t.call(this,e),!1!==this.hasPointerCapture(e)){{let t,i,s,n=!1,a=!1,r=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",i),this.removeEventListener("lostpointercapture",s)};this.addEventListener("pointerup",t=t=>{t.pointerId===e&&(n=!0,r())}),this.addEventListener("pointercancel",i=t=>{t.pointerId===e&&(a=!0,r())}),this.addEventListener("lostpointercapture",s=t=>{if(t.pointerId===e&&(r(),!1===n&&!1===a)){let i=new PointerEvent("pointercancel",{pointerId:e,isPrimary:t.isPrimary});this.dispatchEvent(i)}})}{let t,i,s=`* {cursor: ${getComputedStyle(this).cursor} !important; user-select: none !important; -webkit-user-select: none !important;}`,n=[];for(let t=this.parentNode||this.host;t&&t!==document;t=t.parentNode||t.host)if(t.nodeType===document.DOCUMENT_FRAGMENT_NODE){let e=document.createElementNS(t.host.namespaceURI,"style");e.textContent=s,t.append(e),n.push(e)}else if(t.nodeType===document.DOCUMENT_NODE){let e=document.createElement("style");e.textContent=s,t.head.append(e),n.push(e)}this.addEventListener("lostpointercapture",t=s=>{if(s.pointerId===e){this.removeEventListener("lostpointercapture",t),window.removeEventListener("pointerup",i,!0);for(let t of n)t.remove()}}),window.addEventListener("pointerup",i=s=>{if(s.pointerId===e){this.removeEventListener("lostpointercapture",t),window.removeEventListener("pointerup",i,!0);for(let t of n)t.remove()}},!0)}}}}Object.defineProperty(Animation.prototype,"finished",{get(){return new Promise((t=>{"finished"===this.playState?t():this.addEventListener("finish",(()=>t()),{once:!0})}))}}),window.requestIdleCallback||(window.requestIdleCallback=(t,e={})=>{let i=e.timeout||1,s=performance.now();return setTimeout((()=>{t({get didTimeout(){return!e.timeout&&performance.now()-s-1>i},timeRemaining:()=>Math.max(0,performance.now()-s+1)})}),1)}),Node.prototype.append||(Node.prototype.append=function(t){this.appendChild(t)}),Node.prototype.prepend||(Node.prototype.prepend=function(t){this.insertBefore(t,this.firstElementChild)}),Node.prototype.before||(Node.prototype.before=function(t){this.parentElement.insertBefore(t,this)}),Node.prototype.after||(Node.prototype.after=function(t){this.parentElement.insertBefore(t,this.nextElementSibling)}),Node.prototype.closest||(Node.prototype.closest=function(t){return this.parentNode?this.parentNode.closest(t):null}),Node.prototype.replaceWith||(Node.prototype.replaceWith=function(t){this.parentNode.replaceChild(t,this)});const{entries:t,setPrototypeOf:e,isFrozen:i,getPrototypeOf:s,getOwnPropertyDescriptor:n}=Object;let{freeze:a,seal:r,create:o}=Object,{apply:l,construct:h}="undefined"!=typeof Reflect&&Reflect;a||(a=function(t){return t}),r||(r=function(t){return t}),l||(l=function(t,e,i){return t.apply(e,i)}),h||(h=function(t,e){return new t(...e)});const d=E(Array.prototype.forEach),c=E(Array.prototype.lastIndexOf),u=E(Array.prototype.pop),p=E(Array.prototype.push),m=E(Array.prototype.splice),b=E(String.prototype.toLowerCase),g=E(String.prototype.toString),f=E(String.prototype.match),x=E(String.prototype.replace),w=E(String.prototype.indexOf),v=E(String.prototype.trim),k=E(Object.prototype.hasOwnProperty),y=E(RegExp.prototype.test),C=(z=TypeError,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return h(z,e)});var z;function E(t){return function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return l(t,e,s)}}function $(t,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;e&&e(t,null);let a=s.length;for(;a--;){let e=s[a];if("string"==typeof e){const t=n(e);t!==e&&(i(s)||(s[a]=t),e=t)}t[e]=!0}return t}function S(t){for(let e=0;e<t.length;e++){k(t,e)||(t[e]=null)}return t}function M(e){const i=o(null);for(const[s,n]of t(e)){k(e,s)&&(Array.isArray(n)?i[s]=S(n):n&&"object"==typeof n&&n.constructor===Object?i[s]=M(n):i[s]=n)}return i}function L(t,e){for(;null!==t;){const i=n(t,e);if(i){if(i.get)return E(i.get);if("function"==typeof i.value)return E(i.value)}t=s(t)}return function(){return null}}const A=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),T=a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),D=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),B=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),I=a(["#text"]),O=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),H=a(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),j=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),N=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F=r(/\{\{[\w\W]*|[\w\W]*\}\}/gm),G=r(/<%[\w\W]*|[\w\W]*%>/gm),X=r(/\$\{[\w\W]*/gm),_=r(/^data-[\-\w.\u00B7-\uFFFF]+$/),Z=r(/^aria-[\-\w]+$/),U=r(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Y=r(/^(?:\w+script|data):/i),V=r(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q=r(/^html$/i),W=r(/^[a-z][.\w]*(-[.\w]+)+$/i);var K=Object.freeze({__proto__:null,ARIA_ATTR:Z,ATTR_WHITESPACE:V,CUSTOM_ELEMENT:W,DATA_ATTR:_,DOCTYPE_NAME:q,ERB_EXPR:G,IS_ALLOWED_URI:U,IS_SCRIPT_OR_DATA:Y,MUSTACHE_EXPR:F,TMPLIT_EXPR:X});const J=1,Q=3,tt=7,et=8,it=9,st=function(){return"undefined"==typeof window?null:window};var nt=function e(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();const s=t=>e(t);if(s.version="3.2.4",s.removed=[],!i||!i.document||i.document.nodeType!==it||!i.Element)return s.isSupported=!1,s;let{document:n}=i;const r=n,l=r.currentScript,{DocumentFragment:h,HTMLTemplateElement:z,Node:E,Element:S,NodeFilter:F,NamedNodeMap:G=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:X,DOMParser:_,trustedTypes:Z}=i,Y=S.prototype,V=L(Y,"cloneNode"),W=L(Y,"remove"),nt=L(Y,"nextSibling"),at=L(Y,"childNodes"),rt=L(Y,"parentNode");if("function"==typeof z){const t=n.createElement("template");t.content&&t.content.ownerDocument&&(n=t.content.ownerDocument)}let ot,lt="";const{implementation:ht,createNodeIterator:dt,createDocumentFragment:ct,getElementsByTagName:ut}=n,{importNode:pt}=r;let mt={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};s.isSupported="function"==typeof t&&"function"==typeof rt&&ht&&void 0!==ht.createHTMLDocument;const{MUSTACHE_EXPR:bt,ERB_EXPR:gt,TMPLIT_EXPR:ft,DATA_ATTR:xt,ARIA_ATTR:wt,IS_SCRIPT_OR_DATA:vt,ATTR_WHITESPACE:kt,CUSTOM_ELEMENT:yt}=K;let{IS_ALLOWED_URI:Ct}=K,zt=null;const Et=$({},[...A,...R,...P,...D,...I]);let $t=null;const St=$({},[...O,...H,...j,...N]);let Mt=Object.seal(o(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Lt=null,At=null,Rt=!0,Pt=!0,Tt=!1,Dt=!0,Bt=!1,It=!0,Ot=!1,Ht=!1,jt=!1,Nt=!1,Ft=!1,Gt=!1,Xt=!0,_t=!1,Zt=!0,Ut=!1,Yt={},Vt=null;const qt=$({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Wt=null;const Kt=$({},["audio","video","img","source","image","track"]);let Jt=null;const Qt=$({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),te="http://www.w3.org/1998/Math/MathML",ee="http://www.w3.org/2000/svg",ie="http://www.w3.org/1999/xhtml";let se=ie,ne=!1,ae=null;const re=$({},[te,ee,ie],g);let oe=$({},["mi","mo","mn","ms","mtext"]),le=$({},["annotation-xml"]);const he=$({},["title","style","font","a","script"]);let de=null;const ce=["application/xhtml+xml","text/html"];let ue=null,pe=null;const me=n.createElement("form"),be=function(t){return t instanceof RegExp||t instanceof Function},ge=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!pe||pe!==t){if(t&&"object"==typeof t||(t={}),t=M(t),de=-1===ce.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,ue="application/xhtml+xml"===de?g:b,zt=k(t,"ALLOWED_TAGS")?$({},t.ALLOWED_TAGS,ue):Et,$t=k(t,"ALLOWED_ATTR")?$({},t.ALLOWED_ATTR,ue):St,ae=k(t,"ALLOWED_NAMESPACES")?$({},t.ALLOWED_NAMESPACES,g):re,Jt=k(t,"ADD_URI_SAFE_ATTR")?$(M(Qt),t.ADD_URI_SAFE_ATTR,ue):Qt,Wt=k(t,"ADD_DATA_URI_TAGS")?$(M(Kt),t.ADD_DATA_URI_TAGS,ue):Kt,Vt=k(t,"FORBID_CONTENTS")?$({},t.FORBID_CONTENTS,ue):qt,Lt=k(t,"FORBID_TAGS")?$({},t.FORBID_TAGS,ue):{},At=k(t,"FORBID_ATTR")?$({},t.FORBID_ATTR,ue):{},Yt=!!k(t,"USE_PROFILES")&&t.USE_PROFILES,Rt=!1!==t.ALLOW_ARIA_ATTR,Pt=!1!==t.ALLOW_DATA_ATTR,Tt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Dt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Bt=t.SAFE_FOR_TEMPLATES||!1,It=!1!==t.SAFE_FOR_XML,Ot=t.WHOLE_DOCUMENT||!1,Nt=t.RETURN_DOM||!1,Ft=t.RETURN_DOM_FRAGMENT||!1,Gt=t.RETURN_TRUSTED_TYPE||!1,jt=t.FORCE_BODY||!1,Xt=!1!==t.SANITIZE_DOM,_t=t.SANITIZE_NAMED_PROPS||!1,Zt=!1!==t.KEEP_CONTENT,Ut=t.IN_PLACE||!1,Ct=t.ALLOWED_URI_REGEXP||U,se=t.NAMESPACE||ie,oe=t.MATHML_TEXT_INTEGRATION_POINTS||oe,le=t.HTML_INTEGRATION_POINTS||le,Mt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&be(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Mt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&be(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Mt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Mt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Bt&&(Pt=!1),Ft&&(Nt=!0),Yt&&(zt=$({},I),$t=[],!0===Yt.html&&($(zt,A),$($t,O)),!0===Yt.svg&&($(zt,R),$($t,H),$($t,N)),!0===Yt.svgFilters&&($(zt,P),$($t,H),$($t,N)),!0===Yt.mathMl&&($(zt,D),$($t,j),$($t,N))),t.ADD_TAGS&&(zt===Et&&(zt=M(zt)),$(zt,t.ADD_TAGS,ue)),t.ADD_ATTR&&($t===St&&($t=M($t)),$($t,t.ADD_ATTR,ue)),t.ADD_URI_SAFE_ATTR&&$(Jt,t.ADD_URI_SAFE_ATTR,ue),t.FORBID_CONTENTS&&(Vt===qt&&(Vt=M(Vt)),$(Vt,t.FORBID_CONTENTS,ue)),Zt&&(zt["#text"]=!0),Ot&&$(zt,["html","head","body"]),zt.table&&($(zt,["tbody"]),delete Lt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw C('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw C('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ot=t.TRUSTED_TYPES_POLICY,lt=ot.createHTML("")}else void 0===ot&&(ot=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let i=null;const s="data-tt-policy-suffix";e&&e.hasAttribute(s)&&(i=e.getAttribute(s));const n="dompurify"+(i?"#"+i:"");try{return t.createPolicy(n,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+n+" could not be created."),null}}(Z,l)),null!==ot&&"string"==typeof lt&&(lt=ot.createHTML(""));a&&a(t),pe=t}},fe=$({},[...R,...P,...T]),xe=$({},[...D,...B]),we=function(t){p(s.removed,{element:t});try{rt(t).removeChild(t)}catch(e){W(t)}},ve=function(t,e){try{p(s.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){p(s.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(Nt||Ft)try{we(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ke=function(t){let e=null,i=null;if(jt)t="<remove></remove>"+t;else{const e=f(t,/^[\r\n\t ]+/);i=e&&e[0]}"application/xhtml+xml"===de&&se===ie&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const s=ot?ot.createHTML(t):t;if(se===ie)try{e=(new _).parseFromString(s,de)}catch(t){}if(!e||!e.documentElement){e=ht.createDocument(se,"template",null);try{e.documentElement.innerHTML=ne?lt:s}catch(t){}}const a=e.body||e.documentElement;return t&&i&&a.insertBefore(n.createTextNode(i),a.childNodes[0]||null),se===ie?ut.call(e,Ot?"html":"body")[0]:Ot?e.documentElement:a},ye=function(t){return dt.call(t.ownerDocument||t,t,F.SHOW_ELEMENT|F.SHOW_COMMENT|F.SHOW_TEXT|F.SHOW_PROCESSING_INSTRUCTION|F.SHOW_CDATA_SECTION,null)},Ce=function(t){return t instanceof X&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof G)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},ze=function(t){return"function"==typeof E&&t instanceof E};function Ee(t,e,i){d(t,(t=>{t.call(s,e,i,pe)}))}const $e=function(t){let e=null;if(Ee(mt.beforeSanitizeElements,t,null),Ce(t))return we(t),!0;const i=ue(t.nodeName);if(Ee(mt.uponSanitizeElement,t,{tagName:i,allowedTags:zt}),t.hasChildNodes()&&!ze(t.firstElementChild)&&y(/<[/\w]/g,t.innerHTML)&&y(/<[/\w]/g,t.textContent))return we(t),!0;if(t.nodeType===tt)return we(t),!0;if(It&&t.nodeType===et&&y(/<[/\w]/g,t.data))return we(t),!0;if(!zt[i]||Lt[i]){if(!Lt[i]&&Me(i)){if(Mt.tagNameCheck instanceof RegExp&&y(Mt.tagNameCheck,i))return!1;if(Mt.tagNameCheck instanceof Function&&Mt.tagNameCheck(i))return!1}if(Zt&&!Vt[i]){const e=rt(t)||t.parentNode,i=at(t)||t.childNodes;if(i&&e){for(let s=i.length-1;s>=0;--s){const n=V(i[s],!0);n.o=(t.o||0)+1,e.insertBefore(n,nt(t))}}}return we(t),!0}return t instanceof S&&!function(t){let e=rt(t);e&&e.tagName||(e={namespaceURI:se,tagName:"template"});const i=b(t.tagName),s=b(e.tagName);return!!ae[t.namespaceURI]&&(t.namespaceURI===ee?e.namespaceURI===ie?"svg"===i:e.namespaceURI===te?"svg"===i&&("annotation-xml"===s||oe[s]):Boolean(fe[i]):t.namespaceURI===te?e.namespaceURI===ie?"math"===i:e.namespaceURI===ee?"math"===i&&le[s]:Boolean(xe[i]):t.namespaceURI===ie?!(e.namespaceURI===ee&&!le[s])&&!(e.namespaceURI===te&&!oe[s])&&!xe[i]&&(he[i]||!fe[i]):!("application/xhtml+xml"!==de||!ae[t.namespaceURI]))}(t)?(we(t),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!y(/<\/no(script|embed|frames)/i,t.innerHTML)?(Bt&&t.nodeType===Q&&(e=t.textContent,d([bt,gt,ft],(t=>{e=x(e,t," ")})),t.textContent!==e&&(p(s.removed,{element:t.cloneNode()}),t.textContent=e)),Ee(mt.afterSanitizeElements,t,null),!1):(we(t),!0)},Se=function(t,e,i){if(Xt&&("id"===e||"name"===e)&&(i in n||i in me))return!1;if(Pt&&!At[e]&&y(xt,e));else if(Rt&&y(wt,e));else if(!$t[e]||At[e]){if(!(Me(t)&&(Mt.tagNameCheck instanceof RegExp&&y(Mt.tagNameCheck,t)||Mt.tagNameCheck instanceof Function&&Mt.tagNameCheck(t))&&(Mt.attributeNameCheck instanceof RegExp&&y(Mt.attributeNameCheck,e)||Mt.attributeNameCheck instanceof Function&&Mt.attributeNameCheck(e))||"is"===e&&Mt.allowCustomizedBuiltInElements&&(Mt.tagNameCheck instanceof RegExp&&y(Mt.tagNameCheck,i)||Mt.tagNameCheck instanceof Function&&Mt.tagNameCheck(i))))return!1}else if(Jt[e]);else if(y(Ct,x(i,kt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==w(i,"data:")||!Wt[t]){if(Tt&&!y(vt,x(i,kt,"")));else if(i)return!1}else;return!0},Me=function(t){return"annotation-xml"!==t&&f(t,yt)},Le=function(t){Ee(mt.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||Ce(t))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$t,forceKeepAttr:void 0};let n=e.length;for(;n--;){const a=e[n],{name:r,namespaceURI:o,value:l}=a,h=ue(r);let c="value"===r?l:v(l);if(i.attrName=h,i.attrValue=c,i.keepAttr=!0,i.forceKeepAttr=void 0,Ee(mt.uponSanitizeAttribute,t,i),c=i.attrValue,!_t||"id"!==h&&"name"!==h||(ve(r,t),c="user-content-"+c),It&&y(/((--!?|])>)|<\/(style|title)/i,c)){ve(r,t);continue}if(i.forceKeepAttr)continue;if(ve(r,t),!i.keepAttr)continue;if(!Dt&&y(/\/>/i,c)){ve(r,t);continue}Bt&&d([bt,gt,ft],(t=>{c=x(c,t," ")}));const p=ue(t.nodeName);if(Se(p,h,c)){if(ot&&"object"==typeof Z&&"function"==typeof Z.getAttributeType)if(o);else switch(Z.getAttributeType(p,h)){case"TrustedHTML":c=ot.createHTML(c);break;case"TrustedScriptURL":c=ot.createScriptURL(c)}try{o?t.setAttributeNS(o,r,c):t.setAttribute(r,c),Ce(t)?we(t):u(s.removed)}catch(t){}}}Ee(mt.afterSanitizeAttributes,t,null)},Ae=function t(e){let i=null;const s=ye(e);for(Ee(mt.beforeSanitizeShadowDOM,e,null);i=s.nextNode();)Ee(mt.uponSanitizeShadowNode,i,null),$e(i),Le(i),i.content instanceof h&&t(i.content);Ee(mt.afterSanitizeShadowDOM,e,null)};return s.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,n=null,a=null,o=null;if(ne=!t,ne&&(t="\x3c!--\x3e"),"string"!=typeof t&&!ze(t)){if("function"!=typeof t.toString)throw C("toString is not a function");if("string"!=typeof(t=t.toString()))throw C("dirty is not a string, aborting")}if(!s.isSupported)return t;if(Ht||ge(e),s.removed=[],"string"==typeof t&&(Ut=!1),Ut){if(t.nodeName){const e=ue(t.nodeName);if(!zt[e]||Lt[e])throw C("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof E)i=ke("\x3c!----\x3e"),n=i.ownerDocument.importNode(t,!0),n.nodeType===J&&"BODY"===n.nodeName||"HTML"===n.nodeName?i=n:i.appendChild(n);else{if(!Nt&&!Bt&&!Ot&&-1===t.indexOf("<"))return ot&&Gt?ot.createHTML(t):t;if(i=ke(t),!i)return Nt?null:Gt?lt:""}i&&jt&&we(i.firstChild);const l=ye(Ut?t:i);for(;a=l.nextNode();)$e(a),Le(a),a.content instanceof h&&Ae(a.content);if(Ut)return t;if(Nt){if(Ft)for(o=ct.call(i.ownerDocument);i.firstChild;)o.appendChild(i.firstChild);else o=i;return($t.shadowroot||$t.shadowrootmode)&&(o=pt.call(r,o,!0)),o}let c=Ot?i.outerHTML:i.innerHTML;return Ot&&zt["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&y(q,i.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+c),Bt&&d([bt,gt,ft],(t=>{c=x(c,t," ")})),ot&&Gt?ot.createHTML(c):c},s.setConfig=function(){ge(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Ht=!0},s.clearConfig=function(){pe=null,Ht=!1},s.isValidAttribute=function(t,e,i){pe||ge({});const s=ue(t),n=ue(e);return Se(s,n,i)},s.addHook=function(t,e){"function"==typeof e&&p(mt[t],e)},s.removeHook=function(t,e){if(void 0!==e){const i=c(mt[t],e);return-1===i?void 0:m(mt[t],i,1)[0]}return u(mt[t])},s.removeHooks=function(t){mt[t]=[]},s.removeAllHooks=function(){mt={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},s}();class at{#t={};addEventListener(t,e){this.#t||(this.#t={});let i=this.#t[t];i||(this.#t[t]=i=[]),i.push(e),i.length>1e4&&console.warn(`Potential EventEmitter memory leak: ${i.length} listeners subscribed to event "${t}"`)}removeEventListener(t,e){if(this.#t&&this.#t[t]){for(var i=[],s=0;s<this.#t[t].length;s+=1)this.#t[t][s]!==e&&i.push(this.#t[t][s]);this.#t[t]=i}}dispatchEvent(t){if(!this.#t)return;let e=this.#t[t.type];if(!e)return;let i=null;for(let s=e.length-1;s>=0;s-=1){let n,a=e[s];try{n=a.call(window,t)}catch(t){null===i&&(i=t)}if(!1===n)break}if(i)throw i}}let rt=(t,e,i=!1)=>{if(t.length!==e.length)return!1;if(i)for(let i in t){if(t[i]!==e[i])return!1}else{for(let i=0;i<t.length;i+=1)if(!e.includes(t[i]))return!1;for(let i=0;i<e.length;i+=1)if(!t.includes(e[i]))return!1}return!0};function ot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function lt(t,e,i=[0,0,0]){const s=ot(t,e[0]),n=ot(t,e[1]),a=ot(t,e[2]);return i[0]=s,i[1]=n,i[2]=a,i}function ht(t){return"string"===dt(t)}function dt(t){return(Object.prototype.toString.call(t).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function ct(t,{precision:e=16,unit:i}){return ut(t)?"none":(t=+mt(t,e))+(i??"")}function ut(t){return null===t}function pt(t){return ut(t)?0:t}function mt(t,e){if(0===t)return 0;let i=~~t,s=0;i&&e&&(s=1+~~Math.log10(Math.abs(i)));const n=10**(e-s);return Math.floor(t*n+.5)/n}function bt(t,e,i){return isNaN(t)?e:isNaN(e)?t:t+(e-t)*i}function gt(t,e,i){return!t||!e||t===e||t[0]===e[0]&&t[1]===e[1]||isNaN(i)||null===i?i:bt(e[0],e[1],function(t,e,i){return(i-t)/(e-t)}(t[0],t[1],i))}function ft(t,e,i){return Math.max(Math.min(i,e),t)}function xt(t,e){return Math.sign(t)===Math.sign(e)?t:-t}function wt(t,e){return xt(Math.abs(t)**e,t)}function vt(t,e){return 0===e?0:t/e}function kt(t,e){if(t instanceof e)return!0;const i=e.name;for(;t;){const e=Object.getPrototypeOf(t),s=e?.constructor?.name;if(s===i)return!0;if(!s||"Object"===s)return!1;t=e}return!1}class yt{type;coordMeta;coordRange;range;constructor(t,e){if("object"==typeof t&&(this.coordMeta=t),e&&(this.coordMeta=e,this.coordRange=e.range??e.refRange),"string"==typeof t){let e=t.trim().match(/^(?<type><[a-z]+>)(\[(?<min>-?[.\d]+),\s*(?<max>-?[.\d]+)\])?$/);if(!e)throw new TypeError(`Cannot parse ${t} as a type definition.`);this.type=e.groups.type;let{min:i,max:s}=e.groups;(i||s)&&(this.range=[+i,+s])}}get computedRange(){return this.range?this.range:"<percentage>"===this.type?this.percentageRange():"<angle>"===this.type?[0,360]:null}get unit(){return"<percentage>"===this.type?"%":"<angle>"===this.type?"deg":""}resolve(t){if("<angle>"===this.type)return t;let e=this.computedRange,i=this.coordRange;return"<percentage>"===this.type&&(i??=this.percentageRange()),gt(e,i,t)}serialize(t,e){let i="<percentage>"===this.type?this.percentageRange(100):this.computedRange,s=this.unit;return ct(t=gt(this.coordRange,i,t),{unit:s,precision:e})}toString(){let t=this.type;if(this.range){let[e="",i=""]=this.range;t+=`[${e},${i}]`}return t}percentageRange(t=1){let e;return e=this.coordMeta&&this.coordMeta.range||this.coordRange&&this.coordRange[0]>=0?[0,1]:[-1,1],[e[0]*t,e[1]*t]}static get(t,...e){return kt(t,this)?t:new this(t,...e)}}const Ct=Symbol("instance");class zt{type;name;spaceCoords;coords;constructor(t,e=t.space){t[Ct]=this,this.type="function",this.name="color",Object.assign(this,t),this.space=e,"custom"!==this.type&&(this.spaceCoords=Object.values(e.coords),this.coords||(this.coords=this.spaceCoords.map((t=>{let e=["<number>","<percentage>"];return"angle"===t.type&&e.push("<angle>"),e}))),this.coords=this.coords.map(((t,e)=>{let i=this.spaceCoords[e];return"string"==typeof t&&(t=t.trim().split(/\s*\|\s*/)),t.map((t=>yt.get(t,i)))})))}serializeCoords(t,e,i){return i=t.map(((t,e)=>yt.get(i?.[e]??this.coords[e][0],this.spaceCoords[e]))),t.map(((t,s)=>i[s].serialize(t,e)))}coerceCoords(t,e){return Object.entries(this.space.coords).map((([i,s],n)=>{let a=t[n];if(ut(a)||isNaN(a))return a;let r=e[n],o=this.coords[n].find((t=>t.type==r));if(!o){let t=s.name||i;throw new TypeError(`${r??a?.raw??a} not allowed for ${t} in ${this.name}()`)}return a=o.resolve(a),o.range&&(e[n]=o.toString()),a}))}canSerialize(){return"function"===this.type||this.serialize}static get(t,...e){return!t||kt(t,this)?t:t[Ct]?t[Ct]:new zt(t,...e)}}const Et=new class{add(t,e,i){if("string"==typeof arguments[0])(Array.isArray(t)?t:[t]).forEach((function(t){this[t]=this[t]||[],e&&this[t][i?"unshift":"push"](e)}),this);else for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1])}run(t,e){this[t]=this[t]||[],this[t].forEach((function(t){t.call(e&&e.context?e.context:e,e)}))}},$t={D50:[.3457/.3585,1,.2958/.3585],D65:[.3127/.329,1,.3583/.329]};function St(t){return Array.isArray(t)?t:$t[t]}function Mt(t,e,i,s={}){if(t=St(t),e=St(e),!t||!e)throw new TypeError(`Missing white point to convert ${t?"":"from"}${t||e?"":"/"}${e?"":"to"}`);if(t===e)return i;let n={W1:t,W2:e,XYZ:i,options:s};if(Et.run("chromatic-adaptation-start",n),n.M||(n.W1===$t.D65&&n.W2===$t.D50?n.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:n.W1===$t.D50&&n.W2===$t.D65&&(n.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),Et.run("chromatic-adaptation-end",n),n.M)return lt(n.XYZ,n.M);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}var Lt={gamut_mapping:"css",precision:5,deltaE:"76",verbose:"test"!==globalThis?.process?.env?.NODE_ENV?.toLowerCase(),warn:function(t){this.verbose&&globalThis?.console?.warn?.(t)}};function At(t,e){let i,s={str:String(t)?.trim(),options:e};if(Et.run("parse-start",s),s.color)return s.color;s.parsed=function(t){if(!t)return;t=t.trim();let e=t.match(Pt.function);if(e){let t=[],i=[],s=!1,n=e[2].replace(Pt.singleArgument,((e,n)=>{let{value:a,meta:r}=function(t){let e={},i=t.match(Pt.unitValue)?.[0],s=e.raw=t;i?(e.type="%"===i?"<percentage>":"<angle>",e.unit=i,e.unitless=Number(s.slice(0,-i.length)),s=e.unitless*Rt[i]):Pt.number.test(s)?(s=Number(s),e.type="<number>"):"none"===s?s=null:"NaN"===s||"calc(NaN)"===s?(s=NaN,e.type="<number>"):e.type="<ident>";return{value:s,meta:e}}(n);return e.startsWith("/")&&(s=!0),t.push(a),i.push(r),""}));return{name:e[1].toLowerCase(),args:t,argMeta:i,lastAlpha:s,commas:n.includes(","),rawName:e[1],rawArgs:e[2]}}}(s.str);let n=s.options?s.options.parseMeta??s.options.meta:null;if(s.parsed){let e,a,r=s.parsed.name,o=s.parsed.args,l=o.map(((t,e)=>s.parsed.argMeta[e]?.type));if("color"===r){let i=o.shift();l.shift();let n=i.startsWith("--")?i.substring(2):`--${i}`,h=[i,n];if(e=Dt.findFormat({name:r,id:h,type:"function"}),!e){let e,a=i in Dt.registry?i:n;if(a in Dt.registry){let s=Dt.registry[a].formats?.color?.id;if(s){e=`Did you mean ${t.replace("color("+i,"color("+s)}?`}}throw new TypeError(`Cannot parse ${s.str}. `+(e??"Missing a plugin?"))}a=e.space,e.id.startsWith("--")&&!i.startsWith("--")&&Lt.warn(`${a.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${e.id}) instead of color(${i}).`),i.startsWith("--")&&!e.id.startsWith("--")&&Lt.warn(`${a.name} is a standard space and supported in the CSS spec. Use color(${e.id}) instead of prefixed color(${i}).`)}else e=Dt.findFormat({name:r,type:"function"}),a=e.space;n&&Object.assign(n,{format:e,formatId:e.name,types:l,commas:s.parsed.commas});let h=1;(!0===e.alpha||s.parsed.lastAlpha)&&(h=s.parsed.args.pop(),n&&(n.alphaType=l.pop()));let d=e.coords.length;if(o.length!==d)throw new TypeError(`Expected ${d} coordinates for ${a.id} in ${s.str}), got ${o.length}`);o=e.coerceCoords(o,l),i={spaceId:a.id,coords:o,alpha:h}}else for(let t of Dt.all)for(let e in t.formats){let a=t.formats[e];if("custom"!==a.type)continue;if(a.test&&!a.test(s.str))continue;a=t.getFormat(a);let r=a.parse(s.str);if(r){n&&Object.assign(n,{format:a,formatId:e}),i=r;break}}if(!i)throw new TypeError(`Could not parse ${t} as a color. Missing a plugin?`);return i.alpha=ut(i.alpha)?i.alpha:void 0===i.alpha?1:ft(0,i.alpha,1),i}const Rt={"%":.01,deg:1,grad:.9,rad:180/Math.PI,turn:360},Pt={function:/^([a-z]+)\(((?:calc\(NaN\)|.)+?)\)$/i,number:/^([-+]?(?:[0-9]*\.)?[0-9]+(e[-+]?[0-9]+)?)$/i,unitValue:RegExp(`(${Object.keys(Rt).join("|")})$`),singleArgument:/\/?\s*(none|NaN|calc\(NaN\)|[-+\w.]+(?:%|deg|g?rad|turn)?)/g};function Tt(t,e){if(Array.isArray(t))return t.map((t=>Tt(t,e)));if(!t)throw new TypeError("Empty color reference");ht(t)&&(t=At(t,e));let i=t.space||t.spaceId;return"string"==typeof i&&(t.space=Dt.get(i)),void 0===t.alpha&&(t.alpha=1),t}class Dt{constructor(t){this.id=t.id,this.name=t.name,this.base=t.base?Dt.get(t.base):null,this.aliases=t.aliases,this.base&&(this.fromBase=t.fromBase,this.toBase=t.toBase);let e=t.coords??this.base.coords;for(let t in e)"name"in e[t]||(e[t].name=t);this.coords=e;let i=t.white??this.base.white??"D65";this.white=St(i),this.formats=t.formats??{};for(let t in this.formats){let e=this.formats[t];e.type||="function",e.name||=t}this.formats.color?.id||(this.formats.color={...this.formats.color??{},id:t.cssId||this.id}),t.gamutSpace?this.gamutSpace="self"===t.gamutSpace?this:Dt.get(t.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(t,e)=>!0),this.referred=t.referred,Object.defineProperty(this,"path",{value:Bt(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),Et.run("colorspace-init-end",this)}inGamut(t,{epsilon:e=75e-6}={}){if(!this.equals(this.gamutSpace))return t=this.to(this.gamutSpace,t),this.gamutSpace.inGamut(t,{epsilon:e});let i=Object.values(this.coords);return t.every(((t,s)=>{let n=i[s];if("angle"!==n.type&&n.range){if(ut(t))return!0;let[i,s]=n.range;return(void 0===i||t>=i-e)&&(void 0===s||t<=s+e)}return!0}))}get isUnbounded(){return Object.values(this.coords).every((t=>!("range"in t)))}get cssId(){return this.formats?.color?.id||this.id}get isPolar(){for(let t in this.coords)if("angle"===this.coords[t].type)return!0;return!1}getFormat(t){if(!t)return null;"default"===t?t=Object.values(this.formats)[0]:"string"==typeof t&&(t=this.formats[t]);let e=zt.get(t,this);return e!==t&&t.name in this.formats&&(this.formats[t.name]=e),e}equals(t){return!!t&&(this===t||this.id===t||this.id===t.id)}to(t,e){if(1===arguments.length){const i=Tt(t);[t,e]=[i.space,i.coords]}if(t=Dt.get(t),this.equals(t))return e;e=e.map((t=>ut(t)?0:t));let i,s,n=this.path,a=t.path;for(let t=0;t<n.length&&n[t].equals(a[t]);t++)i=n[t],s=t;if(!i)throw new Error(`Cannot convert between color spaces ${this} and ${t}: no connection space was found`);for(let t=n.length-1;t>s;t--)e=n[t].toBase(e);for(let t=s+1;t<a.length;t++)e=a[t].fromBase(e);return e}from(t,e){if(1===arguments.length){const i=Tt(t);[t,e]=[i.space,i.coords]}return(t=Dt.get(t)).to(this,e)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let t=[];for(let e in this.coords){let i=this.coords[e],s=i.range||i.refRange;t.push(s?.min??0)}return t}static registry={};static get all(){return[...new Set(Object.values(Dt.registry))]}static register(t,e){if(1===arguments.length&&(t=(e=arguments[0]).id),e=this.get(e),this.registry[t]&&this.registry[t]!==e)throw new Error(`Duplicate color space registration: '${t}'`);if(this.registry[t]=e,1===arguments.length&&e.aliases)for(let t of e.aliases)this.register(t,e);return e}static get(t,...e){if(!t||kt(t,this))return t;if("string"===dt(t)){let e=Dt.registry[t.toLowerCase()];if(!e)throw new TypeError(`No color space found with id = "${t}"`);return e}if(e.length)return Dt.get(...e);throw new TypeError(`${t} is not a valid color space`)}static findFormat(t,e=Dt.all){if(!t)return null;"string"==typeof t&&(t={name:t});for(let i of e)for(let[e,s]of Object.entries(i.formats)){s.name??=e,s.type??="function";let n=!(t.name&&s.name!==t.name||t.type&&s.type!==t.type);if(t.id){let e=s.ids||[s.id],i=Array.isArray(t.id)?t.id:[t.id];n&&=i.some((t=>e.includes(t)))}if(n){let t=zt.get(s,i);return t!==s&&(i.formats[s.name]=t),t}}return null}static resolveCoord(t,e){let i,s,n=dt(t);if("string"===n?t.includes(".")?[i,s]=t.split("."):[i,s]=[,t]:Array.isArray(t)?[i,s]=t:(i=t.space,s=t.coordId),i=Dt.get(i),i||(i=e),!i)throw new TypeError(`Cannot resolve coordinate reference ${t}: No color space specified and relative references are not allowed here`);if(n=dt(s),"number"===n||"string"===n&&s>=0){let t=Object.entries(i.coords)[s];if(t)return{space:i,id:t[0],index:s,...t[1]}}i=Dt.get(i);let a=s.toLowerCase(),r=0;for(let t in i.coords){let e=i.coords[t];if(t.toLowerCase()===a||e.name?.toLowerCase()===a)return{space:i,id:t,index:r,...e};r++}throw new TypeError(`No "${s}" coordinate found in ${i.name}. Its coordinates are: ${Object.keys(i.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}}function Bt(t){let e=[t];for(let i=t;i=i.base;)e.push(i);return e}var It=new Dt({id:"xyz-d65",name:"XYZ D65",coords:{x:{refRange:[0,1],name:"X"},y:{refRange:[0,1],name:"Y"},z:{refRange:[0,1],name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]}),Ot=new Dt({id:"xyz-d50",name:"XYZ D50",white:"D50",base:It,fromBase:t=>Mt(It.white,"D50",t),toBase:t=>Mt("D50",It.white,t)});const Ht=216/24389,jt=24/116,Nt=24389/27;let Ft=$t.D50;var Gt=new Dt({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:Ft,base:Ot,fromBase(t){let e=t.map(((t,e)=>t/Ft[e])).map((t=>t>Ht?Math.cbrt(t):(Nt*t+16)/116));return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(t){let[e,i,s]=t,n=[];return n[1]=(e+16)/116,n[0]=i/500+n[1],n[2]=n[1]-s/200,[n[0]>jt?Math.pow(n[0],3):(116*n[0]-16)/Nt,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/Nt,n[2]>jt?Math.pow(n[2],3):(116*n[2]-16)/Nt].map(((t,e)=>t*Ft[e]))},formats:{lab:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <percentage>"]}}});function Xt(t){return"number"!=typeof t?t:(t%360+360)%360}var _t=new Dt({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Gt,fromBase(t){if(void 0===this.ε){let t=Object.values(this.base.coords)[1].refRange,e=t[1]-t[0];this.ε=e/1e5}let[e,i,s]=t,n=Math.abs(i)<this.ε&&Math.abs(s)<this.ε,a=n?null:Xt(180*Math.atan2(s,i)/Math.PI);return[e,n?0:Math.sqrt(i**2+s**2),a]},toBase(t){let[e,i,s]=t,n=null,a=null;return ut(s)||(i=i<0?0:i,n=i*Math.cos(s*Math.PI/180),a=i*Math.sin(s*Math.PI/180)),[e,n,a]},formats:{lch:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <angle>"]}}});const Zt=25**7,Ut=Math.PI,Yt=180/Ut,Vt=Ut/180;function qt(t){const e=t*t;return e*e*e*t}function Wt(t,e,{kL:i=1,kC:s=1,kH:n=1}={}){[t,e]=Tt([t,e]);let[a,r,o]=Gt.from(t),l=_t.from(Gt,[a,r,o])[1],[h,d,c]=Gt.from(e),u=_t.from(Gt,[h,d,c])[1];l<0&&(l=0),u<0&&(u=0);let p=qt((l+u)/2),m=.5*(1-Math.sqrt(p/(p+Zt))),b=(1+m)*r,g=(1+m)*d,f=Math.sqrt(b**2+o**2),x=Math.sqrt(g**2+c**2),w=0===b&&0===o?0:Math.atan2(o,b),v=0===g&&0===c?0:Math.atan2(c,g);w<0&&(w+=2*Ut),v<0&&(v+=2*Ut),w*=Yt,v*=Yt;let k,y=h-a,C=x-f,z=v-w,E=w+v,$=Math.abs(z);f*x==0?k=0:$<=180?k=z:z>180?k=z-360:z<-180?k=z+360:Lt.warn("the unthinkable has happened");let S,M=2*Math.sqrt(x*f)*Math.sin(k*Vt/2),L=(a+h)/2,A=(f+x)/2,R=qt(A);S=f*x==0?E:$<=180?E/2:E<360?(E+360)/2:(E-360)/2;let P=(L-50)**2,T=1+.015*P/Math.sqrt(20+P),D=1+.045*A,B=1;B-=.17*Math.cos((S-30)*Vt),B+=.24*Math.cos(2*S*Vt),B+=.32*Math.cos((3*S+6)*Vt),B-=.2*Math.cos((4*S-63)*Vt);let I=1+.015*A*B,O=30*Math.exp(-1*((S-275)/25)**2),H=2*Math.sqrt(R/(R+Zt)),j=(y/(i*T))**2;return j+=(C/(s*D))**2,j+=(M/(n*I))**2,j+=-1*Math.sin(2*O*Vt)*H*(C/(s*D))*(M/(n*I)),Math.sqrt(j)}const Kt=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],Jt=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],Qt=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],te=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]];var ee=new Dt({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:It,fromBase(t){let e=lt(t,Kt);return e[0]=Math.cbrt(e[0]),e[1]=Math.cbrt(e[1]),e[2]=Math.cbrt(e[2]),lt(e,Qt,e)},toBase(t){let e=lt(t,te);return e[0]=e[0]**3,e[1]=e[1]**3,e[2]=e[2]**3,lt(e,Jt,e)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <percentage>"]}}});function ie(t,e){[t,e]=Tt([t,e]);let[i,s,n]=ee.from(t),[a,r,o]=ee.from(e),l=i-a,h=s-r,d=n-o;return Math.sqrt(l**2+h**2+d**2)}function se(t,e,{epsilon:i=75e-6}={}){t=Tt(t),e||(e=t.space),e=Dt.get(e);let s=t.coords;return e!==t.space&&(s=e.from(t)),e.inGamut(s,{epsilon:i})}function ne(t,e){t=Tt(t);let i,s=Dt.get(e,e?.space),n=e?.precision;return i=!s||t.space.equals(s)?t.coords.slice():s.from(t),void 0===n?i:i.map((t=>mt(t,n)))}function ae(t,e){if(t=Tt(t),"alpha"===e)return t.alpha??1;let{space:i,index:s}=Dt.resolveCoord(e,t.space);return ne(t,i)[s]}function re(t,e,i,s){return t=Tt(t),Array.isArray(e)&&([e,i,s]=[t.space,e,i]),e=Dt.get(e),t.coords=e===t.space?i.slice():e.to(t.space,i),void 0!==s&&(t.alpha=s),t}function oe(t,e,i){if(t=Tt(t),2===arguments.length&&"object"===dt(arguments[1])){let e=arguments[1];for(let i in e)oe(t,i,e[i])}else if("function"==typeof i&&(i=i(ae(t,e))),"alpha"===e)t.alpha=i;else{let{space:s,index:n}=Dt.resolveCoord(e,t.space),a=ne(t,s);a[n]=i,re(t,s,a)}return t}function le(t){return{space:t.space,coords:t.coords.slice(),alpha:t.alpha}}re.returns="color",oe.returns="color";const he=Math.PI/180;var de=new Dt({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:It,fromBase:t=>t.map((t=>Math.max(203*t,0))),toBase:t=>t.map((t=>Math.max(t/203,0)))});const ce=1.15,ue=.66,pe=2610/16384,me=16384/2610,be=.8359375,ge=2413/128,fe=18.6875,xe=1.7*2523/32,we=32/(1.7*2523),ve=-.56,ke=16295499532821565e-27,ye=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],Ce=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],ze=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],Ee=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var $e=new Dt({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:de,fromBase(t){let[e,i,s]=t,n=lt([ce*e-(ce-1)*s,ue*i-(ue-1)*e,s],ye).map((function(t){return((be+ge*(t/1e4)**pe)/(1+fe*(t/1e4)**pe))**xe})),[a,r,o]=lt(n,ze);return[(1+ve)*a/(1+ve*a)-ke,r,o]},toBase(t){let[e,i,s]=t,n=lt([(e+ke)/(1+ve-ve*(e+ke)),i,s],Ee).map((function(t){return 1e4*((be-t**we)/(fe*t**we-ge))**me})),[a,r,o]=lt(n,Ce),l=(a+(ce-1)*o)/ce;return[l,(r+(ue-1)*l)/ue,o]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <percentage>"]}}}),Se=new Dt({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:$e,fromBase:_t.fromBase,toBase:_t.toBase});const Me=.8359375,Le=2413/128,Ae=18.6875,Re=2610/16384,Pe=2523/32,Te=16384/2610,De=32/2523,Be=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],Ie=[[.5,.5,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],Oe=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],He=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]];var je=new Dt({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:de,fromBase:t=>function(t){let e=t.map((function(t){return((Me+Le*(t/1e4)**Re)/(1+Ae*(t/1e4)**Re))**Pe}));return lt(e,Ie)}(lt(t,Be)),toBase(t){let e=function(t){let e=lt(t,Oe),i=e.map((function(t){return 1e4*(Math.max(t**De-Me,0)/(Le-Ae*t**De))**Te}));return i}(t);return lt(e,He)}});const Ne=$t.D65,Fe=1/.42,Ge=2*Math.PI,Xe=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],_e=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],Ze=[[460,451,288],[460,-891,-261],[460,-220,-6300]],Ue={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},Ye={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},Ve=180/Math.PI,qe=Math.PI/180;function We(t,e){return t.map((t=>{const i=wt(e*Math.abs(t)*.01,.42);return 400*xt(i,t)/(i+27.13)}))}function Ke(t,e,i,s,n){const a={};a.discounting=n,a.refWhite=t,a.surround=s;const r=t.map((t=>100*t));a.la=e,a.yb=i;const o=r[1],l=lt(r,Xe),h=(s=Ue[a.surround])[0];a.c=s[1],a.nc=s[2];const d=(1/(5*a.la+1))**4;a.fl=d*a.la+.1*(1-d)*(1-d)*Math.cbrt(5*a.la),a.flRoot=a.fl**.25,a.n=a.yb/o,a.z=1.48+Math.sqrt(a.n),a.nbb=.725*a.n**-.2,a.ncb=a.nbb;const c=Math.max(Math.min(h*(1-1/3.6*Math.exp((-a.la-42)/92)),1),0);a.dRgb=l.map((t=>bt(1,o/t,c))),a.dRgbInv=a.dRgb.map((t=>1/t));const u=We(l.map(((t,e)=>t*a.dRgb[e])),a.fl);return a.aW=a.nbb*(2*u[0]+u[1]+.05*u[2]),a}const Je=Ke(Ne,64/Math.PI*.2,20,"average",!1);function Qe(t,e){if(!(void 0!==t.J^void 0!==t.Q))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(void 0!==t.C^void 0!==t.M^void 0!==t.s))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(void 0!==t.h^void 0!==t.H))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(0===t.J||0===t.Q)return[0,0,0];let i=0;i=void 0!==t.h?Xt(t.h)*qe:function(t){let e=(t%400+400)%400;const i=Math.floor(.01*e);e%=100;const[s,n]=Ye.h.slice(i,i+2),[a,r]=Ye.e.slice(i,i+2);return Xt((e*(r*s-a*n)-100*s*r)/(e*(r-a)-100*r))}(t.H)*qe;const s=Math.cos(i),n=Math.sin(i);let a=0;void 0!==t.J?a=.1*wt(t.J,.5):void 0!==t.Q&&(a=.25*e.c*t.Q/((e.aW+4)*e.flRoot));let r=0;void 0!==t.C?r=t.C/a:void 0!==t.M?r=t.M/e.flRoot/a:void 0!==t.s&&(r=4e-4*t.s**2*(e.aW+4)/e.c);const o=wt(r*Math.pow(1.64-Math.pow(.29,e.n),-.73),10/9),l=.25*(Math.cos(i+2)+3.8),h=e.aW*wt(a,2/e.c/e.z),d=5e4/13*e.nc*e.ncb*l,c=h/e.nbb,u=23*(c+.305)*vt(o,23*d+o*(11*s+108*n)),p=function(t,e){const i=100/e*2588.068098016295;return t.map((t=>{const e=Math.abs(t);return xt(i*wt(e/(400-e),Fe),t)}))}(lt([c,u*s,u*n],Ze).map((t=>1*t/1403)),e.fl);return lt(p.map(((t,i)=>t*e.dRgbInv[i])),_e).map((t=>t/100))}function ti(t,e){const i=We(lt(t.map((t=>100*t)),Xe).map(((t,i)=>t*e.dRgb[i])),e.fl),s=i[0]+(-12*i[1]+i[2])/11,n=(i[0]+i[1]-2*i[2])/9,a=(Math.atan2(n,s)%Ge+Ge)%Ge,r=.25*(Math.cos(a+2)+3.8),o=wt(5e4/13*e.nc*e.ncb*vt(r*Math.sqrt(s**2+n**2),i[0]+i[1]+1.05*i[2]+.305),.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),l=wt(e.nbb*(2*i[0]+i[1]+.05*i[2])/e.aW,.5*e.c*e.z),h=100*wt(l,2),d=4/e.c*l*(e.aW+4)*e.flRoot,c=o*l,u=c*e.flRoot,p=Xt(a*Ve),m=function(t){let e=Xt(t);e<=Ye.h[0]&&(e+=360);const i=function(t,e,i=0,s=t.length){for(;i<s;){const n=i+s>>1;t[n]<e?i=n+1:s=n}return i}(Ye.h,e)-1,[s,n]=Ye.h.slice(i,i+2),[a,r]=Ye.e.slice(i,i+2),o=(e-s)/a;return Ye.H[i]+100*o/(o+(n-e)/r)}(p);return{J:h,C:c,h:p,s:50*wt(e.c*o/(e.aW+4),.5),Q:d,M:u,H:m}}new Dt({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:It,fromBase(t){const e=ti(t,Je);return[e.J,e.M,e.h]},toBase:t=>Qe({J:t[0],M:t[1],h:t[2]},Je)});const ei=216/24389,ii=24389/27;function si(t){return t>8?Math.pow((t+16)/116,3):t/ii}function ni(t,e){const i=116*((s=t[1])>ei?Math.cbrt(s):(ii*s+16)/116)-16;var s;if(0===i)return[0,0,0];const n=ti(t,ai);return[Xt(n.h),n.C,i]}const ai=Ke($t.D65,200/Math.PI*si(50),100*si(50),"average",!1);var ri=new Dt({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:It,fromBase:t=>ni(t),toBase:t=>function(t,e){let[i,s,n]=t,a=[],r=0;if(0===n)return[0,0,0];let o=si(n);r=n>0?.00379058511492914*n**2+.608983189401032*n+.9155088574762233:9514440756550361e-21*n**2+.08693057439788597*n-21.928975842194614;let l=0,h=Infinity;for(;l<=15;){a=Qe({J:r,C:s,h:i},e);const t=Math.abs(a[1]-o);if(t<h){if(t<=2e-12)return a;h=t}r-=(a[1]-o)*r/(2*a[1]),l+=1}return Qe({J:r,C:s,h:i},e)}(t,ai),formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const oi=Math.PI/180,li=[1,.007,.0228];function hi(t){t[1]<0&&(t=ri.fromBase(ri.toBase(t)));const e=Math.log(Math.max(1+li[2]*t[1]*ai.flRoot,1))/li[2],i=t[0]*oi,s=e*Math.cos(i),n=e*Math.sin(i);return[t[2],s,n]}var di={deltaE76:function(t,e){return function(t,e,i="lab"){let s=(i=Dt.get(i)).from(t),n=i.from(e);return Math.sqrt(s.reduce(((t,e,i)=>{let s=n[i];return ut(e)||ut(s)?t:t+(s-e)**2}),0))}(t,e,"lab")},deltaECMC:function(t,e,{l:i=2,c:s=1}={}){[t,e]=Tt([t,e]);let[n,a,r]=Gt.from(t),[,o,l]=_t.from(Gt,[n,a,r]),[h,d,c]=Gt.from(e),u=_t.from(Gt,[h,d,c])[1];o<0&&(o=0),u<0&&(u=0);let p=n-h,m=o-u,b=(a-d)**2+(r-c)**2-m**2,g=.511;n>=16&&(g=.040975*n/(1+.01765*n));let f,x=.0638*o/(1+.0131*o)+.638;ut(l)&&(l=0),f=l>=164&&l<=345?.56+Math.abs(.2*Math.cos((l+168)*he)):.36+Math.abs(.4*Math.cos((l+35)*he));let w=Math.pow(o,4),v=Math.sqrt(w/(w+1900)),k=(p/(i*g))**2;return k+=(m/(s*x))**2,k+=b/(x*(v*f+1-v))**2,Math.sqrt(k)},deltaE2000:Wt,deltaEJz:function(t,e){[t,e]=Tt([t,e]);let[i,s,n]=Se.from(t),[a,r,o]=Se.from(e),l=i-a,h=s-r;ut(n)&&ut(o)?(n=0,o=0):ut(n)?n=o:ut(o)&&(o=n);let d=n-o,c=2*Math.sqrt(s*r)*Math.sin(d/2*(Math.PI/180));return Math.sqrt(l**2+h**2+c**2)},deltaEITP:function(t,e){[t,e]=Tt([t,e]);let[i,s,n]=je.from(t),[a,r,o]=je.from(e);return 720*Math.sqrt((i-a)**2+.25*(s-r)**2+(n-o)**2)},deltaEOK:ie,deltaEOK2:function(t,e){[t,e]=Tt([t,e]);let[i,s,n]=ee.from(t),[a,r,o]=ee.from(e),l=i-a,h=2*(s-r),d=2*(n-o);return Math.sqrt(l**2+h**2+d**2)},deltaEHCT:function(t,e){[t,e]=Tt([t,e]);let[i,s,n]=hi(ri.from(t)),[a,r,o]=hi(ri.from(e));return Math.sqrt((i-a)**2+(s-r)**2+(n-o)**2)}};const ci={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function ui(t,{method:e=Lt.gamut_mapping,space:i,deltaEMethod:s="",jnd:n=2,blackWhiteClamp:a={}}={}){if(t=Tt(t),ht(arguments[1])?i=arguments[1]:i||(i=t.space),se(t,i=Dt.get(i),{epsilon:0}))return t;let r;if("css"===e)r=function(t,{space:e}={}){const i=.02,s=1e-4;t=Tt(t),e||(e=t.space);e=Dt.get(e);const n=Dt.get("oklch");if(e.isUnbounded)return mi(t,e);const a=mi(t,n);let r=a.coords[0];if(r>=1){const i=mi(pi.WHITE,e);return i.alpha=t.alpha,mi(i,e)}if(r<=0){const i=mi(pi.BLACK,e);return i.alpha=t.alpha,mi(i,e)}if(se(a,e,{epsilon:0}))return mi(a,e);function o(t){const i=mi(t,e),s=Object.values(e.coords);return i.coords=i.coords.map(((t,e)=>{if("range"in s[e]){const[i,n]=s[e].range;return ft(i,t,n)}return t})),i}let l=0,h=a.coords[1],d=!0,c=le(a),u=o(c),p=ie(u,c);if(p<i)return u;for(;h-l>s;){const t=(l+h)/2;if(c.coords[1]=t,d&&se(c,e,{epsilon:0}))l=t;else if(u=o(c),p=ie(u,c),p<i){if(i-p<s)break;d=!1,l=t}else h=t}return u}(t,{space:i});else{if("clip"===e||se(t,i))r=mi(t,i);else{Object.prototype.hasOwnProperty.call(ci,e)&&({method:e,jnd:n,deltaEMethod:s,blackWhiteClamp:a}=ci[e]);let o=Wt;if(""!==s)for(let t in di)if("deltae"+s.toLowerCase()===t.toLowerCase()){o=di[t];break}let l=ui(mi(t,i),{method:"clip",space:i});if(o(t,l)>n){if(3===Object.keys(a).length){let e=Dt.resolveCoord(a.channel),i=ae(mi(t,e.space),e.id);if(ut(i)&&(i=0),i>=a.max)return mi({space:"xyz-d65",coords:$t.D65},t.space);if(i<=a.min)return mi({space:"xyz-d65",coords:[0,0,0]},t.space)}let s=Dt.resolveCoord(e),l=s.space,h=s.id,d=mi(t,l);d.coords.forEach(((t,e)=>{ut(t)&&(d.coords[e]=0)}));let c=(s.range||s.refRange)[0],u=function(t){const e=t?Math.floor(Math.log10(Math.abs(t))):0;return Math.max(parseFloat("1e"+(e-2)),1e-6)}(n),p=c,m=ae(d,h);for(;m-p>u;){let t=le(d);t=ui(t,{space:i,method:"clip"}),o(d,t)-n<u?p=ae(d,h):m=ae(d,h),oe(d,h,(p+m)/2)}r=mi(d,i)}else r=l}if("clip"===e||!se(r,i,{epsilon:0})){let t=Object.values(i.coords).map((t=>t.range||[]));r.coords=r.coords.map(((e,i)=>{let[s,n]=t[i];return void 0!==s&&(e=Math.max(s,e)),void 0!==n&&(e=Math.min(e,n)),e}))}}return i!==t.space&&(r=mi(r,t.space)),t.coords=r.coords,t}ui.returns="color";const pi={WHITE:{space:ee,coords:[1,0,0],alpha:1},BLACK:{space:ee,coords:[0,0,0],alpha:1}};function mi(t,e,{inGamut:i}={}){t=Tt(t);let s=(e=Dt.get(e)).from(t),n={space:e,coords:s,alpha:t.alpha};return i&&(n=ui(n,!0===i?void 0:i)),n}function bi(t,e={}){let i,{precision:s=Lt.precision,format:n,inGamut:a=!0,coords:r,alpha:o,commas:l}=e,h=n;(t=Tt(t)).parseMeta&&!n&&(t.parseMeta.format.canSerialize()&&(n=t.parseMeta.format,h=t.parseMeta.formatId),r??=t.parseMeta.types,o??=t.parseMeta.alphaType,l??=t.parseMeta.commas),h&&(n=t.space.getFormat(n)??Dt.findFormat(h)),n||(n=t.space.getFormat("default")??Dt.DEFAULT_FORMAT,h=n.name),n&&n.space&&n.space!==t.space&&(t=mi(t,n.space));let d=t.coords.slice();if(a||=n.toGamut,a&&!se(t)&&(d=ui(le(t),!0===a?void 0:a).coords),"custom"===n.type){if(!n.serialize)throw new TypeError(`format ${h} can only be used to parse colors, not for serialization`);i=n.serialize(d,t.alpha,e)}else{let e=n.name||"color",a=n.serializeCoords(d,s,r);if("color"===e){let e=n.id||n.ids?.[0]||t.space.cssId||t.space.id;a.unshift(e)}let h=t.alpha;void 0!==o&&"object"!=typeof o&&(o="string"==typeof o?{type:o}:{include:o});let c=o?.type??"<number>",u=!0===o?.include||!0===n.alpha||!1!==o?.include&&!1!==n.alpha&&h<1,p="";if(l??=n.commas,u){if(null!==s){let t;"<percentage>"===c&&(t="%",h*=100),h=ct(h,{precision:s,unit:t})}p=`${l?",":" /"} ${h}`}i=`${e}(${a.join(l?", ":" ")}${p})`}return i}mi.returns="color";let{pow:gi,sqrt:fi,PI:xi}=Math,wi=(t,e=0)=>{let i=gi(10,e);return Math.round(t*i)/i},vi=(t,e=0)=>new DOMRect(wi(t.x,e),wi(t.y,e),wi(t.width,e),wi(t.height,e)),ki=(t,e,i=Infinity,s=null)=>(null!==s&&(t=wi(t,s)),t<e?t=e:t>i&&(t=i),t),yi=(t,e)=>{t=+t,e=+e;let i=(Math.floor(t)+"").length;if(e>i)return+t.toFixed(e-i);{let s=10**(i-e);return Math.round(t/s)*s}},Ci=t=>{if(isFinite(t)){let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i+=1;return i}return 0},zi=(t,e)=>{let i=e.x-t.x;i*=i;let s=e.y-t.y;return s*=s,fi(i+s)},Ei=(t,e)=>e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height,$i=(t,e,i)=>{let[s,n]=[t.x,t.y],[a,r]=[e.x,e.y],o=Math.PI/180*i,l=Math.cos(o),h=Math.sin(o);return new DOMPoint(l*(s-a)-h*(n-r)+a,l*(n-r)+h*(s-a)+r)};class Si extends Dt{constructor(t){t.coords||(t.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),t.base||(t.base=It),t.toXYZ_M&&t.fromXYZ_M&&(t.toBase??=e=>{let i=lt(e,t.toXYZ_M);return this.white!==this.base.white&&(i=Mt(this.white,this.base.white,i)),i},t.fromBase??=e=>lt(e=Mt(this.base.white,this.white,e),t.fromXYZ_M)),t.referred??="display",super(t)}}var Mi=new Si({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe® 98 RGB compatible",white:"D65",toXYZ_M:[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],fromXYZ_M:[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]]}),Li=new Si({id:"a98rgb",cssId:"a98-rgb",name:"Adobe® 98 RGB compatible",base:Mi,toBase:t=>t.map((t=>Math.pow(Math.abs(t),563/256)*Math.sign(t))),fromBase:t=>t.map((t=>Math.pow(Math.abs(t),256/563)*Math.sign(t)))});const Ai=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var Ri=new Si({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M:Ai}),Pi={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let Ti=Array(3).fill("<percentage> | <number>[0, 255]"),Di=Array(3).fill("<number>[0, 255]");var Bi=new Si({id:"srgb",name:"sRGB",base:Ri,fromBase:t=>t.map((t=>{let e=t<0?-1:1,i=t*e;return i>.0031308?e*(1.055*i**(1/2.4)-.055):12.92*t})),toBase:t=>t.map((t=>{let e=t<0?-1:1,i=t*e;return i<=.04045?t/12.92:e*((i+.055)/1.055)**2.4})),formats:{rgb:{coords:Ti},rgb_number:{name:"rgb",commas:!0,coords:Di,alpha:!1},color:{},rgba:{coords:Ti,commas:!0,alpha:!0},rgba_number:{name:"rgba",commas:!0,coords:Di},hex:{type:"custom",toGamut:!0,test:t=>/^#(([a-f0-9]{2}){3,4}|[a-f0-9]{3,4})$/i.test(t),parse(t){t.length<=5&&(t=t.replace(/[a-f0-9]/gi,"$&$&"));let e=[];return t.replace(/[a-f0-9]{2}/gi,(t=>{e.push(parseInt(t,16)/255)})),{spaceId:"srgb",coords:e.slice(0,3),alpha:e.slice(3)[0]}},serialize:(t,e,{collapse:i=!0,alpha:s}={})=>{(!1!==s&&e<1||!0===s)&&t.push(e),t=t.map((t=>Math.round(255*t)));let n=i&&t.every((t=>t%17==0));return"#"+t.map((t=>n?(t/17).toString(16):t.toString(16).padStart(2,"0"))).join("")}},keyword:{type:"custom",test:t=>/^[a-z]+$/i.test(t),parse(t){let e={spaceId:"srgb",coords:null,alpha:1};if("transparent"===(t=t.toLowerCase())?(e.coords=Pi.black,e.alpha=0):e.coords=Pi[t],e.coords)return e}}}}),Ii=new Dt({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Bi,fromBase:t=>{let e=Math.max(...t),i=Math.min(...t),[s,n,a]=t,[r,o,l]=[null,0,(i+e)/2],h=e-i;if(0!==h){switch(o=0===l||1===l?0:(e-l)/Math.min(l,1-l),e){case s:r=(n-a)/h+(n<a?6:0);break;case n:r=(a-s)/h+2;break;case a:r=(s-n)/h+4}r*=60}return o<0&&(r+=180,o=Math.abs(o)),r>=360&&(r-=360),[r,100*o,100*l]},toBase:t=>{let[e,i,s]=t;function n(t){let n=(t+e/30)%12,a=i*Math.min(s,1-s);return s-a*Math.max(-1,Math.min(n-3,9-n,1))}return e%=360,e<0&&(e+=360),i/=100,s/=100,[n(0),n(8),n(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,alpha:!0}}});function Oi(t){let[e,i,s]=ne(t,It),n=e+15*i+3*s;return[4*e/n,9*i/n]}let Hi=$t.D65;const ji=216/24389,Ni=24389/27,[Fi,Gi]=Oi({space:It,coords:Hi});var Xi=new Dt({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:Hi,base:It,fromBase(t){let e=[pt(t[0]),pt(t[1]),pt(t[2])],i=e[1],[s,n]=Oi({space:It,coords:e});if(!Number.isFinite(s)||!Number.isFinite(n))return[0,0,0];let a=i<=ji?Ni*i:116*Math.cbrt(i)-16;return[a,13*a*(s-Fi),13*a*(n-Gi)]},toBase(t){let[e,i,s]=t;if(0===e||ut(e))return[0,0,0];i=pt(i),s=pt(s);let n=i/(13*e)+Fi,a=s/(13*e)+Gi,r=e<=8?e/Ni:Math.pow((e+16)/116,3);return[r*(9*n/(4*a)),r,r*((12-3*n-20*a)/(4*a))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <percentage>"]}}}),_i=new Dt({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Xi,fromBase:_t.fromBase,toBase:_t.toBase,formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const Zi=216/24389,Ui=24389/27,Yi=Ai[0][0],Vi=Ai[0][1],qi=Ai[0][2],Wi=Ai[1][0],Ki=Ai[1][1],Ji=Ai[1][2],Qi=Ai[2][0],ts=Ai[2][1],es=Ai[2][2];function is(t,e,i){const s=e/(Math.sin(i)-t*Math.cos(i));return s<0?Infinity:s}function ss(t){const e=Math.pow(t+16,3)/1560896,i=e>Zi?e:t/Ui,s=i*(284517*Yi-94839*qi),n=i*(838422*qi+769860*Vi+731718*Yi),a=i*(632260*qi-126452*Vi),r=i*(284517*Wi-94839*Ji),o=i*(838422*Ji+769860*Ki+731718*Wi),l=i*(632260*Ji-126452*Ki),h=i*(284517*Qi-94839*es),d=i*(838422*es+769860*ts+731718*Qi),c=i*(632260*es-126452*ts);return{r0s:s/a,r0i:n*t/a,r1s:s/(a+126452),r1i:(n-769860)*t/(a+126452),g0s:r/l,g0i:o*t/l,g1s:r/(l+126452),g1i:(o-769860)*t/(l+126452),b0s:h/c,b0i:d*t/c,b1s:h/(c+126452),b1i:(d-769860)*t/(c+126452)}}function ns(t,e){const i=e/360*Math.PI*2,s=is(t.r0s,t.r0i,i),n=is(t.r1s,t.r1i,i),a=is(t.g0s,t.g0i,i),r=is(t.g1s,t.g1i,i),o=is(t.b0s,t.b0i,i),l=is(t.b1s,t.b1i,i);return Math.min(s,n,a,r,o,l)}var as=new Dt({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:_i,gamutSpace:Bi,fromBase(t){let e,[i,s,n]=[pt(t[0]),pt(t[1]),pt(t[2])];if(i>99.9999999)e=0,i=100;else if(i<1e-8)e=0,i=0;else{e=s/ns(ss(i),n)*100}return[n,e,i]},toBase(t){let e,[i,s,n]=[pt(t[0]),pt(t[1]),pt(t[2])];if(n>99.9999999)n=100,e=0;else if(n<1e-8)n=0,e=0;else{e=ns(ss(n),i)/100*s}return[n,e,i]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),rs=new Dt({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:Bi,fromBase(t){let e=Math.max(...t),i=Math.min(...t),[s,n,a]=t,[r,o,l]=[null,0,e],h=e-i;if(0!==h){switch(e){case s:r=(n-a)/h+(n<a?6:0);break;case n:r=(a-s)/h+2;break;case a:r=(s-n)/h+4}r*=60}return l&&(o=h/l),r>=360&&(r-=360),[r,100*o,100*l]},toBase(t){let[e,i,s]=t;function n(t){let n=(t+e/60)%6;return s-s*i*Math.max(0,Math.min(n,4-n,1))}return e%=360,e<0&&(e+=360),i/=100,s/=100,[n(5),n(3),n(1)]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),os=new Dt({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:rs,fromBase(t){let[e,i,s]=t;return[e,s*(100-i)/100,100-s]},toBase(t){let[e,i,s]=t;i/=100,s/=100;let n=i+s;if(n>=1){return[e,0,100*(i/n)]}let a=1-s;return[e,100*(0===a?0:1-i/a),100*a]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const ls=2*Math.PI,hs=[[4.076741636075958,-3.307711539258063,.2309699031821043],[-1.2684379732850315,2.609757349287688,-.341319376002657],[-.0041960761386756,-.7034186179359362,1.7076146940746117]],ds=[[[-1.8817031,-.80936501],[1.19086277,1.76576728,.59662641,.75515197,.56771245]],[[1.8144408,-1.19445267],[.73956515,-.45954404,.08285427,.12541073,-.14503204]],[[.13110758,1.81333971],[1.35733652,-.00915799,-1.1513021,-.50559606,.00692167]]],cs=Number.MAX_VALUE,us=.206,ps=.03,ms=(1+us)/1.03;function bs(t,e){let i=t.length;if(i!==e.length)throw new Error(`Vectors of size ${i} and ${e.length} are not aligned`);let s=0;return t.forEach(((t,i)=>{s+=t*e[i]})),s}function gs(t){return.5*(ms*t-us+Math.sqrt((ms*t-us)*(ms*t-us)+.12*ms*t))}function fs(t){return(t**2+us*t)/(ms*(t+ps))}function xs(t){let[e,i]=t;return[i/e,i/(1-e)]}function ws(t,e){let i=lt(t,te);return i[0]=i[0]**3,i[1]=i[1]**3,i[2]=i[2]**3,lt(i,e,i)}function vs(t,e,i,s){let n=function(t,e,i,s){let n,a,r,o,l,h,d,c;bs(s[0][0],[t,e])>1?([n,a,r,o,l]=s[0][1],[h,d,c]=i[0]):bs(s[1][0],[t,e])>1?([n,a,r,o,l]=s[1][1],[h,d,c]=i[1]):([n,a,r,o,l]=s[2][1],[h,d,c]=i[2]);let u=n+a*t+r*e+o*t**2+l*t*e,p=bs(te[0].slice(1),[t,e]),m=bs(te[1].slice(1),[t,e]),b=bs(te[2].slice(1),[t,e]),g=1+u*p,f=1+u*m,x=1+u*b,w=h*g**3+d*f**3+c*x**3,v=h*(3*p*g**2)+d*(3*m*f**2)+c*(3*b*x**2);return u-=w*v/(v**2-.5*w*(h*(6*p**2*g)+d*(6*m**2*f)+c*(6*b**2*x))),u}(t,e,i,s),a=ws([1,n*t,n*e],i),r=wt(1/Math.max(...a),1/3);return[r,r*n]}function ks(t,e,i){let[s,n,a]=t,r=vs(n,a,e,i),o=function(t,e,i,s,n,a,r,o){let l;if(void 0===o&&(o=vs(t,e,a,r)),(i-n)*o[1]-(o[0]-n)*s<=0)l=o[1]*n/(s*o[0]+o[1]*(n-i));else{l=o[1]*(n-1)/(s*(o[0]-1)+o[1]*(n-i));let r=i-n,h=s,d=bs(te[0].slice(1),[t,e]),c=bs(te[1].slice(1),[t,e]),u=bs(te[2].slice(1),[t,e]),p=r+h*d,m=r+h*c,b=r+h*u,g=n*(1-l)+l*i,f=l*s,x=g+f*d,w=g+f*c,v=g+f*u,k=x**3,y=w**3,C=v**3,z=3*p*x**2,E=3*m*w**2,$=3*b*v**2,S=6*p**2*x,M=6*m**2*w,L=6*b**2*v,A=bs(a[0],[k,y,C])-1,R=bs(a[0],[z,E,$]),P=R/(R*R-.5*A*bs(a[0],[S,M,L])),T=-A*P,D=bs(a[1],[k,y,C])-1,B=bs(a[1],[z,E,$]),I=B/(B*B-.5*D*bs(a[1],[S,M,L])),O=-D*I,H=bs(a[2],[k,y,C])-1,j=bs(a[2],[z,E,$]),N=j/(j*j-.5*H*bs(a[2],[S,M,L])),F=-H*N;T=P>=0?T:cs,O=I>=0?O:cs,F=N>=0?F:cs,l+=Math.min(T,Math.min(O,F))}return l}(n,a,s,1,s,e,i,r),l=xs(r),h=o/Math.min(s*l[0],(1-s)*l[1]),d=function(t,e){return[.11516993+1/(7.4477897+4.1590124*e+t*(1.75198401*e-2.19557347+t*(-2.13704948-10.02301043*e+t*(5.38770819*e-4.24894561+4.69891013*t)))),.11239642+1/(1.6132032-.68124379*e+t*(.40370612+.90148123*e+t*(.6122399*e-.27087943+t*(.00299215-.45399568*e-.14661872*t))))]}(n,a),c=s*d[0],u=(1-s)*d[1],p=.9*h*Math.sqrt(Math.sqrt(1/(1/c**4+1/u**4)));return c=.4*s,u=.8*(1-s),[Math.sqrt(1/(1/c**2+1/u**2)),p,o]}var ys=new Dt({id:"okhsl",name:"Okhsl",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,1],name:"Saturation"},l:{range:[0,1],name:"Lightness"}},base:ee,gamutSpace:"self",fromBase:t=>function(t,e,i){let s=t[0],n=0,a=gs(s),r=Math.sqrt(t[1]**2+t[2]**2),o=.5+Math.atan2(-t[2],-t[1])/ls;if(0!==a&&1!==a&&0!==r){let a,o,l,h,d=t[1]/r,c=t[2]/r,[u,p,m]=ks([s,d,c],e,i),b=.8;r<p?(o=b*u,l=1-o/p,h=r/(o+l*r),n=h*b):(a=p,o=.2*p**2*1.5625/u,l=1-o/(m-p),h=(r-a)/(o+l*(r-a)),n=b+.2*h)}const l=Math.abs(n)<1e-4;return l||0===a||Math.abs(1-a)<1e-7?(o=null,l||(n=0)):o=Xt(360*o),[o,n,a]}(t,hs,ds),toBase:t=>function(t,e,i){let[s,n,a]=t,r=fs(a),o=null,l=null;if(s=Xt(s)/360,0!==r&&1!==r&&0!==n){let t,a,h,d,c=Math.cos(ls*s),u=Math.sin(ls*s),[p,m,b]=ks([r,c,u],e,i),g=.8;n<g?(t=1.25*n,a=0,h=g*p,d=1-h/m):(t=5*(n-.8),a=m,h=.2*m**2*1.5625/p,d=1-h/(b-m));let f=a+t*h/(1-d*t);o=f*c,l=f*u}return[r,o,l]}(t,hs,ds),formats:{color:{id:"--okhsl",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});var Cs=new Dt({id:"okhsv",name:"Okhsv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,1],name:"Saturation"},v:{range:[0,1],name:"Value"}},base:ee,gamutSpace:"self",fromBase:t=>function(t,e,i){let s=t[0],n=0,a=gs(s),r=Math.sqrt(t[1]**2+t[2]**2),o=.5+Math.atan2(-t[2],-t[1])/ls;if(0!==s&&1!==s&&0!==r){let o=t[1]/r,l=t[2]/r,h=vs(o,l,e,i),[d,c]=xs(h),u=.5,p=1-u/d,m=c/(r+s*c),b=m*s,g=m*r,f=fs(b),x=g*f/b,[w,v,k]=ws([f,o*x,l*x],e),y=wt(1/Math.max(Math.max(w,v),Math.max(k,0)),1/3);s/=y,r/=y,r=r*gs(s)/s,s=gs(s),a=s/b,n=(u+c)*g/(c*u+c*p*g)}return o=Math.abs(n)<1e-4||0===a?null:Xt(360*o),[o,n,a]}(t,hs,ds),toBase:t=>function(t,e,i){let[s,n,a]=t;s=Xt(s)/360;let r=fs(a),o=null,l=null;if(0!==r&&0!==n){let t=Math.cos(ls*s),h=Math.sin(ls*s),d=vs(t,h,e,i),[c,u]=xs(d),p=.5,m=1-p/c,b=1-n*p/(p+u-u*m*n),g=n*u*p/(p+u-u*m*n);r=a*b;let f=a*g,x=fs(b),w=g*x/b,v=fs(r);f=f*v/r,r=v;let[k,y,C]=ws([x,t*w,h*w],e),z=wt(1/Math.max(Math.max(k,y),Math.max(C,0)),1/3);r*=z,f*=z,o=f*t,l=f*h}return[r,o,l]}(t,hs,ds),formats:{color:{id:"--okhsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),zs=new Dt({id:"oklch",name:"OkLCh",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:ee,fromBase:_t.fromBase,toBase:_t.toBase,formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <angle>"]}}});var Es=new Si({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M:[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]]}),$s=new Si({id:"p3",cssId:"display-p3",name:"P3",base:Es,fromBase:Bi.fromBase,toBase:Bi.toBase});var Ss=new Si({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:Ot,toXYZ_M:[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],fromXYZ_M:[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]]});const Ms=1/512;var Ls=new Si({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:Ss,toBase:t=>t.map((t=>t<.03125?t/16:t**1.8)),fromBase:t=>t.map((t=>t>=Ms?t**(1/1.8):16*t))});var As=new Si({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],fromXYZ_M:[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]]});const Rs=1.09929682680944,Ps=.018053968510807;var Ts=new Si({id:"rec2020",name:"REC.2020",base:As,toBase:t=>t.map((function(t){return t<4.5*Ps?t/4.5:Math.pow((t+Rs-1)/Rs,1/.45)})),fromBase:t=>t.map((function(t){return t>=Ps?Rs*Math.pow(t,.45)-(Rs-1):4.5*t}))});let{isNaN:Ds}=Number;Dt.register(Li),Dt.register(ri),Dt.register(Ii),Dt.register(as),Dt.register(rs),Dt.register(os),Dt.register(_t),Dt.register(Gt),Dt.register(Cs),Dt.register(ys),Dt.register(ee),Dt.register(zs),Dt.register($s),Dt.register(Ls),Dt.register(Ts),Dt.register(Bi),Dt.register(Ri),Dt.register(Ot),Dt.register(It),Dt.register(de);const Bs=[["primary",["primary",40],["primary",80]],["on-primary",["greyscale",100],["primary",20]],["primary-container",["primary",90],["primary",30]],["on-primary-container",["primary",10],["primary",90]],["primary-inverse",["primary",80],["primary",40]],["primary-fixed",["primary",90],["primary",90]],["primary-fixed-dim",["primary",80],["primary",80]],["on-primary-fixed",["primary",10],["primary",10]],["on-primary-fixed-variant",["primary",30],["primary",30]],["secondary",["secondary",40],["secondary",80]],["on-secondary",["greyscale",100],["secondary",20]],["secondary-container",["secondary",90],["secondary",30]],["on-secondary-container",["secondary",10],["secondary",90]],["secondary-fixed",["secondary",90],["secondary",90]],["secondary-fixed-dim",["secondary",80],["secondary",80]],["on-secondary-fixed",["secondary",10],["secondary",10]],["on-secondary-fixed-variant",["secondary",30],["secondary",30]],["tertiary",["tertiary",40],["tertiary",80]],["on-tertiary",["greyscale",100],["tertiary",20]],["tertiary-container",["tertiary",90],["tertiary",30]],["on-tertiary-container",["tertiary",10],["tertiary",90]],["tertiary-fixed",["tertiary",90],["tertiary",90]],["tertiary-fixed-dim",["tertiary",80],["tertiary",80]],["on-tertiary-fixed",["tertiary",10],["tertiary",10]],["on-tertiary-fixed-variant",["tertiary",30],["tertiary",30]],["error",["error",40],["error",80]],["on-error",["greyscale",100],["error",20]],["error-container",["error",90],["error",30]],["on-error-container",["error",10],["error",90]],["outline",["neutralVariant",50],["neutralVariant",60]],["outline-variant",["neutralVariant",80],["neutralVariant",30]],["background",["neutral",98],["neutral",6]],["on-background",["neutral",10],["neutral",90]],["surface",["neutral",98],["neutral",6]],["on-surface",["neutral",10],["neutral",90]],["surface-variant",["neutralVariant",90],["neutralVariant",30]],["on-surface-variant",["neutralVariant",30],["neutralVariant",80]],["surface-inverse",["neutral",20],["neutral",90]],["on-surface-inverse",["neutral",95],["neutral",20]],["surface-bright",["neutral",98],["neutral",24]],["surface-dim",["neutral",87],["neutral",6]],["surface-container",["neutral",94],["neutral",12]],["surface-container-low",["neutral",96],["neutral",10]],["surface-container-lowest",["greyscale",100],["neutral",4]],["surface-container-high",["neutral",92],["neutral",17]],["surface-container-highest",["neutral",90],["neutral",22]],["scrim",["greyscale",0],["greyscale",0]]];let Is=(t,e="hex",i=3)=>{if(void 0===t.spaceId&&(t.spaceId=t.space.id),"hex"===e||"hex-alt"===e){let i=bi(mi(t,"srgb"),{format:"hex"});return"hex-alt"===e?i.toUpperCase():i}if("hsl"===e||"hsl-alt"===e){let[s,n,a]=mi(t,"hsl").coords,r=t.alpha;if((null===s||Ds(s))&&(s=0),s=yi(s,i),n=yi(n,i),a=yi(a,i),"hsl"===e)return r=yi(100*r,i),100===r?`hsl(${s}deg ${n}% ${a}%)`:`hsl(${s}deg ${n}% ${a}% / ${r}%)`;if("hsl-alt"===e)return r=yi(r,i),1===r?`hsl(${s} ${n}% ${a}%)`:`hsl(${s} ${n}% ${a}% / ${r})`}else if("hwb"===e||"hwb-alt"===e){let[s,n,a]=mi(t,"hwb").coords,r=t.alpha;if((null===s||Ds(s))&&(s=0),s=yi(s,i),n=yi(n,i),a=yi(a,i),"hwb"===e)return r=yi(100*r,i),100===r?`hwb(${s}deg ${n}% ${a}%)`:`hwb(${s}deg ${n}% ${a}% / ${r}%)`;if("hwb-alt"===e)return r=yi(r,i),1===r?`hwb(${s} ${n}% ${a}%)`:`hwb(${s} ${n}% ${a}% / ${r})`}else if("rgb"===e||"rgb-alt"===e){let[s,n,a]=mi(t,"srgb").coords,r=t.alpha;if("rgb"===e)return s=yi(100*s,i),n=yi(100*n,i),a=yi(100*a,i),r=yi(100*r,i),100===r?`rgb(${s}% ${n}% ${a}%)`:`rgb(${s}% ${n}% ${a}% / ${r}%)`;if("rgb-alt"===e)return s=yi(255*s,i),n=yi(255*n,i),a=yi(255*a,i),r=yi(r,i),1===r?`rgb(${s} ${n} ${a})`:`rgb(${s} ${n} ${a} / ${r})`}else if("color"===e||"color-alt"===e)if(["srgb","srgb-linear","a98rgb","prophoto","p3","rec2020","hsl","hwb"].includes(t.spaceId)){"hsl"!==t.spaceId&&"hwb"!==t.spaceId||void 0===(t=mi(t,"srgb")).spaceId&&(t.spaceId=t.space.id);let[s,n,a]=t.coords,r=t.alpha,o=Os(t.spaceId,"css");if("color"===e)return s=yi(100*s,i),n=yi(100*n,i),a=yi(100*a,i),r=yi(100*r,i),100===r?`color(${o} ${s}% ${n}% ${a}%)`:`color(${o} ${s}% ${n}% ${a}% / ${r}%)`;if("color-alt"===e)return s=yi(s,i),n=yi(n,i),a=yi(a,i),r=yi(r,i),1===r?`color(${o} ${s} ${n} ${a})`:`color(${o} ${s} ${n} ${a} / ${r})`}else{if(!["xyz","xyz-d50","xyz-d65"].includes(t.spaceId))throw new Error(`"Color in "${t.spaceId}" space can't be serialized to "${e}" format.`);{let[s,n,a]=t.coords,r=t.alpha,o=t.spaceId;if("color"===e)return s=yi(100*s,i),n=yi(100*n,i),a=yi(100*a,i),r=yi(100*r,i),"xyz"===o&&(o="xyz-d65"),100===r?`color(${o} ${s}% ${n}% ${a}%)`:`color(${o} ${s}% ${n}% ${a}% / ${r}%)`;if("color-alt"===e)return s=yi(s,i),n=yi(n,i),a=yi(a,i),r=yi(r,i),"xyz-d65"===o&&(o="xyz"),1===r?`color(${o} ${s} ${n} ${a})`:`color(${o} ${s} ${n} ${a} / ${r})`}}else if("oklch"===e||"oklch-alt"===e){let[s,n,a]=mi(t,"oklch").coords,r=t.alpha;if("oklch"===e)return s=yi(100*s,i),n=yi(n/.4*100,i),a=yi(a,i),r=yi(100*r,i),100===r?`oklch(${s}% ${n}% ${a}deg)`:`oklch(${s}% ${n}% ${a}deg / ${r}%)`;if("oklch-alt"===e)return s=yi(s,i),n=yi(n,i),a=yi(a,i),r=yi(r,i),1===r?`oklch(${s} ${n} ${a})`:`oklch(${s} ${n} ${a} / ${r})`}else if("oklab"===e||"oklab-alt"===e){let[s,n,a]=mi(t,"oklab").coords,r=t.alpha;if("oklab"===e)return s=yi(100*s,i),n=yi(n/.4*100,i),a=yi(a/.4*100,i),r=yi(100*r,i),100===r?`oklab(${s}% ${n}% ${a}%)`:`oklab(${s}% ${n}% ${a}% / ${r}%)`;if("oklab-alt"===e)return s=yi(s,i),n=yi(n,i),a=yi(a,i),r=yi(r,i),1===r?`oklab(${s} ${n} ${a})`:`oklab(${s} ${n} ${a} / ${r})`}else if("lch"===e||"lch-alt"===e){let[s,n,a]=mi(t,"lch").coords,r=t.alpha;if("lch"===e)return s=yi(s,i),n=yi(n/150*100,i),a=yi(a,i),r=yi(100*r,i),100===r?`lch(${s}% ${n}% ${a}deg)`:`lch(${s}% ${n}% ${a}deg / ${r}%)`;if("lch-alt"===e)return s=yi(s,i),n=yi(n,i),a=yi(a,i),r=yi(r,i),1===r?`lch(${s} ${n} ${a})`:`lch(${s} ${n} ${a} / ${r})`}else{if("lab"!==e&&"lab-alt"!==e)throw new Error(`Unknown color format "${e}".`);{let[s,n,a]=mi(t,"lab").coords,r=t.alpha;if("lab"===e)return s=yi(s,i),n=yi(n/125*100,i),a=yi(a/125*100,i),r=yi(100*r,i),100===r?`lab(${s}% ${n}% ${a}%)`:`lab(${s}% ${n}% ${a}% / ${r}%)`;if("lab-alt"===e)return s=yi(s,i),n=yi(n,i),a=yi(a,i),r=yi(r,i),1===r?`lab(${s} ${n} ${a})`:`lab(${s} ${n} ${a} / ${r})`}}},Os=(t,e="css")=>("css"===e?"p3"===t?t="display-p3":"a98rgb"===t?t="a98-rgb":"prophoto"===t&&(t="prophoto-rgb"):"color.js"===e&&("display-p3"===t?t="p3":"a98-rgb"===t?t="a98rgb":"prophoto-rgb"===t&&(t="prophoto")),"xyz"===t&&(t="xyz-d65"),t),Hs=t=>{try{At(t)}catch(t){return!1}return!0},js=document.createElement("template"),Ns=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=i.join("");js.innerHTML=s;let n=document.importNode(js.content,!0);return 1===n.children.length?n.firstElementChild:n},Fs=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=i.join(""),n=new CSSStyleSheet;return n.replaceSync(s),n},Gs=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=`<svg id="x-stub" xmlns="http://www.w3.org/2000/svg">${i.join("")}</svg>`;js.innerHTML=s;let n=document.importNode(js.content,!0),a=n.querySelector("svg#x-stub");if(1===a.children.length)return a.firstElementChild;for(let t of[...a.childNodes])n.appendChild(t);return a.remove(),n},Xs={},_s=t=>new Promise((async e=>{if(Xs[t])Xs[t].icons?e(Xs[t].icons):Xs[t].callbacks.push(e);else{Xs[t]={callbacks:[e],icons:null};let i=null;try{i=await(await fetch(t)).text()}catch(t){i=null}if(i){Xs[t].icons=Gs`${i}`;for(let e of Xs[t].callbacks)e(Xs[t].icons)}else console.error(`Xel failed to fetch the icons: ${t}`)}}));class Zs{constructor(t){this.value=t}valueOf(){return this.value}}class Us extends Zs{constructor(t="???"){super(t)}toString(t){return`{${this.value}}`}}class Ys extends Zs{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),this.value.toString(10)}}}class Vs extends Zs{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),new Date(this.value).toISOString()}}}function qs(t,e,i){if(i===e)return!0;if(i instanceof Ys&&e instanceof Ys&&i.value===e.value)return!0;if(e instanceof Ys&&"string"==typeof i){if(i===t.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value))return!0}return!1}function Ws(t,e,i){return e[i]?tn(t,e[i].value):(t.reportError(new RangeError("No default")),new Us)}function Ks(t,e){const i=[],s=Object.create(null);for(const n of e)"narg"===n.type?s[n.name]=Js(t,n.value):i.push(Js(t,n));return{positional:i,named:s}}function Js(t,e){switch(e.type){case"str":return e.value;case"num":return new Ys(e.value,{minimumFractionDigits:e.precision});case"var":return function(t,{name:e}){let i;if(t.params){if(!Object.prototype.hasOwnProperty.call(t.params,e))return new Us(`$${e}`);i=t.params[e]}else{if(!t.args||!Object.prototype.hasOwnProperty.call(t.args,e))return t.reportError(new ReferenceError(`Unknown variable: $${e}`)),new Us(`$${e}`);i=t.args[e]}if(i instanceof Zs)return i;switch(typeof i){case"string":return i;case"number":return new Ys(i);case"object":if(i instanceof Date)return new Vs(i.getTime());default:return t.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof i}`)),new Us(`$${e}`)}}(t,e);case"mesg":return function(t,{name:e,attr:i}){const s=t.bundle.p.get(e);if(!s)return t.reportError(new ReferenceError(`Unknown message: ${e}`)),new Us(e);if(i){const n=s.attributes[i];return n?tn(t,n):(t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new Us(`${e}.${i}`))}if(s.value)return tn(t,s.value);return t.reportError(new ReferenceError(`No value: ${e}`)),new Us(e)}(t,e);case"term":return function(t,{name:e,attr:i,args:s}){const n=`-${e}`,a=t.bundle.k.get(n);if(!a)return t.reportError(new ReferenceError(`Unknown term: ${n}`)),new Us(n);if(i){const e=a.attributes[i];if(e){t.params=Ks(t,s).named;const i=tn(t,e);return t.params=null,i}return t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new Us(`${n}.${i}`)}t.params=Ks(t,s).named;const r=tn(t,a.value);return t.params=null,r}(t,e);case"func":return function(t,{name:e,args:i}){let s=t.bundle.$[e];if(!s)return t.reportError(new ReferenceError(`Unknown function: ${e}()`)),new Us(`${e}()`);if("function"!=typeof s)return t.reportError(new TypeError(`Function ${e}() is not callable`)),new Us(`${e}()`);try{let e=Ks(t,i);return s(e.positional,e.named)}catch(i){return t.reportError(i),new Us(`${e}()`)}}(t,e);case"select":return function(t,{selector:e,variants:i,star:s}){let n=Js(t,e);if(n instanceof Us)return Ws(t,i,s);for(const e of i){if(qs(t,n,Js(t,e.key)))return tn(t,e.value)}return Ws(t,i,s)}(t,e);default:return new Us}}function Qs(t,e){if(t.dirty.has(e))return t.reportError(new RangeError("Cyclic reference")),new Us;t.dirty.add(e);const i=[],s=t.bundle.S&&e.length>1;for(const n of e)if("string"!=typeof n){if(t.placeables++,t.placeables>100)throw t.dirty.delete(e),new RangeError(`Too many placeables expanded: ${t.placeables}, max allowed is 100`);s&&i.push("⁨"),i.push(Js(t,n).toString(t)),s&&i.push("⁩")}else i.push(t.bundle.L(n));return t.dirty.delete(e),i.join("")}function tn(t,e){return"string"==typeof e?t.bundle.L(e):Qs(t,e)}class en{constructor(t,e,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=t,this.errors=e,this.args=i}reportError(t){if(!(this.errors&&t instanceof Error))throw t;this.errors.push(t)}memoizeIntlObject(t,e){let i=this.bundle.A.get(t);i||(i={},this.bundle.A.set(t,i));let s=JSON.stringify(e);return i[s]||(i[s]=new t(this.bundle.locales,e)),i[s]}}function sn(t,e){const i=Object.create(null);for(const[s,n]of Object.entries(t))e.includes(s)&&(i[s]=n.valueOf());return i}const nn=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function an(t,e){let i=t[0];if(i instanceof Us)return new Us(`NUMBER(${i.valueOf()})`);if(i instanceof Ys)return new Ys(i.valueOf(),{...i.opts,...sn(e,nn)});if(i instanceof Vs)return new Ys(i.valueOf(),{...sn(e,nn)});throw new TypeError("Invalid argument to NUMBER")}const rn=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function on(t,e){let i=t[0];if(i instanceof Us)return new Us(`DATETIME(${i.valueOf()})`);if(i instanceof Vs)return new Vs(i.valueOf(),{...i.opts,...sn(e,rn)});if(i instanceof Ys)return new Vs(i.valueOf(),{...sn(e,rn)});throw new TypeError("Invalid argument to DATETIME")}const ln=new Map;class hn{constructor(t,{functions:e,useIsolating:i=!0,transform:s=t=>t}={}){this.k=new Map,this.p=new Map,this.locales=Array.isArray(t)?t:[t],this.$={NUMBER:an,DATETIME:on,...e},this.S=i,this.L=s,this.A=function(t){const e=Array.isArray(t)?t.join(" "):t;let i=ln.get(e);return void 0===i&&(i=new Map,ln.set(e,i)),i}(t)}hasMessage(t){return this.p.has(t)}getMessage(t){return this.p.get(t)}addResource(t,{allowOverrides:e=!1}={}){const i=[];for(let s=0;s<t.body.length;s++){let n=t.body[s];if(n.id.startsWith("-")){if(!1===e&&this.k.has(n.id)){i.push(new Error(`Attempt to override an existing term: "${n.id}"`));continue}this.k.set(n.id,n)}else{if(!1===e&&this.p.has(n.id)){i.push(new Error(`Attempt to override an existing message: "${n.id}"`));continue}this.p.set(n.id,n)}}return i}formatPattern(t,e=null,i=null){if("string"==typeof t)return this.L(t);let s=new en(this,i,e);try{return Qs(s,t).toString(s)}catch(t){if(s.errors&&t instanceof Error)return s.errors.push(t),(new Us).toString(s);throw t}}}const dn=/^(-?[a-zA-Z][\w-]*) *= */gm,cn=/\.([a-zA-Z][\w-]*) *= */y,un=/\*?\[/y,pn=/(-?[0-9]+(?:\.([0-9]+))?)/y,mn=/([a-zA-Z][\w-]*)/y,bn=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,gn=/^[A-Z][A-Z0-9_-]*$/,fn=/([^{}\n\r]+)/y,xn=/([^\\"\n\r]*)/y,wn=/\\([\\"])/y,vn=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,kn=/^\n+/,yn=/ +$/,Cn=/ *\r?\n/g,zn=/( *)$/,En=/{\s*/y,$n=/\s*}/y,Sn=/\[\s*/y,Mn=/\s*] */y,Ln=/\s*\(\s*/y,An=/\s*->\s*/y,Rn=/\s*:\s*/y,Pn=/\s*,?\s*/y,Tn=/\s+/y;class Dn{constructor(t){this.body=[],dn.lastIndex=0;let e=0;for(;;){let i=dn.exec(t);if(null===i)break;e=dn.lastIndex;try{this.body.push(o(i[1]))}catch(t){if(t instanceof SyntaxError)continue;throw t}}function i(i){return i.lastIndex=e,i.test(t)}function s(i,s){if(t[e]===i)return e++,!0;if(s)throw new s(`Expected ${i}`);return!1}function n(t,s){if(i(t))return e=t.lastIndex,!0;if(s)throw new s(`Expected ${t.toString()}`);return!1}function a(i){i.lastIndex=e;let s=i.exec(t);if(null===s)throw new SyntaxError(`Expected ${i.toString()}`);return e=i.lastIndex,s}function r(t){return a(t)[1]}function o(t){let e=l(),s=function(){let t=Object.create(null);for(;i(cn);){let e=r(cn),i=l();if(null===i)throw new SyntaxError("Expected attribute value");t[e]=i}return t}();if(null===e&&0===Object.keys(s).length)throw new SyntaxError("Expected message value or attributes");return{id:t,value:e,attributes:s}}function l(){let s;if(i(fn)&&(s=r(fn)),"{"===t[e]||"}"===t[e])return h(s?[s]:[],Infinity);let n=f();return n?s?h([s,n],n.length):(n.value=x(n.value,kn),h([n],n.length)):s?x(s,yn):null}function h(s=[],n){for(;;){if(i(fn)){s.push(r(fn));continue}if("{"===t[e]){s.push(d());continue}if("}"===t[e])throw new SyntaxError("Unbalanced closing brace");let a=f();if(!a)break;s.push(a),n=Math.min(n,a.length)}let a=s.length-1,o=s[a];"string"==typeof o&&(s[a]=x(o,yn));let l=[];for(let t of s)t instanceof Bn&&(t=t.value.slice(0,t.value.length-n)),t&&l.push(t);return l}function d(){n(En,SyntaxError);let t=c();if(n($n))return t;if(n(An)){let e=function(){let t,e=[],n=0;for(;i(un);){s("*")&&(t=n);let i=p(),a=l();if(null===a)throw new SyntaxError("Expected variant value");e[n++]={key:i,value:a}}if(0===n)return null;if(void 0===t)throw new SyntaxError("Expected default variant");return{variants:e,star:t}}();return n($n,SyntaxError),{type:"select",selector:t,...e}}throw new SyntaxError("Unclosed placeable")}function c(){if("{"===t[e])return d();if(i(bn)){let[,i,s,r=null]=a(bn);if("$"===i)return{type:"var",name:s};if(n(Ln)){let a=function(){let i=[];for(;;){switch(t[e]){case")":return e++,i;case void 0:throw new SyntaxError("Unclosed argument list")}i.push(u()),n(Pn)}}();if("-"===i)return{type:"term",name:s,attr:r,args:a};if(gn.test(s))return{type:"func",name:s,args:a};throw new SyntaxError("Function names must be all upper-case")}return"-"===i?{type:"term",name:s,attr:r,args:[]}:{type:"mesg",name:s,attr:r}}return m()}function u(){let t=c();return"mesg"!==t.type?t:n(Rn)?{type:"narg",name:t.name,value:m()}:t}function p(){let t;return n(Sn,SyntaxError),t=i(pn)?b():{type:"str",value:r(mn)},n(Mn,SyntaxError),t}function m(){if(i(pn))return b();if('"'===t[e])return function(){s('"',SyntaxError);let i="";for(;;){if(i+=r(xn),"\\"!==t[e]){if(s('"'))return{type:"str",value:i};throw new SyntaxError("Unclosed string literal")}i+=g()}}();throw new SyntaxError("Invalid expression")}function b(){let[,t,e=""]=a(pn),i=e.length;return{type:"num",value:parseFloat(t),precision:i}}function g(){if(i(wn))return r(wn);if(i(vn)){let[,t,e]=a(vn),i=parseInt(t||e,16);return i<=55295||57344<=i?String.fromCodePoint(i):"�"}throw new SyntaxError("Unknown escape sequence")}function f(){let i=e;switch(n(Tn),t[e]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return w(t.slice(i,e))}return" "===t[e-1]&&w(t.slice(i,e))}function x(t,e){return t.replace(e,"")}function w(t){let e=t.replace(Cn,"\n"),i=zn.exec(t)[1].length;return new Bn(e,i)}}}class Bn{constructor(t,e){this.value=t,this.length=e}}let In,On,Hn=()=>(void 0===On&&(On=navigator.userAgent.indexOf("Firefox/")>-1?"gecko":navigator.userAgent.indexOf("Chrome")>-1?"chromium":navigator.userAgent.indexOf("Safari/")>-1?"webkit":"other"),On),jn=t=>new Promise(((e,i)=>{setTimeout((()=>e()),t)})),Nn=()=>Date.now(),Fn=(t,e=500,i)=>{let s=null,n=null,a=null,r=0,o=()=>{r=new Date,n=null,a=t.apply(i,s)};return(...l)=>{let h=new Date,d=e-(h-r);return s=l,d<=0?(clearTimeout(n),n=null,r=h,a=t.apply(i,s)):n||(n=setTimeout(o,d)),a}};var Gn=new class extends at{get theme(){return this.#e}set theme(t){let e=document.head.querySelector(':scope > meta[name="xel-theme"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-theme"),document.head.append(e)),e.setAttribute("content",t)}get icons(){return[...this.#i]}set icons(t){let e=document.head.querySelector(':scope > meta[name="xel-icons"]');e||(e=document.head.querySelector(':scope > meta[name="xel-iconsets"]'),e&&console.warn('<meta name="xel-iconsets"> has been deprecated. Please use <meta name="xel-icons"> instead.'),e||(e=document.createElement("meta"),e.setAttribute("name","xel-icons"),document.head.append(e))),e.setAttribute("content",t.join(", "))}get locales(){return[...this.#s]}set locales(t){let e=document.head.querySelector(':scope > meta[name="xel-locales"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-locales"),document.head.append(e)),e.setAttribute("content",t.join(", "))}get locale(){return this.#n[0]||"en"}get accentColor(){return this.#a}set accentColor(t){let e=document.head.querySelector(':scope > meta[name="xel-accent-color"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-accent-color"),document.head.append(e)),e.setAttribute("content",t)}get configStorage(){return this.#r}set configStorage(t){this.#r=t}get whenThemeReady(){return new Promise((t=>{null===this.#o?t():this.#o.push(t)}))}get whenIconsReady(){return new Promise((t=>{null===this.#l?t():this.#l.push(t)}))}get whenLocalesReady(){return new Promise((t=>{null===this.#h?t():this.#h.push(t)}))}get themeStyleSheet(){return this.#d}get presetAccentColors(){let t={};for(let e of this.#d.cssRules)if(1===e.type&&":root"===e.selectorText){let i=e.style.getPropertyValue("--preset-accent-colors");if(""!==i){let e=i.split(",").map((t=>t.trim()));for(let i of e){let e=i.substring(0,i.indexOf(" ")),s=i.substring(i.indexOf(" ")+1).trim();t[e]=s}break}}return t}get autocapitalize(){return this.#c}queryIcon(t){t=!1===t.startsWith("#")?"#"+t:t;let e=null;for(let i of this.#u){let s=i.querySelector(t);if(s){e=s;break}}return e}queryMessage(t,e={}){t=t.startsWith("#")?t.substring(1):t;let[i,s]=t.split("."),n=this.#p.getMessage(i),a=null,r=!1,o="text";if(void 0===e.os&&(e.os=(void 0===In&&(In=!0===navigator.platform.startsWith("Mac")?"macos":-1!==["iPhone","iPad","iPod"].indexOf(navigator.platform)?"ios":-1!==["Win32","Win64","Windows","WinCE"].indexOf(navigator.platform)?"windows":/CrOS/.test(navigator.userAgent)?"chromeos":/Android/.test(navigator.userAgent)?"android":/Linux/.test(navigator.platform)?"linux":null),In)),void 0===s&&(s=null),n)if(null===s){if(n.value){if(Array.isArray(n.value))for(let t of n.value)"select"===t.type&&void 0===e[t.selector.name]&&(e[t.selector.name]="unknown");a=this.#p.formatPattern(n.value,e)}}else n.attributes?.[s]&&(a=this.#p.formatPattern(n.attributes[s],e));return null===a?(a=null===s?i:`${i}.${s}`,r=!0):/<|&#?\w+;/.test(a)&&(o="html",a=nt.sanitize(a,{USE_PROFILES:{html:!0}})),{id:i,attribute:s,format:o,content:a,fallback:r}}getConfig(t,e=null){let i=this.#r.getItem(t);return null===i?e:JSON.parse(i)}setConfig(t,e){let i=this.#r.getItem(t);null===e?delete this.#r[t]:this.#r.setItem(t,JSON.stringify(e)),i!==this.#r.getItem(t)&&this.dispatchEvent(new CustomEvent("configchange",{detail:{key:t,value:e,origin:"self"}}))}clearConfig(){if(this.#r.length>0){let t=Object.keys(this.#r);this.#r.clear();for(let e of t)this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:null,origin:"self"}}))}}#e=null;#a=null;#i=[];#s=[];#n=[];#c="none";#d=new CSSStyleSheet;#u=[];#p=null;#r=localStorage;#o=[];#l=[];#h=[];constructor(){super(),document.adoptedStyleSheets=[this.#d];let{theme:t,accentColor:e,icons:i,locales:s}=this.#m();this.#e=t,this.#a=e,this.#i=i,this.#s=s,this.#n=this.#s.map((t=>{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))})),null!==this.#e&&this.#b(this.#e),this.#i.length>0&&this.#g(this.#i),this.#s.length>0&&this.#f(this.#s);new MutationObserver((t=>this.#x(t))).observe(document.head,{attributes:!0,subtree:!0});window.addEventListener("storage",(t=>this.#w(t)))}#x(t){let e=this.#e,i=this.#a,s=this.#i,n=this.#s,{theme:a,accentColor:r,icons:o,locales:l}=this.#m();this.#e=a,this.#a=r,this.#i=o,this.#s=l,this.#n=this.#s.map((t=>{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))})),this.#e!==e&&this.#b(this.#e).then((()=>{this.dispatchEvent(new CustomEvent("themechange"))})),this.#a!==i&&(this.#v(),this.dispatchEvent(new CustomEvent("accentcolorchange"))),!1===rt(this.#i,s,!0)&&this.#g(this.#i).then((()=>{this.dispatchEvent(new CustomEvent("iconschange")),this.dispatchEvent(new CustomEvent("iconsetschange"))})),!1===rt(this.#s,n,!0)&&this.#f(this.#s).then((()=>{this.dispatchEvent(new CustomEvent("localeschange"))}))}#w(t){if(t.storageArea===this.#r){let e=t.key,i=null===t.newValue?null:JSON.parse(t.newValue);this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:i,origin:"other"}}))}}#k(t){return new Promise((async e=>{let i=await fetch(t),s=await i.text();for(let[t,e]of this.#y(s)){let i=await this.#k(t);s=s.replace(e,i)}e(s)}))}#b(t){return new Promise((async e=>{null===this.#o&&(this.#o=[]);let i=await this.#k(t);if(this.#d.replaceSync(i),this.#C(),this.#v(),null!==this.#o){for(let t of this.#o)t();this.#o=null}e()}))}#g(t){return new Promise((async e=>{null===this.#l&&(this.#l=[]),this.#u=[];for(let e of t){let t=await _s(e);this.#u.push(t)}for(let t of this.#l)t();this.#l=null,e()}))}#f(t){return new Promise((async e=>{null===this.#h&&(this.#h=[]);let i=t.map((t=>{if(t.startsWith("blob:")){return t.substring(t.lastIndexOf("#")+1)}{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))}}));0===i.length&&i.push("en");let s=new hn([i[0]],{useIsolating:!1,functions:{RELDATETIME:(t=[],e={})=>{let s;if(t[0]instanceof Ys)s=new Date(t[0].value);else{if("string"!=typeof t[0])throw new TypeError("Invalid argument to RELDATETIME");s=new Date(parseInt(t[0]))}return((t,e=new Date,i=["en"])=>{let s,n=3600,a=86400,r=604800,o=t.getTime(),l=e.getTime(),h=new Intl.RelativeTimeFormat(i,{numeric:"always"}),d=Math.round((l-o)/1e3);if(d<0?(s=1,d=-d):s=-1,d<60)return h.format(d*s,"seconds");if(d<n)return h.format(Math.round(d*s/60),"minutes");if(d<a)return h.format(Math.round(d*s/n),"hours");if(d<r)return h.format(Math.round(d*s/a),"days");if(d<4233600)return h.format(Math.round(d*s/r),"weeks");{let i=12*(t.getFullYear()-e.getFullYear());return i-=e.getMonth(),i+=t.getMonth(),Math.abs(i)>12?i<0?h.format(Math.ceil(i/12),"years"):h.format(Math.floor(i/12),"years"):h.format(i,"months")}})(s,new Date,i)}}});for(let e=t.length-1;e>=0;e-=1){let i=t[e],n=await(await fetch(i)).text(),a=new Dn(n),r=s.addResource(a,{allowOverrides:!0});r.length&&console.info("Found localization syntax errors",r)}this.#p=s,this.#C();for(let t of this.#h)t();this.#h=null,e()}))}#C(){if(this.#p?.locales[0]?.startsWith("en")){let t=getComputedStyle(document.documentElement);this.#c=t.getPropertyValue("--autocapitalize").trim()||"none"}else this.#c="none"}async#v(){await this.whenThemeReady;let t=this.#a||this.presetAccentColors.blue,e=this.presetAccentColors[t]?this.presetAccentColors[t]:t,i="",s=[...this.#d.cssRules].filter((t=>1===t.type&&":root"===t.selectorText));for(let t of s){let e=t.style.getPropertyValue("--theme-id");""!==e&&(i=e)}if(s.at(-1).style.setProperty("--accent-color",i.includes("material")?"var(--material-primary-color)":e),i.includes("material")){let n=((t,e=!1,i=!1)=>{let s=mi(At(t),"hct"),n={};for(let t of Bs){let[a,r]=e?t[2]:t[1],[o,l,h]=s.coords;i&&(a="greyscale"),"primary"===a?(l=Math.max(48,l),h=r):"secondary"===a?(l=16,h=r):"tertiary"===a?(o+=60,l=24,h=r):"neutral"===a?(l=4,h=r):"neutralVariant"===a?(l=8,h=r):"error"===a?(o=25,l=84,h=r):"greyscale"===a&&(o=0,l=0,h=r);let d=mi({space:"hct",coords:[o,l,h]},"oklch");n[`--material-${t[0]}-color`]=bi(d,"oklch")}return n})(e,i.includes("-dark"),"gray"===t);for(let[t,e]of Object.entries(n))s.at(-1).style.setProperty(t,e)}{let t=document.head.querySelector('meta[name="theme-color"]'),e=getComputedStyle(document.documentElement).getPropertyValue("--titlebar-color").trim()||"auto";"auto"===e?t&&t.remove():(null===t&&(t=document.createElement("meta"),t.setAttribute("name","theme-color"),document.head.append(t)),t.setAttribute("content",e))}}#m(){let t=document.head.querySelector(':scope > meta[name="xel-theme"]'),e=document.head.querySelector(':scope > meta[name="xel-accent-color"]'),i=document.head.querySelector(':scope > meta[name="xel-icons"]'),s=document.head.querySelector(':scope > meta[name="xel-locales"]');i||(i=document.head.querySelector(':scope > meta[name="xel-iconsets"]'),i&&console.warn('<meta name="xel-iconsets"> has been deprecated in in Xel 0.27.0. Please use <meta name="xel-icons"> instead.'));let n=null,a=null,r=[],o=[];return t&&""!==t.content&&(n=t.content),e&&""!==e.content&&(a=Hs(e.content)?e.content:"#000"),i&&(r=i.content.split(",").map((t=>t.trim())).filter((t=>""!==t))),s&&(o=s.content.split(",").map((t=>t.trim())).filter((t=>""!==t))),{theme:n,accentColor:a,icons:r,locales:o}}#y(t){let e=[],i=-1;for(;;){let s=t.indexOf("@import",i);if(!(s>-1))break;{let n=t.indexOf(";",s),a=0,r=t.indexOf(".css",s)+4,o=t.indexOf("'",s),l=t.indexOf('"',s);if(o>s&&o<n)a=o+1;else if(l>s&&l<n)a=l+1;else{let e=t.indexOf("url(",s);e>s&&e<n&&(a=e+4)}let h=t.substring(a,r);e.push([h,t.substring(s,n+1)]),i=r}}return e}get iconsets(){return console.warn('"Xel.iconsets" has been deprecated in Xel 0.27.0. Please use "Xel.icons" instead.'),this.icons}set iconsets(t){console.warn('"Xel.iconsets" has been deprecated in Xel 0.27.0. Please use "Xel.icons" instead.'),this.icons=t}get whenIconsetsReady(){return console.warn('"Xel.whenIconsetsReady" has been deprecated in Xel 0.27.0. Please use "Xel.whenIconsReady" instead.'),this.whenIconsReady}};let Xn=(t,e=null)=>{let i=t.split(":"),s=null;if(1===i.length){let[t]=i;s=null===e?document.createElement(t):document.createElement(t,e)}else if(2===i.length){let[t,e]=i;"svg"===t&&(s=document.createElementNS("http://www.w3.org/2000/svg",e))}return s},_n=(t,e)=>{let i=e.getBoundingClientRect();return t.clientX>=i.x&&t.clientX<=i.x+i.width&&t.clientY>=i.y&&t.clientY<=i.y+i.height},Zn=(t,e,i=!0)=>{let s=t.closest(e);return i&&!s&&t.getRootNode().host?Zn(t.getRootNode().host,e):s},Un=t=>{let e=t=>t&&t!==document.body?(t=>{let e=getComputedStyle(t,null);return/(auto|scroll)/.test(e.getPropertyValue("overflow")+e.getPropertyValue("overflow-y")+e.getPropertyValue("overflow-x"))})(t)&&"x-texteditor"!==t.localName?t:e(t.parentElement||t.parentNode.host):document.body;return e(t.parentElement||t.parentNode.host)},Yn=t=>{let e=null,i=[],s=t;for(;s&&""!==s.href.baseVal;){null===e&&(e=t.ownerSVGElement);let n=e.querySelector(s.href.baseVal);if(!n||"linearGradient"!==n.localName&&"radialGradient"!==n.localName||n===t||!1!==i.includes(n))break;i.push(n),s=n}return i},Vn=HTMLDialogElement.prototype.showModal,qn=HTMLDialogElement.prototype.close,Wn=[],Kn={get open(){return this.hasAttribute("open")},showModal(){return new Promise((async t=>{if(!0!==this.open&&!1!==this.isConnected){this.R&&await this.R.finished,this.P&&await this.P.finished,Vn.apply(this,arguments);{let t,e={html:document.documentElement.style.overflow,body:document.body.style.overflow};document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",Wn.push(this),this.addEventListener("close",t=i=>{i.target===this&&(this.removeEventListener("close",t),Wn=Wn.filter((t=>t!==this)),0===Wn.length&&(document.documentElement.style.overflow=e.html,document.body.style.overflow=e.body))})}{let t=this.querySelector("[autofocus]");t?t.focus():this.focus()}if(!1===this.hasAttribute("hidden")){let t=getComputedStyle(this),e=1e3*parseFloat(t.getPropertyValue("transition-duration")||"0s"),i=t.getPropertyValue("transition-timing-function"),s=t.getPropertyValue("--transition-type")||"stretch";this.R=this.animate({transform:"grow"===s?["scale(0.9)","scale(1)"]:["scaleY(0)","scaleY(1)"],opacity:["0","1"]},{duration:e,easing:i})}{let t,e,i;this.addEventListener("keydown",t=t=>{"Escape"===t.code&&t.preventDefault()}),document.addEventListener("keydown",e=t=>{"Escape"===t.code&&t.target===document.body&&t.preventDefault()}),this.addEventListener("close",i=s=>{s.target===this&&(this.removeEventListener("close",i),this.removeEventListener("keydown",t),document.removeEventListener("keydown",e))})}{let t,e,i,s=!0;this.addEventListener("pointerdown",t=t=>{s=!1===_n(t,this)}),this.addEventListener("click",e=t=>{t.target===this&&!0===t.isTrusted&&!1===t.defaultPrevented&&!0===s&&!1===_n(t,this)&&!0===this.hasAttribute("open")&&(this.close(),this.dispatchEvent(new CustomEvent("userclose")))}),this.addEventListener("close",i=s=>{s.target===this&&(this.removeEventListener("pointerdown",t),this.removeEventListener("click",e),this.removeEventListener("close",i))})}this.R&&(await this.R.finished,this.R=null),t()}else t()}))},close(){return new Promise((async t=>{if(this.R&&await this.R.finished,this.P&&await this.P.finished,!1===this.hasAttribute("hidden")){let t=getComputedStyle(this),e=1e3*parseFloat(t.getPropertyValue("transition-duration")||"0s"),i=t.getPropertyValue("transition-timing-function")||"ease",s=t.getPropertyValue("--transition-type")||"stretch";this.P=this.animate({transform:"grow"===s?["scale(1)","scale(0.9)"]:["scaleY(1)","scaleY(0)"],opacity:["1","0"]},{duration:e,easing:i})}this.P&&(await this.P.finished,this.P=null),this.hasAttribute("open")&&qn.apply(this,arguments),t()}))}};for(let[t,e]of Object.entries(Object.getOwnPropertyDescriptors(Kn)))Object.defineProperty(HTMLDialogElement.prototype,t,e);class Jn extends HTMLElement{static#z=Ns`<template><div id="main"><div id="arrow" part="arrow" tabindex="1"><svg id="arrow-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg></div><slot></slot></div></template>`;static#E=Fs`:host{display:block;width:100%;margin:10px 0;box-sizing:border-box}:host([disabled]){pointer-events:none;opacity:0.5}:host([animating]){overflow:hidden}#main{position:relative;width:100%;height:100%}#arrow{position:absolute;top:0;display:flex;align-items:center;justify-content:flex-start;pointer-events:none;transform:translateY(-50%);--path-data: M 26 20 L 26 80 L 74 50 Z;}:host([animating]) #arrow{outline:none!important}#arrow-svg{display:flex;width:16px;height:16px;transform:rotate(0deg);color:currentColor}#arrow-svg:focus{background:transparent;outline:none}:host([expanded]) #arrow-svg{transform:rotate(90deg)}#arrow-path{fill:currentColor}
`;get expanded(){return this.hasAttribute("expanded")}set expanded(t){t?this.setAttribute("expanded",""):this.removeAttribute("expanded")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#S=null;#M=null;#L=null;#A=[];#R=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Jn.#E],this.#$.append(document.importNode(Jn.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#P(t))),this["#arrow"].addEventListener("keydown",(t=>this.#T(t)))}async connectedCallback(){await Gn.whenThemeReady,this.#M=new ResizeObserver((()=>this.#D())),this.#L=new MutationObserver((t=>this.#B(t))),this.#L.observe(this,{childList:!0}),Gn.addEventListener("themechange",this.#R=()=>this.#I()),this.#I(),this.#O(),this.#B()}disconnectedCallback(){Gn.removeEventListener("themechange",this.#R),this.#S&&(this.#M.unobserve(this.#S),this.#S=null),this.#M.disconnect(),this.#L.disconnect()}expand(t=!0){return new Promise((async e=>{if(!1===this.expanded)if(!1===t)this.#H(),this.removeAttribute("animating"),this.expanded=!0;else if(!0===t){let t=this.getBoundingClientRect();this.#H(),this.removeAttribute("animating"),this.expanded=!0;let e=this.getBoundingClientRect();this.setAttribute("animating","");let i=[this.animate({height:[`${t.height}px`,`${e.height}px`]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"}),this["#arrow-svg"].animate({transform:["rotate(0deg)","rotate(90deg)"]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})];this.#A=i,await Promise.all(i.map((t=>t.finished))),this.#A===i&&(this.#A=[],this.removeAttribute("animating"))}e()}))}collapse(t=!0){return new Promise((async e=>{if(!0===this.expanded)if(!1===t)this.#H(),this.removeAttribute("animating"),this.expanded=!1;else if(!0===t){let t=this.getBoundingClientRect();this.#H(),this.removeAttribute("animating"),this.expanded=!1;let e=this.getBoundingClientRect();this.setAttribute("animating","");let i=[this.animate({height:[`${t.height}px`,`${e.height}px`]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"}),this["#arrow-svg"].animate({transform:["rotate(90deg)","rotate(0deg)"]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})];this.#A=i,await Promise.all(i.map((t=>t.finished))),this.#A===i&&(this.#A=[],this.removeAttribute("animating"))}e()}))}#H(){this.#A.length>0&&(this.#A.map((t=>t.finish())),this.#A=[])}#O(){let t=this.querySelector(":scope > header");t?this["#arrow"].style.top=t.getBoundingClientRect().height/2+"px":this["#arrow"].style.height=null}#I(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#B(){let t=this.querySelector(":scope > header");t!==this.#S&&(null===t?(this.#M.unobserve(this.#S),this.#S=null):(this.#S=t,this.#M.observe(this.#S)))}#D(){this.#O()}#T(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||this.querySelector("header").click()}#P(t){let e=this.querySelector("header"),i=t.target.closest("[tabindex]");e.contains(t.target)&&!1===this.contains(i)&&(this.expanded?(this.collapse(),this.dispatchEvent(new CustomEvent("collapse"))):(this.expand(),this.dispatchEvent(new CustomEvent("expand"))))}}customElements.define("x-accordion",Jn);class Qn extends HTMLElement{static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:block flex;width:40px;height:40px;box-sizing:border-box;align-items:center;justify-content:center;overflow:hidden;border-width:1px;border-style:solid;user-select:none;-webkit-user-select:none}:host([hidden]){display:none}
`;get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Qn.#E],this.#$.append(document.importNode(Qn.#z.content,!0))}}customElements.define("x-avatar",Qn);class ta extends HTMLElement{static#E=Fs`:host{display:block;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;touch-action:none;cursor:default;background:rgba(0, 0, 0, 0.5)}:host([hidden]){display:none}
`;get ownerElement(){return this.#j?this.#j:document.body.firstElementChild}set ownerElement(t){this.#j=t}#$=null;#j=null;#N=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ta.#E],this.addEventListener("pointerdown",(t=>t.preventDefault()))}connectedCallback(){this.addEventListener("wheel",this.#N=t=>t.preventDefault())}disconnectedCallback(){this.removeEventListener("wheel",this.#N)}show(t=!0){this.title="",this.style.top="0px",this.style.left="0px",this.ownerElement.before(this),this.hidden=!1;let e=this.getBoundingClientRect(),i=0,s=0;0===e.top&&0===e.left||(i=-e.top,s=-e.left);{let t=parseFloat(getComputedStyle(this.ownerElement).zIndex);this.style.zIndex=t-1}if(this.style.top=i+"px",this.style.left=s+"px",t){return this.animate({opacity:["0","1"]},{duration:100,easing:"ease-out"}).finished}}hide(t=!0){if(t){let t=this.animate({opacity:["1","0"]},{duration:100,easing:"ease-in"});return t.finished.then((()=>{this.remove()})),t.finished}this.remove()}}customElements.define("x-backdrop",ta);class ea extends HTMLElement{static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:flex;box-sizing:border-box;align-items:center;justify-content:flex-start}:host([vertical]){flex-flow:column;align-items:flex-start;justify-content:center}:host([hidden]){display:none}
`;get vertical(){return this.hasAttribute("vertical")}set vertical(t){t?this.setAttribute("vertical",""):this.removeAttribute("vertical")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ea.#E],this.#$.append(document.importNode(ea.#z.content,!0))}}customElements.define("x-box",ea);class ia extends HTMLElement{static observedAttributes=["disabled","skin"];static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:flex;align-items:center;justify-content:center;width:fit-content;height:fit-content;min-height:32px;padding:2px 14px;box-sizing:border-box;opacity:1;position:relative}:host(:focus){outline:none}:host(:focus:not(:active)){z-index:1}:host([mixed]){opacity:0.75}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get togglable(){return this.hasAttribute("togglable")}set togglable(t){t?this.setAttribute("togglable",""):this.removeAttribute("togglable")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get condensed(){return this.hasAttribute("condensed")}set condensed(t){t?this.setAttribute("condensed",""):this.removeAttribute("condensed")}get skin(){return this.hasAttribute("skin")?this.getAttribute("skin"):"normal"}set skin(t){this.setAttribute("skin",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:"normal"}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get expanded(){return this.hasAttribute("expanded")}get expandable(){return this.#F()||this.#G()}get ownerButtons(){if(this.parentElement){if("x-buttons"===this.parentElement?.localName)return this.parentElement;if(["a","x-box"].includes(this.parentElement.localName)&&this.parentElement.parentElement&&"x-buttons"===this.parentElement.parentElement.localName)return this.parentElement.parentElement}return null}#$=null;#X=!1;#_=!1;#Z=null;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ia.#E],this.#$.append(document.importNode(ia.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#q())),this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("keydown",(t=>this.#W(t))),this.addEventListener("close",(t=>this.#K(t))),(async()=>{await customElements.whenDefined("x-backdrop"),this["#backdrop"]=Xn("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)"})()}connectedCallback(){this.parentElement&&"a"===this.parentElement.localName&&-1!==this.parentElement.tabIndex&&(this.parentElement.tabIndex=-1),this.#J(),this.#Q()}disconnectedCallback(){this.#_=!1}attributeChangedCallback(t,e,i){e!==i&&!1!==this.isConnected&&("disabled"===t?this.#J():"skin"===t&&this.#Q())}expand(){return new Promise((async t=>{this.#F()?await this.#tt():this.#G()&&await this.#et(),t()}))}collapse(t=null){return new Promise((async e=>{this.#it()?await this.#st(t):this.#nt()&&await this.#at(t),e()}))}#tt(){return new Promise((async t=>{if(this.#F()){let t=this.querySelector(":scope > x-menu"),e=this.querySelector(":scope > x-tooltip");e&&e.close(!1),this.#X=this.matches(":focus"),this.setAttribute("expanded",""),this["#backdrop"].ownerElement=t,this["#backdrop"].show(!1),await t.openNextToElement(this,"vertical",3),t.focus()}t()}))}#st(t=null){return new Promise((async e=>{if(this.#it()){let e=this.querySelector(":scope > x-menu");if(e.setAttribute("closing",""),await t,e.close(),this["#backdrop"].hide(!1),this.removeAttribute("expanded"),"chromium"===Hn()&&this.replaceWith(this),this.#X)this.focus();else{let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}e.removeAttribute("closing")}e()}))}#F(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-menu");if(e&&!1===e.hasAttribute("opened")&&!1===e.hasAttribute("closing")){null!==e.querySelector("x-menuitem")&&(t=!0)}}return t}#it(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-menu");e&&e.opened&&(t=!0)}return t}#et(){return new Promise((async t=>{if(this.#G()){let t=this.querySelector(":scope > x-popover"),e=this.querySelector(":scope > x-tooltip");e&&e.close(!1),this.#X=this.matches(":focus"),this.setAttribute("expanded",""),await t.open(this)}t()}))}#at(t=null){return new Promise((async e=>{if(this.#nt()){let e=this.querySelector(":scope > x-popover");if(e.setAttribute("closing",""),await t,await e.close(),this.removeAttribute("expanded"),e.modal&&"chromium"===Hn()&&this.replaceWith(this),this.#X)this.focus();else{let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}e.removeAttribute("closing")}e()}))}#G(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-popover");e&&!1===e.hasAttribute("opened")&&(t=!0)}return t}#nt(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-popover");e&&e.opened&&(t=!0)}return t}#rt(){return new Promise((t=>{if(this.#ot()){this.querySelector(":scope > dialog").showModal()}t()}))}#ot(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > dialog");e&&!1===e.hasAttribute("open")&&!1===e.hasAttribute("closing")&&(t=!0)}return t}#lt(){return new Promise((t=>{if(this.#ht()){this.querySelector(":scope > x-drawer").open()}t()}))}#ht(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-drawer");e&&!1===e.matches(":popover-open")&&!1===e.hasAttribute("closing")&&(t=!0)}return t}#dt(){return new Promise((t=>{if(this.#ct()){this.querySelector(":scope > x-notification").opened=!0}t()}))}#ct(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-notification");!e||e.hasAttribute("opened")||e.hasAttribute("closing")||(t=!0)}return t}#J(){this.setAttribute("role","button"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#Q(){!1===this.hasAttribute("skin")&&this.setAttribute("skin","normal")}#Y(t){let e=this.querySelector(":scope > x-menu[opened]"),i=this.querySelector(":scope > x-popover[opened]"),s=this.querySelector(":scope > dialog[open]"),n=this.querySelector(":scope > x-drawer[open]"),a=this.querySelector(":scope > x-notification[opened]");if(this.#Z=t,t.target===this["#backdrop"])this.#ut(t);else{if(e&&e.contains(t.target))return;if(i&&i.contains(t.target))return;if(s&&s.contains(t.target))return;if(n&&n.contains(t.target))return;if(a&&a.contains(t.target))return;this.#pt(t)}}#K(t){t.target.parentElement===this&&["x-menu","x-popover"].includes(t.target.localName)&&this.#Z&&!1===_n(this.#Z,this)&&(this.#_=!1)}#V(){let t=this.querySelector(":scope > x-tooltip");if(t&&!1===t.disabled&&!1===this.expanded&&!1===this.#_){if(this.parentElement&&"x-buttons"===this.parentElement.localName)for(let t of this.parentElement.children)if(t!==this&&"x-button"===t.localName){let e=t.querySelector(":scope > x-tooltip");e&&e.close(!1)}t.open(this)}}#q(){let t=this.querySelector(":scope > x-tooltip");t&&t.close(),this.#_=!1}#P(t){let e=this.querySelector(":scope > x-menu[opened]"),i=this.querySelector(":scope > x-popover[opened]"),s=this.querySelector(":scope > dialog[open]"),n=this.querySelector(":scope > x-drawer[open]"),a=this.querySelector(":scope > x-notification[opened]");if(t.target!==this["#backdrop"])if(e&&e.contains(t.target))!1===e.hasAttribute("closing")&&t.target.closest("x-menuitem")&&this.#mt(t);else{if(i&&i.contains(t.target))return;if(s&&s.contains(t.target))return;if(n&&n.contains(t.target))return;if(a&&a.contains(t.target))return;this.#_=!0,this.#bt(t)}}#ut(t){this.collapse()}async#pt(t){if(t.buttons>1)t.preventDefault();else if(this.querySelector(":scope > dialog[open], :scope > x-drawer[open]"))t.preventDefault();else if(!1!==this.contains(t.target)){if(this.setPointerCapture(t.pointerId),t.preventDefault(),!1===this.matches(":focus")){let t,e=Zn(this.parentNode,"*[tabindex]:not(a)");this.addEventListener("pointerup",t=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),e?e.focus():(this.focus(),this.blur())}),this.addEventListener("pointercancel",t)}if(!1===this.#F()&&!1===this.#G()&&!1===this.#nt()){let t,e=Date.now(),i=!0,s=parseInt(getComputedStyle(this).getPropertyValue("--min-pressed-time")||"150ms");this.addEventListener("pointerup",t=async()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),i=!1;let n=Date.now()-e;n<s&&await jn(s-n),this.removeAttribute("pressed")}),this.addEventListener("pointercancel",t),(async()=>{if(this.ownerButtons)if(0===this.ownerButtons.tracking||2===this.ownerButtons.tracking)await jn(10);else if(1!==this.ownerButtons.tracking||!1!==this.toggled&&!this.mixed){if(3===this.ownerButtons.tracking){let t=[...this.ownerButtons.querySelectorAll(":scope > x-button, :scope > x-box > x-button")].filter((t=>t.toggled));(!1===this.toggled||t.length>1)&&await jn(10)}}else await jn(10);else this.togglable&&await jn(10);i&&this.setAttribute("pressed","")})()}this.#F()?"touch"!==t.pointerType&&this.#tt():this.#G()?"touch"!==t.pointerType&&this.#et():this.#nt()&&this.#at()}}async#bt(t){let e=this.querySelector(":scope > x-menu, :scope > x-popover");if(e){if(e.hasAttribute("closing"))return;e.focus()}!1===this.#nt()&&(this.#ot()?this.#rt():this.#ht()?this.#lt():this.#ct()&&this.#dt()),this.#Z&&"touch"===this.#Z.pointerType&&(this.#F()?this.#tt():this.#G()&&this.#et()),this.togglable&&!1===t.defaultPrevented&&(this.removeAttribute("pressed"),this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle")))}#mt(t){let e=t.target.closest("x-menuitem");this.querySelector(":scope > x-menu").hasAttribute("closing")||this.collapse(e.whenTriggerEnd)}#W(t){!1===t.defaultPrevented&&("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code?this.#F()?(t.preventDefault(),this.#tt().then((()=>this.querySelector(":scope > x-menu").focusFirstMenuItem()))):this.#G()?(t.preventDefault(),this.#et()):this.#ot()?(t.preventDefault(),this.#rt()):this.#ht()?(t.preventDefault(),this.#lt()):this.#ct()?(t.preventDefault(),this.#dt()):this.matches(":focus")&&(this.#nt()?this.#at():this.#it()?this.#st():(t.preventDefault(),this.click())):"ArrowDown"===t.code?this.#F()?(this.querySelector(":scope > x-menu"),t.preventDefault(),this.#tt().then((()=>this.querySelector(":scope > x-menu").focusFirstMenuItem()))):this.#G()?(t.preventDefault(),this.#et()):(t.preventDefault(),this.click()):"ArrowUp"===t.code?this.#F()?(t.preventDefault(),this.#tt().then((()=>this.querySelector(":scope > x-menu").focusLastMenuItem()))):this.#G()?(t.preventDefault(),this.#et()):(t.preventDefault(),this.click()):"Escape"===t.code&&(this.#it()||this.#nt())&&(t.preventDefault(),this.collapse()))}}customElements.define("x-button",ia);let{isArray:sa}=Array;class na extends HTMLElement{static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:flex;flex-flow:row;align-items:center;justify-content:flex-start;box-sizing:border-box;width:fit-content}:host([hidden]){display:none}
`;get tracking(){return this.hasAttribute("tracking")?parseInt(this.getAttribute("tracking")):-1}set tracking(t){this.setAttribute("tracking",t)}get vertical(){return this.hasAttribute("vertical")}set vertical(t){!0===t?this.setAttribute("vertical",""):this.removeAttribute("vertical")}get value(){if(2===this.tracking||3===this.tracking){return this.#gt().filter((t=>t.toggled)).map((t=>t.value)).filter((t=>null!=t))}if(1===this.tracking||0===this.tracking){let t=this.#gt().find((t=>t.toggled));return t&&void 0!==t.value?t.value:null}if(-1===this.tracking)return null}set value(t){if(2===this.tracking||3===this.tracking){let e=this.#gt();if(sa(t))for(let i of e)i.toggled=t.includes(i.value);else for(let i of e)i.toggled=i.value===t}else if(1===this.tracking||0===this.tracking){let e=this.#gt(),i=e.find((e=>e.value===t));for(let t of e)t.toggled=t===i}}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[na.#E],this.#$.append(document.importNode(na.#z.content,!0)),this.addEventListener("click",(t=>this.#P(t)),!0),this.addEventListener("keydown",(t=>this.#W(t)))}connectedCallback(){for(let t of this.children)if("x-button"===t.localName){"none"!==getComputedStyle(t).boxShadow?this.setAttribute("hasboxshadow",""):this.removeAttribute("hasboxshadow");break}}#gt(){return[...this.querySelectorAll(":scope > x-button, :scope > x-box > x-button")]}#P(t){if(t.buttons>1)return;let e=t.target.closest("x-button");if(e&&!1===e.disabled&&!1===e.expandable){let t=this.#gt().filter((t=>t!==e));if(0===this.tracking){e.mixed||(e.toggled=!e.toggled),e.mixed=!1;for(let e of t)e.toggled=!1,e.mixed=!1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}else if(1===this.tracking){if(!1===e.toggled||!0===e.mixed){e.toggled=!0,e.mixed=!1;for(let e of t)e.toggled=!1,e.mixed=!1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}}else if(2===this.tracking)e.mixed?e.mixed=!1:e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}));else if(3===this.tracking){let i=t.filter((t=>!0===t.toggled));(!1===e.toggled||i.length>0)&&(e.mixed?e.mixed=!1:e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e})))}}}#W(t){if("ArrowRight"===t.code){let t=[...this.children].find((t=>t.matches(":focus")));t&&(t.nextElementSibling?t.nextElementSibling.focus():t!==t.parentElement.firstElementChild&&t.parentElement.firstElementChild.focus())}else if("ArrowLeft"===t.code){let t=[...this.children].find((t=>t.matches(":focus")));t&&(t.previousElementSibling?t.previousElementSibling.focus():t!==t.parentElement.lastElementChild&&t.parentElement.lastElementChild.focus())}}}customElements.define("x-buttons",na);class aa extends HTMLElement{static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:block;width:100%;min-width:20px;min-height:48px;box-sizing:border-box;margin:30px 0;padding:16px 20px}:host([hidden]){display:none}slot{border-radius:inherit}
`;#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[aa.#E],this.#$.append(document.importNode(aa.#z.content,!0))}}customElements.define("x-card",aa);class ra extends HTMLElement{static observedAttributes=["toggled","mixed","disabled"];static#z=Ns`<template><div id="main"><div id="indicator" part="indicator"><svg id="checkmark" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="checkmark-path"></path></svg></div><div id="description"><slot></slot></div></div></template>`;static#E=Fs`:host{display:block;width:fit-content}:host([disabled]){opacity:0.4;pointer-events:none}:host([hidden]){display:none}:host(:focus){outline:none}#main{display:flex;align-items:center}#indicator{position:relative;width:19px;height:19px;box-sizing:border-box;border:2px solid currentColor;overflow:hidden;--path-data: M 95 23 L 86 13 L 37 66 L 13.6 41 L 4.5 51 L 37 85 L 95 23 Z;}:host([mixed]) #indicator{--path-data: M 87 42.6 L 13 42.6 L 13 57.4 L 87 57.4 L 87 42.6 Z;}#checkmark{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;overflow:visible;transition-property:opacity;transition-timing-function:inherit;transition-duration:inherit}:host([mixed]) #checkmark{opacity:1}:host([toggled]) #checkmark{opacity:1}#checkmark-path{fill:currentColor}#description{flex:1}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;#R=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ra.#E],this.#$.append(document.importNode(ra.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#q())),this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("keydown",(t=>this.#W(t)))}async connectedCallback(){Gn.addEventListener("themechange",this.#R=()=>this.#ft()),this.#J(),"webkit"===Hn()&&(await jn(10),!1===this.isConnected)||Gn.whenThemeReady.then((()=>{this.#ft()}))}disconnectedCallback(){Gn.removeEventListener("themechange",this.#R)}attributeChangedCallback(t,e,i){e!==i&&("toggled"===t?this.#xt():"mixed"===t?this.#wt():"disabled"===t&&this.#vt())}#ft(){let t=getComputedStyle(this["#indicator"]).getPropertyValue("--path-data");this["#checkmark-path"].setAttribute("d",t)}#J(){this.setAttribute("role","checkbox"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#xt(){this.#ft(),this.setAttribute("aria-toggled",this.mixed?"mixed":this.toggled)}#wt(){this.#ft()}#vt(){this.#J()}#Y(t){if(t.buttons>1)t.preventDefault();else if(!1===this.matches(":focus")){t.preventDefault();let e=Zn(this.parentNode,"[tabindex]");e&&e.focus()}}#V(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#q(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}async#P(t){this.mixed?this.mixed=!1:this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0}))}#W(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-checkbox",ra);class oa extends HTMLElement{static observedAttributes=["value","space","disabled"];static#z=Ns`<template><div id="main"><slot></slot><input id="input" type="text" spellcheck="false" autocomplete="false" part="input"><div id="arrow-container"><svg id="arrow" width="10" height="10" viewBox="0 0 100 100" preserveAspectRatio="none" part="arrow"><path id="arrow-path"></path></svg></div><slot></slot></div></template>`;static#E=Fs`:host{display:block;position:relative;max-width:160px;height:32px;padding:0 2px 0 8px;box-sizing:border-box;font-size:0.875rem}:host([size="small"]){height:24px;padding:0 2px 0 6px;font-size:0.8rem}:host([size="large"]){height:38px}:host(:focus){z-index:10}:host([mixed]){color:rgba(0, 0, 0, 0.7)}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}#main{display:flex;align-items:center;width:100%;height:100%}#input{width:100%;padding:0;box-sizing:border-box;color:inherit;background:none;border:none;outline:none;font-family:inherit;font-size:inherit;font-weight:inherit;text-align:inherit;text-overflow:ellipsis}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}:host(:not(:focus)) ::selection{color:inherit;background:transparent}#arrow-container{display:flex;align-items:center;justify-content:center;height:100%;margin-left:4px;min-width:fit-content}#arrow{display:block;box-sizing:border-box;width:auto;min-width:fit-content;height:calc(100% - 4px);color:currentColor;cursor:default;--text-color: 50%;--path-data: M 25 41 L 50 16 L 75 41 L 83 34 L 50 1 L 17 34 Z M 17 66 L 50 100 L 83 66 L 75 59 L 50 84 L 25 59 Z;}:host([size="small"]) #arrow{padding:2px 2px}:host([size="large"]) #arrow{padding:0px 1px}#arrow path{fill:currentColor}
`;get value(){return this.#kt}set value(t){t=Is(mi(At(t),this.space),this.#yt),this.#kt===t||this.matches(":focus")||(this.#kt=t,this.isConnected&&(this.#Ct(),this.#zt(),this.#Et&&this.reportValidity()))}get space(){return this.hasAttribute("space")?this.getAttribute("space"):"srgb"}set space(t){this.setAttribute("space",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#kt="#000000";#yt="hex";#$=null;#U=0;#Et=null;#X=!1;#$t;#St;#Mt;#Lt;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,oa.#E],this.#$.append(document.importNode(oa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#format-menu"]=Xn("x-menu"),this["#backdrop"]=Xn("x-backdrop"),this["#backdrop"].style.opacity="0",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>this.#At(t))),this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#q())),this.addEventListener("focusin",(t=>this.#Rt(t))),this.addEventListener("focusout",(t=>this.#Pt(t))),this.addEventListener("keydown",(t=>this.#W(t))),this["#input"].addEventListener("input",(t=>this.#Tt(t))),this["#input"].addEventListener("blur",(t=>this.#Dt(t))),this["#input"].addEventListener("search",(t=>this.#Bt(t))),this["#input"].addEventListener("pointerdown",(t=>this.#It(t))),this["#input"].addEventListener("contextmenu",(()=>this.#Ot())),this["#arrow"].addEventListener("pointerdown",(t=>this.#Ht(t))),this["#arrow"].addEventListener("click",(t=>this.#jt(t))),this["#format-menu"].addEventListener("toggle",(t=>this.#Nt(t))),this["#format-menu"].addEventListener("click",(t=>this.#Ft(t)))}connectedCallback(){this.#yt=Gn.getConfig(`x-colorinput:${this.space}Format`,this.#Gt(this.space)),this.#Xt(),this.#Et&&this.reportValidity(),Gn.addEventListener("configchange",this.#$t=t=>this.#_t(t)),Gn.addEventListener("themechange",this.#St=()=>this.#I())}disconnectedCallback(){Gn.removeEventListener("configchange",this.#$t),Gn.removeEventListener("themechange",this.#St)}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Zt():"space"===t?this.#Ut():"disabled"===t&&this.#vt())}selectAll(){this["#input"].select()}clear(){this.value="",this.#Et=null,this.#Yt()}reportValidity(){let t=this["#input"].value;return this.required&&0===t.length?this.#Et={href:"#required-field"}:!1===Hs(t)&&!1===Hs("#"+t)?this.#Et={href:"#invalid-color"}:this.#Et=null,this.#Yt(),null===this.#Et}async#Vt(){if(!1===this.#qt())return;let t=this["#format-menu"];window.addEventListener("resize",this.#Mt=()=>this.#Wt()),window.addEventListener("blur",this.#Lt=()=>this.#Wt());{let e=At(this.value);e.spaceId!==this.space&&(e=mi(e,this.space),void 0===e.spaceId&&(e.spaceId=e.space.id)),["srgb","hwb","hsl"].includes(e.spaceId)?t.innerHTML=`\n          <x-menuitem value="hex">\n            <x-label>${Is(e,"hex")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hex-alt">\n            <x-label>${Is(e,"hex").toUpperCase()}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="color">\n            <x-label>${Is(e,"color")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="color-alt">\n            <x-label>${Is(e,"color-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="rgb">\n            <x-label>${Is(e,"rgb")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="rgb-alt">\n            <x-label>${Is(e,"rgb-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="hsl">\n            <x-label>${Is(e,"hsl")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hsl-alt">\n            <x-label>${Is(e,"hsl-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="hwb">\n            <x-label>${Is(e,"hwb")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hwb-alt">\n            <x-label>${Is(e,"hwb-alt")}</x-label>\n          </x-menuitem>\n        `:["srgb-linear","p3","rec2020","prophoto","a98rgb","xyz","xyz-d65","xyz-d50"].includes(e.spaceId)?t.innerHTML=`\n          <x-menuitem value="color">\n            <x-label>${Is(e,"color")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="color-alt">\n            <x-label>${Is(e,"color-alt")}</x-label>\n          </x-menuitem>\n        `:"oklch"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="oklch">\n            <x-label>${Is(e,"oklch")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="oklch-alt">\n            <x-label>${Is(e,"oklch-alt")}</x-label>\n          </x-menuitem>\n        `:"oklab"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="oklab">\n            <x-label>${Is(e,"oklab")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="oklab-alt">\n            <x-label>${Is(e,"oklab-alt")}</x-label>\n          </x-menuitem>\n        `:"lch"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="lch">\n            <x-label>${Is(e,"lch")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="lch-alt">\n            <x-label>${Is(e,"lch-alt")}</x-label>\n          </x-menuitem>\n        `:"lab"===e.spaceId&&(t.innerHTML=`\n          <x-menuitem value="lab">\n            <x-label>${Is(e,"lab")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="lab-alt">\n            <x-label>${Is(e,"lab-alt")}</x-label>\n          </x-menuitem>\n        `)}{let e=t.querySelector(`[value="${this.#yt}"]`);e&&(e.toggled=!0)}{let e=t.querySelector("x-menuitem[toggled]"),i=t.querySelector("x-menuitem").firstElementChild;this.append(t),this["#backdrop"].show(!1),e?t.openOverElement(this["#input"],e.querySelector("x-label")):t.openOverElement(this["#input"],i)}{let e=t.getBoundingClientRect(),i=this.getBoundingClientRect(),s=parseFloat(getComputedStyle(this).paddingRight);e.right-s<i.right&&(t.style.minWidth=i.right-e.left+s+"px")}{let t=this.getBoundingClientRect();t.right+7>window.innerWidth&&(this.style.maxWidth=window.innerWidth-t.left-7+"px")}}async#Wt(t=null){if(!1===this.#Kt())return;let e=this["#format-menu"];if(e.setAttribute("closing",""),await t,this["#backdrop"].hide(!1),this.#X)this.focus(),this.selectAll();else{let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}window.removeEventListener("resize",this.#Mt),window.removeEventListener("blur",this.#Lt),await e.close(),e.removeAttribute("closing"),e.remove()}#qt(){if(this.disabled)return!1;{let t=this["#format-menu"];return t.querySelector("x-menuitem"),null!==t&&!1===t.opened&&!1===t.hasAttribute("closing")}}#Kt(){if(this.disabled)return!1;{let t=this["#format-menu"];return t.querySelector("x-menuitem"),null!==t&&!0===t.opened&&!1===t.hasAttribute("closing")}}#Jt(t="increment",e=1){let{value:i}=this["#input"],s=this.#Qt();if(s){let[n,a]=s,r=i.substring(n,a),o="",l=1;r.endsWith("%")?o="%":r.endsWith("deg")&&(o="deg"),l="%"===o||"deg"===o?1:i.indexOf("/")>-1&&i.indexOf("/")<n||"color-alt"===this.#yt?.01:1,l*=e,"decrement"===t&&(l*=-1);let h=wi(parseFloat(r)+l,5)+o;this["#input"].value=i.substring(0,n)+h+i.substring(a),this["#input"].selectionStart=n,this["#input"].selectionEnd=n+h.length,this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}}#te(){let{value:t,selectionStart:e,selectionEnd:i}=this["#input"],s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=-1,a=-1;t=t.toLowerCase();for(let i=e-1;i>=0;i-=1){let e=t[i];if(!s.includes(e)){if("#"===e){n=i;break}return null}n=i}for(let n=e;n<t.length;n+=1){let e=t[n];if(!s.includes(e)){if(" "!==e||i>n)return null;break}a=n+1}return-1===n&&-1!==a?n=e:-1===a&&-1!==n&&(a=i),[n,a]}#Qt(){let{value:t,selectionStart:e,selectionEnd:i}=this["#input"],s=["0","1","2","3","4","5","6","7","8","9",".","+","-","%","d","e","g"],n=-1,a=-1;t=t.toLowerCase();for(let i=e-1;i>=0;i-=1){let e=t[i];if(!s.includes(e)){if(!1===[" ","(","/"].includes(e))return null;break}n=i}for(let n=e;n<=t.length;n+=1){let e=t[n];if(!s.includes(e)){if(!1===[" ",")","/"].includes(e)||i>n)return null;break}a=n+1}return-1===n&&-1!==a?n=e:-1===a&&-1!==n&&(a=i),[n,a]}#ee(){let t,e=this["#input"].value;try{t=At(e)}catch(i){t=At("#"+e)}return!1===this.alpha&&(t.alpha=1),e=Is(mi(t,this.space),this.#yt),e}#Gt(t){let e="color";return"srbg"===t?e="hex":"oklch"===t?e="oklch":"oklab"===t?e="oklab":"lch"===t?e="lch":"lab"===t&&(e="lab"),e}#_t(t){let{key:e,value:i,origin:s}=t.detail;e===`x-colorinput:${this.space}Format`&&(this.#yt=i||this.#Gt(this.space),this.#kt=Is(mi(At(this["#input"].value),this.space),this.#yt),this.#Ct())}#Ut(){this.#yt=Gn.getConfig(`x-colorinput:${this.space}Format`,this.#Gt(this.space)),this.isConnected&&this.#Ct()}#Zt(){this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&this.selectAll()}#vt(){this["#input"].disabled=this.disabled,this.#J()}#P(t){if(2===t.detail){let t=this.#Qt(),e=this.#te();if(t){let[e,i]=t;this["#input"].setSelectionRange(e,i)}else if(e){let[t,i]=e;this["#input"].setSelectionRange(t,i)}}this.#Yt()}#At(t){this.#Wt()}#V(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#q(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#Rt(){this.#Yt(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#Pt(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),this.reportValidity()}#W(t){if("Enter"===t.code||"NumpadEnter"===t.code){if(t.preventDefault(),this.reportValidity(),null===this.#Et){let t=this.#ee();t!==this.#kt&&(this.#kt=t,this.#Ct(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#Ct(),this.selectAll()}}else"ArrowUp"===t.code?(t.preventDefault(),t.stopPropagation(),this.#Jt("increment",t.shiftKey?10:1)):"ArrowDown"===t.code?(t.preventDefault(),t.stopPropagation(),this.#Jt("decrement",t.shiftKey?10:1)):"Backspace"===t.code&&t.stopPropagation()}#Dt(){if(this.reportValidity(),null===this.#Et){let t=this.#ee();t!==this.#kt&&(this.#kt=t,this.#Ct(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#Ct()}}#Tt(t){this.#Et&&this.reportValidity(),t.stopPropagation(),this.#zt(),this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}#Bt(){this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#It(t){!1===this["#input"].matches(":focus")&&(t.preventDefault(),this["#input"].focus(),this.selectAll())}#Ot(){this["#input"].selectionStart===this["#input"].selectionEnd&&this.selectAll()}#Ht(t){this.#X=this.matches(":focus")}#jt(t){this.#Vt()}#Ft(t){let e=t.target.closest("x-menuitem");if(e){if(!1===e.toggled){for(let t of this["#format-menu"].querySelectorAll("x-menuitem"))t.toggled=t===e;Gn.setConfig(`x-colorinput:${this.space}Format`,e.value)}this.#Wt(e.whenTriggerEnd)}}#Nt(t){t.preventDefault()}#Xt(){this.#Ct(),this.#I(),this.#zt(),this.#J()}#Ct(){let t=At(this.#kt);!1===this.alpha&&(t.alpha=1);let e=Is(mi(t,this.space),this.#yt);this.matches(":focus")?(this["#input"].selectionStart=0,this["#input"].selectionEnd=this["#input"].value.length,document.execCommand("insertText",!1,e)):this["#input"].value=e}#I(){Gn.whenThemeReady.then((()=>{let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}))}#Yt(){let t=this.#Et;t?this.setAttribute("error",""):this.removeAttribute("error");{let e=this.querySelector(':scope > x-tooltip[type="error"]');if(t&&this.matches(":focus")){if(e||(e=Xn("x-tooltip"),e.setAttribute("type","error"),this.append(e)),t.href){let i=t.args?Object.entries(t.args).map((([t,e])=>`${t}:${e}`)).join(","):"";e.innerHTML=`<x-message href="${t.href}" args="${i}"></x-message>`}else e.innerHTML=t;jn(10).then((()=>{e.open(this)}))}else e&&e.close().then((()=>e.remove()))}}#zt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#J(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}}customElements.define("x-colorinput",oa);let{PI:la,sin:ha,cos:da,pow:ca,atan2:ua,sqrt:pa,min:ma,max:ba}=Math,{isNaN:ga}=Number;const fa=150,xa=.4;class wa extends HTMLElement{static observedAttributes=["value","alpha","spaces","disabled"];static#z=Ns`<template><header id="header"><x-select id="space-select" size="small"><x-menu id="space-select-menu"><x-menuitem value="srgb"><x-label>sRGB</x-label></x-menuitem><x-menuitem value="srgb-linear"><x-label><x-message href="#color-space.srgb-linear">Linear sRGB</x-message></x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem><hr><x-menuitem value="lch"><x-label>CIE LCH</x-label></x-menuitem><x-menuitem value="oklch"><x-label>OK LCH</x-label></x-menuitem><hr><x-menuitem value="lab"><x-label>CIE LAB</x-label></x-menuitem><x-menuitem value="oklab"><x-label>OK LAB</x-label></x-menuitem><hr><x-menuitem value="xyz-d65"><x-label>CIE XYZ D65</x-label></x-menuitem><x-menuitem value="xyz-d50"><x-label>CIE XYZ D50</x-label></x-menuitem></x-menu></x-select><x-buttons id="type-buttons" tracking="1"><x-button value="planar" skin="flat"><x-icon href="#square"></x-icon></x-button><x-button value="polar" skin="flat"><x-icon href="#circle"></x-icon></x-button><x-button value="linear" skin="flat"><x-icon href="#bars"></x-icon></x-button></x-buttons></header><div id="main"></div><footer id="footer"><x-colorinput id="input" space="srgb" size="small"></x-colorinput><x-button id="grab-button" part="grab-button" size="small" condensed togglable><x-icon href="#eye-dropper"></x-icon></x-button></footer></template>`;static#E=Fs`:host{display:block;width:200px;box-sizing:border-box}:host([hidden]){display:none}#header{display:flex;align-items:center}#space-select{min-width:110px;font-size:0.8125rem}#space-select x-menuitem[data-warn] x-label::after{content:" ⚠"}#type-buttons{margin-left:auto}#type-buttons x-button{margin-left:4px;min-height:1px}#type-buttons x-button x-icon{width:18px;height:18px}#main{margin-top:10px}#sliders{width:100%}:host([context~="x-popover"]) #sliders{height:250px}:host([context~="x-popover"]):host([alpha]) #sliders{height:290px}#footer{display:flex;margin-top:10px}#input{max-width:none;min-height:1px;flex:1}#input:focus{z-index:1}#grab-button{margin:0 0 0 5px;padding:0px 6px}#grab-button x-icon{width:14px;height:14px}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"}set value(t){this.setAttribute("value",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get spaces(){return this.hasAttribute("spaces")?this.getAttribute("spaces").replace(/\s+/g," ").split(" "):["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto","lch","oklch","lab","oklab","xyz-d65","xyz-d50"]}set spaces(t){this.setAttribute("spaces",t.join(" "))}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$;#$t;#ie=!1;constructor(){super(),this.#$=this.attachShadow({mode:"open"}),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,wa.#E],this.#$.append(document.importNode(wa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#space-select"].addEventListener("change",(()=>this.#se())),this["#space-select"].addEventListener("open",(()=>this.#ne())),this["#type-buttons"].addEventListener("toggle",(t=>this.#ae())),this["#main"].addEventListener("pointerdown",(t=>this.#re(t)),!0),this["#main"].addEventListener("changestart",(t=>this.#oe(t))),this["#main"].addEventListener("change",(t=>this.#le(t))),this["#main"].addEventListener("changeend",(t=>this.#he(t))),this["#input"].addEventListener("change",(t=>this.#de(t))),this["#input"].addEventListener("keydown",(t=>this.#ce(t))),this["#grab-button"].addEventListener("toggle",(()=>this.#ue()))}connectedCallback(){Gn.addEventListener("configchange",this.#$t=t=>{this.#_t(t)}),"x-popover"===this.parentElement?.localName?this.setAttribute("context","x-popover"):this.removeAttribute("context"),this["#type-buttons"].value=Gn.getConfig(`${this.localName}:type`,"planar"),this.#Xt()}disconnectedCallback(){Gn.removeEventListener("configchange",this.#$t)}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Zt():"alpha"===t?this.#pe():"spaces"===t?this.#me():"disabled"===t&&this.#vt())}grab(){return new Promise((async t=>{if(void 0===window.EyeDropper)window.alert("Your web browser does not support Eye Dropper API"),t(null);else{let e,i=new EyeDropper,s=new AbortController;try{e=await i.open({signal:s.signal})}catch(t){e=null}t(e?.sRGBHex||null)}}))}#Zt(){this.isConnected&&(this.#ie?this.#be():this.#Xt())}#pe(){for(let t of this["#main"].children)this.alpha?t.setAttribute("alpha",""):t.removeAttribute("alpha");this.alpha?this["#input"].setAttribute("alpha",""):this["#input"].removeAttribute("alpha")}#me(){this.isConnected&&this.#Xt()}#vt(){this.isConnected&&this.#Xt()}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s&&e===`${this.localName}:type`){let t=i||"planar";null===this.offsetParent&&this["#type-buttons"].value!==t&&(this["#type-buttons"].value=t,this.#Xt())}}#se(){let t=At(this.value);if(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),"srgb"===this["#space-select"].value)this.value=bi(mi(t,"srgb",{inGamut:!0}),{format:"hex"});else{let e=mi(t,this["#space-select"].value,{inGamut:!0});for(let t=0;t<e.coords.length;t+=1)(null===e.coords[t]||ga(e.coords[t]))&&(e.coords[t]=0);this.value=bi(e,{precision:3})}this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#ae(t){Gn.setConfig(`${this.localName}:type`,this["#type-buttons"].value),this.#Xt()}#re(t){this["#input"].matches(":focus")&&t.stopImmediatePropagation()}#oe(t){this.#ie=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))}#le(t){let e=t.target;if("srgb"===e.space){let[e,i,s,n]=t.target.value;this.value=bi({space:"srgb",coords:[e,i,s],alpha:n},{format:"hex"})}else if(["srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(e.space)){let[i,s,n,a]=t.target.value;this.value=bi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("lch"===e.space||"oklch"===e.space){let[i,s,n,a]=t.target.value;this.value=bi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("lab"===e.space||"oklab"===e.space){let[i,s,n,a]=t.target.value;this.value=bi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("xyz-d65"===e.space||"xyz-d50"===e.space){let[i,s,n,a]=t.target.value;this.value=bi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#he(t){this.#ie=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#de(t){this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=At(this["#input"].value);"srgb"===this["#space-select"].value?this.value=bi(mi(e,"srgb",{inGamut:!0}),{format:"hex"}):this.value=bi(mi(e,this["#space-select"].value,{inGamut:!0}),{precision:3}),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#ce(t){"Enter"!==t.key&&"Space"!==t.code||this.closest("x-popover")&&t.stopPropagation()}#ue(){return new Promise((async t=>{let e=await this.grab();this["#grab-button"].toggled=!1,null!==e&&(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),"srgb"===this["#space-select"].value?this.value=e:this.value=bi(mi(At(e),this["#space-select"].value,{inGamut:!0}),{precision:3}),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})))}))}#Xt(){let t=this.#ge();this.#fe(t),this.#xe(t),this.#we(t),this.#Ct(t),this.#ve()}#fe(t=this.#ge()){return new Promise((async e=>{let i=this.spaces;if(await customElements.whenDefined("x-select"),this["#space-select"].value=t.spaceId,1===i.length)this["#space-select"].hidden=!0;else{this["#space-select"].hidden=!1,this["#space-select"].disabled=this.disabled;for(let t of this["#space-select-menu"].children)"x-menuitem"===t.localName&&(t.disabled=!i.includes(t.value))}}))}#ne(){let t=this.#ge();for(let e of this["#space-select-menu"].children)if("x-menuitem"===e.localName){se(t,e.value)?e.removeAttribute("data-warn"):e.setAttribute("data-warn","")}}#xe(t=this.#ge()){let e;["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(t.spaceId)?e=["planar","polar","linear"]:["lch","oklch","lab","oklab","xyz-d65","xyz-d50"].includes(t.spaceId)&&(e=["planar","linear"]),!1===e.includes(this["#type-buttons"].value)&&(this["#type-buttons"].value=e[0]);for(let t of this["#type-buttons"].children)t.disabled=this.disabled,t.hidden=!1===e.includes(t.value)||e.length<=1}#we(t=this.#ge()){return new Promise((async e=>{let i,s=this["#type-buttons"].value,n=t.spaceId,a=[...t.coords,t.alpha];["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(n)?"linear"===s?i="x-rgblinearsliders":"planar"===s?i="x-rgbplanarsliders":"polar"===s&&(i="x-rgbpolarsliders"):"lch"===n||"oklch"===n?"linear"===s?i="x-lchlinearsliders":"planar"===s&&(i="x-lchplanarsliders"):"lab"===n||"oklab"===n?"linear"===s?i="x-lablinearsliders":"planar"===s&&(i="x-labplanarsliders"):"xyz-d65"!==n&&"xyz-d50"!==n||("linear"===s?i="x-xyzlinearsliders":"planar"===s&&(i="x-xyzplanarsliders")),this["#main"].firstElementChild?.localName!==i&&(this["#main"].innerHTML="",this["#sliders"]=Xn(i),this["#sliders"].setAttribute("id","sliders"),this["#sliders"].setAttribute("exportparts","slider"),this["#main"].append(this["#sliders"])),await customElements.whenDefined(i),this["#sliders"].space=n,this["#sliders"].value=a,this["#sliders"].alpha=this.alpha,this["#sliders"].disabled=this.disabled,e()}))}#Ct(t=this.#ge()){this["#input"].space=t.spaceId,this["#input"].alpha=this.alpha,this["#input"].value=bi(t),this["#input"].disabled=this.disabled}#be=Fn(this.#Ct,50,this);#ve(){this["#grab-button"].disabled=this.disabled}#ge(){let t=At(this.value);!1===this.spaces.includes(t.spaceId)&&(t="hsl"===t.spaceId||"hwb"===t.spaceId?mi(t,"srgb",{inGamut:!0}):mi(t,"p3",{inGamut:!0}));for(let e=0;e<t.coords.length;e+=1)(null===t.coords[e]||ga(t.coords[e]))&&(t.coords[e]=0);return void 0===t.spaceId&&(t.spaceId=t.space.id),t.coords=t.coords.map((t=>1*t)),t}}void 0===customElements.get("x-colorpicker")&&customElements.define("x-colorpicker",wa);class va extends HTMLElement{static#z=Ns`<template><div id="coord-0-slider" class="slider" part="slider"><div id="coord-0-slider-track" class="slider-track"><svg id="coord-0-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-0-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-0-slider-marker" class="slider-marker"><span id="coord-0-slider-label" class="slider-label"></span></div></div></div><div id="coord-1-slider" class="slider" part="slider"><div id="coord-1-slider-track" class="slider-track"><svg id="coord-1-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-1-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-1-slider-marker" class="slider-marker"><span id="coord-1-slider-label" class="slider-label"></span></div></div></div><div id="coord-2-slider" class="slider" part="slider"><div id="coord-2-slider-track" class="slider-track"><svg id="coord-2-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-2-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-2-slider-marker" class="slider-marker"><span id="coord-2-slider-label" class="slider-label"></span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem><x-menuitem value="hwb"><x-label>HWB</x-label></x-menuitem><hr><x-menuitem value="okhsv" data-srgb-only><x-label>OK HSV</x-label></x-menuitem><x-menuitem value="okhsl" data-srgb-only><x-label>OK HSL</x-label></x-menuitem><x-menuitem value="hsluv" data-srgb-only><x-label>HSLuv</x-label></x-menuitem><hr><x-menuitem value="rgb"><x-label>RGB</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Fs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}.slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}
`;get value(){let t=this.#ke();if("rgb"===t){let[t,e,i]=this.#ye;return[t,e,i,this.#Ce]}if("hsv"===t){let[e,i,s]=this.#ye,[n,a,r]=mi({space:t,coords:[360*e,100*i,100*s]},"srgb").coords;return[n,a,r,this.#Ce]}if("okhsv"===t){let[e,i,s]=this.#ye,[n,a,r]=mi({space:t,coords:[360*e,i,s]},"srgb").coords;return[n,a,r,this.#Ce]}if("hsl"===t||"hsluv"===t){let[e,i,s]=this.#ye,[n,a,r]=mi({space:t,coords:[360*e,100*i,100*s]},"srgb").coords;return[n,a,r,this.#Ce]}if("okhsl"===t){let[e,i,s]=this.#ye,[n,a,r]=mi({space:t,coords:[360*e,i,s]},"srgb").coords;return[n,a,r,this.#Ce]}if("hwb"===t){let[t,e,i]=this.#ye,[s,n,a]=mi({space:"hwb",coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#Ce]}}set value([t,e,i,s]){let n=this.#ke();if("rgb"===n)this.#ye=[t,e,i],this.#Ce=s;else if("hsv"===n){let[a,r,o]=mi({space:"srgb",coords:[t,e,i]},n).coords;this.#ye=[a/360,r/100,o/100],this.#Ce=s}else if("okhsv"===n){let[a,r,o]=mi({space:"srgb",coords:[t,e,i]},n).coords;this.#ye=[a/360,r,o],this.#Ce=s}else if("hsl"===n||"hsluv"===n){let[a,r,o]=mi({space:"srgb",coords:[t,e,i]},n).coords;this.#ye=[a/360,r/100,o/100],this.#Ce=s}else if("okhsl"===n){let[a,r,o]=mi({space:"srgb",coords:[t,e,i]},n).coords;this.#ye=[a/360,r,o],this.#Ce=s}else if("hwb"===n){let[n,a,r]=mi({space:"srgb",coords:[t,e,i]},"hwb").coords;this.#ye=[n/360,a/100,r/100],this.#Ce=s}for(let t=0;t<this.#ye.length;t+=1)(null===this.#ye[t]||ga(this.#ye[t]))&&(this.#ye[t]=0);this.#Xt()}get space(){return this.#ze}set space(t){this.#ze!==t&&(this.#ze=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#$t;#ie=!1;#ze="srgb";#Ee="hsv";#$e="srgb";#Se=!0;#ye=[0,0,0];#Ce=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(va.#z.content,!0)),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,va.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#coord-0-slider"].addEventListener("pointerdown",(t=>this.#Me(t))),this["#coord-1-slider"].addEventListener("pointerdown",(t=>this.#Le(t))),this["#coord-2-slider"].addEventListener("pointerdown",(t=>this.#Ae(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Re(t))),this["#context-menu"].addEventListener("click",(t=>this.#Pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#Te(t)))}connectedCallback(){this.#Ee=Gn.getConfig(`${this.localName}:model`,"hsv"),this.#$e=Os(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#Se=Gn.getConfig("x-colorpicker:labels",!0),Gn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){Gn.removeEventListener("configchange",this.#$t)}#ke(){return this.#Ee,"okhsv"===this.#Ee?"srgb"===this.#ze?"okhsv":"hsv":"okhsl"===this.#Ee?"srgb"===this.#ze?"okhsl":"hsl":"hsluv"===this.#Ee?"srgb"===this.#ze?"hsluv":"hsl":this.#Ee}#De(){return"none"===this.#$e||"srgb"===this.#$e&&["srgb","srgb-linear"].includes(this.#ze)||"p3"===this.#$e&&["srgb","srgb-linear","p3"].includes(this.#ze)||"a98rgb"===this.#$e&&["srgb","srgb-linear","a98rgb"].includes(this.#ze)||"rec2020"===this.#$e&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#ze)||"prophoto"===this.#$e?"none":this.#$e}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#Ee){let[e,i,s]=this.value;this.#Ee=t,this.value=[e,i,s,this.#Ce]}}else if("x-colorpicker:gamutHints"===e){let t=Os(i||"srgb","color.js");t!==this.#$e&&(this.#$e=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#Se&&(this.#Se=t,this.#Be())}}#Pe(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#color-model-menu"]){let t=e.value,[i,s,n]=this.value;this.#Ee=t,Gn.setConfig(`${this.localName}:model`,t),this.value=[i,s,n,this.#Ce]}else e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#$e&&(this.#$e=e.value,this.#Xt(),Gn.setConfig("x-colorpicker:gamutHints",Os(this.#$e,"css"))):"labels"===e.value&&(this.#Se=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#Se),this.#Xt())}#Te(){this.#Ie()}#Me(t){if(t.button>0||this.#ie)return;let e,i,s=this["#coord-0-slider-track"].getBoundingClientRect();this.#ie=!0,this["#coord-0-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#ye[0]&&(this.#ye[0]=e,this.#Oe(),this.#He(),this.#je(),this.#Ne(),this.#Fe(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#coord-0-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#coord-0-slider"].addEventListener("pointerup",i=()=>{this["#coord-0-slider"].removeEventListener("pointermove",e),this["#coord-0-slider"].removeEventListener("pointerup",i),this["#coord-0-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#coord-0-slider"].addEventListener("pointercancel",i)}#Le(t){if(t.button>0||this.#ie)return;let e,i,s=this.#ke(),n=this["#coord-1-slider-track"].getBoundingClientRect();this.#ie=!0,this["#coord-1-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let a=t=>{let e=(t-n.x)/n.width;e=ki(e,0,1),e!==this.#ye[1]&&(this.#ye[1]=e,"rgb"===s&&this.#_e(),this.#Ze(),this.#Ue(),this.#He(),this.#Ne(),this.#Fe(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};a(t.clientX),this["#coord-1-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&a(e.clientX)}),this["#coord-1-slider"].addEventListener("pointerup",i=()=>{this["#coord-1-slider"].removeEventListener("pointermove",e),this["#coord-1-slider"].removeEventListener("pointerup",i),this["#coord-1-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#coord-1-slider"].addEventListener("pointercancel",i)}#Ae(t){if(t.button>0||this.#ie)return;let e,i,s=this.#ke(),n=this["#coord-2-slider-track"].getBoundingClientRect();this.#ie=!0,this["#coord-2-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let a=t=>{let e=(t-n.x)/n.width;e=ki(e,0,1),e!==this.#ye[2]&&(this.#ye[2]=e,"rgb"===s&&(this.#_e(),this.#He()),this.#Ze(),this.#je(),this.#Ye(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};a(t.clientX),this["#coord-2-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&a(e.clientX)}),this["#coord-2-slider"].addEventListener("pointerup",i=()=>{this["#coord-2-slider"].removeEventListener("pointermove",e),this["#coord-2-slider"].removeEventListener("pointerup",i),this["#coord-2-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#coord-2-slider"].addEventListener("pointercancel",i)}#Re(t){if(t.button>0||this.#ie)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#ie=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#Ce&&(this.#Ce=e,this.#Ve(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#Oe(),this.#_e(),this.#Ze(),this.#Ue(),this.#He(),this.#je(),this.#Ye(),this.#Ne(),this.#Fe(),this.#Ve(),this.#Ge(),this.#Xe(),this.#Be()}#Oe(){this["#coord-0-slider-marker"].style.left=100*this.#ye[0]+"%"}#_e(){let t=this.#ke();if("rgb"===t){let[,t,e]=this.#ye,i="srgb-linear"===this.#ze?"srgb-linear":"srgb",s=[{space:this.#ze,coords:[0,t,e]},{space:this.#ze,coords:[1,t,e]}];s=s.map((t=>bi(t))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let t="srgb-linear"===this.#ze?"srgb-linear":"srgb",e=[{space:this.#ze,coords:[1,0,0]},{space:this.#ze,coords:[1,1,0]},{space:this.#ze,coords:[0,1,0]},{space:this.#ze,coords:[0,1,1]},{space:this.#ze,coords:[0,0,1]},{space:this.#ze,coords:[1,0,1]},{space:this.#ze,coords:[1,0,0]}];e=e.map((t=>bi(t))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in ${t} to right, ${e})`}else if("okhsv"===t||"okhsl"===t){let t=[];for(let e=0;e<=360;e+=60)t.push({space:"okhsv",coords:[e,1,1]});t=t.map((t=>bi(mi(t,"srgb")))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in srgb to right, ${t})`}else if("hsluv"===t){let t=[];for(let e=0;e<=360;e+=60)t.push({space:"okhsv",coords:[e,1,1]});t=t.map((t=>bi(mi(t,"srgb")))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in srgb to right, ${t})`}}#Ze(){let t=this.#De();if("none"===t)this["#coord-0-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#ke(),s=this["#coord-0-slider"].clientWidth,n=1/window.devicePixelRatio,[,a,r]=this.#ye,o=null;for(let l=0;l<=s;l+=n){let n,h=l/s;"hsv"===i||"hsl"===i||"hwb"===i?n={space:this.#ze,coords:mi({space:i,coords:[360*h,100*a,100*r]},"srgb").coords}:"rgb"===i&&(n={space:this.#ze,coords:[h,a,r]}),se(n,t)?(null===o&&(o=[],e.push(o)),o.push(100*h)):o=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-0-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-0-slider-gamut-path"].removeAttribute("d")}}#Ue(){this["#coord-1-slider-marker"].style.left=100*this.#ye[1]+"%"}#He(){let t=this.#ke();if("rgb"===t){let[t,,e]=this.#ye,i="srgb-linear"===this.#ze?"srgb-linear":"srgb",s=[{space:this.#ze,coords:[t,0,e]},{space:this.#ze,coords:[t,1,e]}];s=s.map((t=>bi(t))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let e,[i]=this.#ye,s="srgb-linear"===this.#ze?"srgb":this.space,n="srgb-linear"===this.#ze?"srgb-linear":"srgb";"hsv"===t?e=[{space:this.#ze,coords:mi({space:"hsv",coords:[360*i,0,100]},s).coords},{space:this.#ze,coords:mi({space:"hsv",coords:[360*i,100,100]},s).coords}]:"hsl"===t?e=[{space:this.#ze,coords:mi({space:"hsl",coords:[360*i,0,50]},s).coords},{space:this.#ze,coords:mi({space:"hsl",coords:[360*i,100,50]},s).coords}]:"hwb"===t&&(e=[{space:this.#ze,coords:mi({space:"hwb",coords:[360*i,0,0]},s).coords},{space:this.#ze,coords:mi({space:"hwb",coords:[360*i,100,0]},s).coords}]),e=e.map((t=>bi(t))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in ${n} to right, ${e})`}else if("okhsv"===t||"okhsl"===t){let[e]=this.#ye,i=[];for(let s=0;s<=1;s+=.01)i.push({space:t,coords:[360*e,s,"okhsv"===t?1:.65]});i=i.map((t=>bi(mi(t,"srgb")))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in srgb to right, ${i})`}else if("hsluv"===t){let[e]=this.#ye,i=[];for(let s=0;s<=100;s+=1)i.push({space:t,coords:[360*e,s,65]});i=i.map((t=>bi(mi(t,"srgb")))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in srgb to right, ${i})`}}#je(){let t=this.#De();if("none"===t)this["#coord-1-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#ke(),s=this["#coord-1-slider"].clientWidth,n=1/window.devicePixelRatio,[a,,r]=this.#ye,o=null;for(let l=0;l<=s;l+=n){let n,h=l/s;"hsv"===i||"hsl"===i||"hwb"===i?n={space:this.#ze,coords:mi({space:i,coords:[360*a,100*h,100*r]},"srgb").coords}:"rgb"===i&&(n={space:this.#ze,coords:[a,h,r]}),se(n,t)?(null===o&&(o=[],e.push(o)),o.push(100*h)):o=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-1-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-1-slider-gamut-path"].removeAttribute("d")}}#Ye(){this["#coord-2-slider-marker"].style.left=100*this.#ye[2]+"%"}#Ne(){let t=this.#ke();if("rgb"===t){let[t,e]=this.#ye,i="srgb-linear"===this.#ze?"srgb-linear":"srgb",s=[{space:this.#ze,coords:[t,e,0]},{space:this.#ze,coords:[t,e,1]}];s=s.map((t=>bi(t))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let e="srgb-linear"===this.#ze?"srgb":this.#ze,i="srgb-linear"===this.#ze?"srgb-linear":"srgb",s=[];if("hsv"===t){let[t,i]=this.#ye;s=[{space:this.#ze,coords:mi({space:"hsv",coords:[360*t,100*i,0]},e).coords},{space:this.#ze,coords:mi({space:"hsv",coords:[360*t,100*i,100]},e).coords}]}else if("hsl"===t){let[t,i]=this.#ye;s=[{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,100*i,0]},e).coords},{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,100*i,50]},e).coords},{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,100*i,100]},e).coords}]}else if("hwb"===t){let[t,i]=this.#ye;for(let n=0;n<=100;n+=10)s.push({space:this.#ze,coords:mi({space:"hwb",coords:[360*t,100*i,n]},e).coords})}s=s.map((t=>bi(t))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("okhsv"===t||"okhsl"===t){let[e,i]=this.#ye,s=[];for(let n=0;n<=1;n+=.01)s.push({space:t,coords:[360*e,i,n]});s=s.map((t=>bi(mi(t,"srgb")))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in srgb to right, ${s})`}else if("hsluv"===t){let[e,i]=this.#ye,s=[];for(let n=0;n<=100;n+=1)s.push({space:t,coords:[360*e,100*i,n]});s=s.map((t=>bi(mi(t,"srgb")))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in srgb to right, ${s})`}}#Fe(){let t=this.#De();if("none"===t)this["#coord-2-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#ke(),s=this["#coord-2-slider"].clientWidth,n=1/window.devicePixelRatio,[a,r]=this.#ye,o=null;for(let l=0;l<=s;l+=n){let n,h=l/s;"hsv"===i||"hsl"===i||"hwb"===i?n={space:this.#ze,coords:mi({space:i,coords:[360*a,100*r,100*h]},"srgb").coords}:"rgb"===i&&(n={space:this.#ze,coords:[a,r,h]}),se(n,t)?(null===o&&(o=[],e.push(o)),o.push(100*h)):o=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-2-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-2-slider-gamut-path"].removeAttribute("d")}}#Ve(){this["#alpha-slider-marker"].style.left=100*this.#Ce+"%"}#Ge(){let t=this.#ke();if("rgb"===t){let[t,e,i]=this.#ye,s=[{space:this.#ze,coords:[t,e,i],alpha:0},{space:this.#ze,coords:[t,e,i],alpha:1}];s=s.map((t=>bi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${s})`}else if("okhsv"===t||"okhsl"===t){let[e,i,s]=this.#ye,n="srgb-linear"===this.#ze?"srgb":this.#ze,a=[];for(let r of[0,1])a.push({space:this.#ze,coords:mi({space:t,coords:[360*e,i,s]},n).coords,alpha:r});a=a.map((t=>bi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${a})`}else{let[e,i,s]=this.#ye,n="srgb-linear"===this.#ze?"srgb":this.#ze,a=[];for(let r of[0,1])a.push({space:this.#ze,coords:mi({space:t,coords:[360*e,100*i,100*s]},n).coords,alpha:r});a=a.map((t=>bi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${a})`}}#Xe(){let t=this.#De();if("none"===t)this["#coord-0-slider-marker"].removeAttribute("data-warn"),this["#coord-1-slider-marker"].removeAttribute("data-warn"),this["#coord-2-slider-marker"].removeAttribute("data-warn");else{let e,i=this.#ke();if("hsv"===i||"hsl"===i||"hwb"===i){let[t,s,n]=this.#ye;e={space:this.#ze,coords:mi({space:i,coords:[360*t,100*s,100*n]},"srgb").coords}}else if("rgb"===i){let[t,i,s]=this.#ye;e={space:this.#ze,coords:[...this.#ye]}}se(e,t)?(this["#coord-0-slider-marker"].removeAttribute("data-warn"),this["#coord-1-slider-marker"].removeAttribute("data-warn"),this["#coord-2-slider-marker"].removeAttribute("data-warn")):(this["#coord-0-slider-marker"].setAttribute("data-warn",""),this["#coord-1-slider-marker"].setAttribute("data-warn",""),this["#coord-2-slider-marker"].setAttribute("data-warn",""))}}#Be(){if(this.#Se){let t=this.#ke();"hsv"===t||"okhsv"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="S",this["#coord-2-slider-label"].textContent="V"):"hsl"===t||"okhsl"===t||"hsluv"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="S",this["#coord-2-slider-label"].textContent="L"):"hwb"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="W",this["#coord-2-slider-label"].textContent="B"):"rgb"===t&&(this["#coord-0-slider-label"].textContent="R",this["#coord-1-slider-label"].textContent="G",this["#coord-2-slider-label"].textContent="B"),this["#alpha-slider-label"].textContent="α"}else this["#coord-0-slider-label"].textContent="",this["#coord-1-slider-label"].textContent="",this["#coord-2-slider-label"].textContent="",this["#alpha-slider-label"].textContent=""}#Ie(){let t=this.#ke();for(let e of this["#color-model-menu"].querySelectorAll("x-menuitem"))e.toggled=e.value===t,e.hidden=e.hasAttribute("data-srgb-only")&&"srgb"!==this.#ze;for(let t of this["#color-model-menu"].querySelectorAll("hr"))t.hidden="srgb"!==this.#ze&&"rgb"!==t.nextElementSibling?.value;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#$e;this["#labels-menu-item"].toggled=this.#Se}}void 0===customElements.get("x-rgblinearsliders")&&customElements.define("x-rgblinearsliders",va);class ka extends HTMLElement{static#z=Ns`<template><div id="hue-slider" class="slider" part="slider"><div id="hue-slider-track" class="slider-track"><svg id="hue-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="hue-slider-marker" class="slider-marker"><span id="hue-slider-label" class="slider-label">H</span></div></div></div><div id="chroma-slider" class="slider" part="slider"><div id="chroma-slider-track" class="slider-track"><svg id="chroma-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="chroma-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="chroma-slider-marker" class="slider-marker"><span id="chroma-slider-label" class="slider-label">C</span></div></div></div><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Fs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}.slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}
`;get value(){let[t,e,i]=this.#ye;return[t,e,i,this.#Ce]}set value([t,e,i,s]){this.#ye=[t,e,i],this.#Ce=s,this.#Xt()}get space(){return this.#ze}set space(t){this.#ze!==t&&(this.#ze=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#$t;#ie=!1;#ze="lch";#$e="srgb";#Se=!0;#ye=[0,0,0];#Ce=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(ka.#z.content,!0)),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,ka.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#qe(t))),this["#chroma-slider"].addEventListener("pointerdown",(t=>this.#We(t))),this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#Ke(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Re(t))),this["#context-menu"].addEventListener("click",(t=>this.#Pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#Te(t)))}connectedCallback(){this.#$e=Os(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#Se=Gn.getConfig("x-colorpicker:labels",!0),Gn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){Gn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Os(i||"srgb","color.js");t!==this.#$e&&(this.#$e=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#Se&&(this.#Se=t,this.#Be())}}#Pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#$e&&(this.#$e=e.value,this.#Xt(),Gn.setConfig("x-colorpicker:gamutHints",Os(this.#$e,"css"))):"labels"===e.value&&(this.#Se=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#Se),this.#Xt()))}#Te(){this.#Ie()}#qe(t){if(t.button>0||this.#ie)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#ie=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),360*e!==this.#ye[2]&&(this.#ye[2]=360*e,this.#Je(),this.#Qe(),this.#ti(),this.#ei(),this.#ii(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#We(t){if(t.button>0||this.#ie)return;let e,i,s=this["#chroma-slider-track"].getBoundingClientRect();this.#ie=!0,this["#chroma-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklch"===this.#ze?e=ki(e*xa,0,xa):"lch"===this.#ze&&(e=ki(e*fa,0,fa)),e!==this.#ye[1]&&(this.#ye[1]=e,this.#si(),this.#ni(),this.#ei(),this.#ii(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#chroma-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#chroma-slider"].addEventListener("pointerup",i=()=>{this["#chroma-slider"].removeEventListener("pointermove",e),this["#chroma-slider"].removeEventListener("pointerup",i),this["#chroma-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#chroma-slider"].addEventListener("pointercancel",i)}#Ke(t){if(t.button>0||this.#ie)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#ie=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklch"===this.#ze?e=ki(e,0,1):"lch"===this.#ze&&(e=ki(100*e,0,100)),e!==this.#ye[0]&&(this.#ye[0]=e,this.#si(),this.#ti(),this.#ai(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#Re(t){if(t.button>0||this.#ie)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#ie=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#Ce&&(this.#Ce=e,this.#Ve(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#Je(),this.#ri(),this.#si(),this.#ni(),this.#Qe(),this.#ti(),this.#ai(),this.#ei(),this.#ii(),this.#Ve(),this.#Ge(),this.#Xe(),this.#Be()}#Je(){let[t,e,i]=this.#ye;this["#hue-slider-marker"].style.left=i/360*100+"%"}#ri(){let t=[];if("oklch"===this.#ze)for(let e=0;e<=360;e+=5)t.push({space:"oklch",coords:[.8,xa,e]});else if("lch"===this.#ze)for(let e=0;e<=360;e+=5)t.push({space:"lch",coords:[75,fa,e]});t=t.map((t=>bi(t))),this["#hue-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${t.join(",")})`}#si(){if("none"===this.#$e)this["#hue-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#hue-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#ye,a=null;for(let r=0;r<=e;r+=i){let i=r/e;se({space:this.#ze,coords:[s,n,360*i]},this.#$e)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#ni(){let[t,e,i]=this.#ye;"oklch"===this.#ze?this["#chroma-slider-marker"].style.left=e>xa?"calc(100% + 18px)":e/xa*100+"%":"lch"===this.#ze&&(this["#chroma-slider-marker"].style.left=e>fa?"calc(100% + 18px)":e/fa*100+"%")}#Qe(){let[,,t]=this.#ye,e=[];if("oklch"===this.#ze)for(let i=0;i<=xa;i+=.03)e.push({space:"oklch",coords:[.75,i,t]});else if("lch"===this.#ze)for(let i=0;i<=fa;i+=10)e.push({space:"lch",coords:[75,i,t]});e=e.map((t=>bi(t))),this["#chroma-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${e.join(",")})`}#ti(){if("none"===this.#$e)this["#chroma-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#chroma-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#ye,a=null;for(let r=0;r<=e;r+=i){let i=r/e,o="lch"===this.#ze?fa:xa;se({space:this.#ze,coords:[s,i*o,n]},this.#$e)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#chroma-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#chroma-slider-gamut-path"].removeAttribute("d")}}#ai(){let[t,e,i]=this.#ye;"oklch"===this.#ze?this["#lightness-slider-marker"].style.left=100*t+"%":"lch"===this.#ze&&(this["#lightness-slider-marker"].style.left=t+"%")}#ei(){let[,t,e]=this.#ye,i=[];if("oklch"===this.#ze)for(let s=0;s<=1;s+=.02)i.push({space:"oklch",coords:[s,t,e]});else if("lch"===this.#ze)for(let s=0;s<=100;s+=2)i.push({space:"lch",coords:[s,t,e]});i=i.map((t=>bi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${i.join(",")})`}#ii(){if("none"===this.#$e)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ye,a=null;for(let r=0;r<=e;r+=i){let i=r/e;se({space:this.#ze,coords:["oklch"===this.#ze?i:100*i,s,n]},this.#$e)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#Ve(){this["#alpha-slider-marker"].style.left=100*this.#Ce+"%"}#Ge(){let[t,e,i]=this.#ye,s=[{space:this.#ze,coords:[t,e,i],alpha:0},{space:this.#ze,coords:[t,e,i],alpha:1}];s=s.map((t=>bi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ze} to right, ${s.join(",")})`}#Xe(){if("none"===this.#$e)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#chroma-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{se({space:this.#ze,coords:this.#ye},this.#$e)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#chroma-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#chroma-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#Be(){this["#hue-slider-label"].hidden=!this.#Se,this["#chroma-slider-label"].hidden=!this.#Se,this["#lightness-slider-label"].hidden=!this.#Se,this["#alpha-slider-label"].hidden=!this.#Se}#Ie(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#$e;this["#labels-menu-item"].toggled=this.#Se}}void 0===customElements.get("x-lchlinearsliders")&&customElements.define("x-lchlinearsliders",ka);class ya extends HTMLElement{static#z=Ns`<template><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="a-slider" class="slider" part="slider"><div id="a-slider-track" class="slider-track"><svg id="a-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="a-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="a-slider-marker" class="slider-marker"><span id="a-slider-label" class="slider-label">A</span></div></div></div><div id="b-slider" class="slider" part="slider"><div id="b-slider-track" class="slider-track"><svg id="b-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="b-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="b-slider-marker" class="slider-marker"><span id="b-slider-label" class="slider-label">B</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Fs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}.slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}
`;get value(){let[t,e,i]=this.#ye;return[t,e,i,this.#Ce]}set value([t,e,i,s]){this.#ye=[t,e,i],this.#Ce=s,this.#Xt()}get space(){return this.#ze}set space(t){this.#ze!==t&&(this.#ze=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#$t;#ie=!1;#ze="lab";#$e="srgb";#Se=!0;#ye=[0,0,0];#Ce=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(ya.#z.content,!0)),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,ya.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#Ke(t))),this["#a-slider"].addEventListener("pointerdown",(t=>this.#oi(t))),this["#b-slider"].addEventListener("pointerdown",(t=>this.#li(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Re(t))),this["#context-menu"].addEventListener("click",(t=>this.#Pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#Te(t)))}connectedCallback(){this.#$e=Os(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#Se=Gn.getConfig("x-colorpicker:labels",!0),Gn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){Gn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Os(i||"srgb","color.js");t!==this.#$e&&(this.#$e=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#Se&&(this.#Se=t,this.#Be())}}#Pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#$e&&(this.#$e=e.value,this.#Xt(),Gn.setConfig("x-colorpicker:gamutHints",Os(this.#$e,"css"))):"labels"===e.value&&(this.#Se=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#Se),this.#Xt()))}#Te(){this.#Ie()}#Ke(t){if(t.button>0||this.#ie)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#ie=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklab"===this.#ze?e=ki(e,0,1):"lab"===this.#ze&&(e=ki(100*e,0,100)),e!==this.#ye[0]&&(this.#ye[0]=e,this.#hi(),this.#di(),this.#ci(),this.#ui(),this.#ai(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#oi(t){if(t.button>0||this.#ie)return;let e,i,s=this["#a-slider-track"].getBoundingClientRect();this.#ie=!0,this["#a-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),"oklab"===this.#ze?e=.8*e-.4:"lab"===this.#ze&&(e=250*e-125),e!==this.#ye[1]&&(this.#ye[1]=e,this.#ei(),this.#ii(),this.#pi(),this.#ci(),this.#ui(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#a-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#a-slider"].addEventListener("pointerup",i=()=>{this["#a-slider"].removeEventListener("pointermove",e),this["#a-slider"].removeEventListener("pointerup",i),this["#a-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#a-slider"].addEventListener("pointercancel",i)}#li(t){if(t.button>0||this.#ie)return;let e,i,s=this["#b-slider-track"].getBoundingClientRect();this.#ie=!0,this["#b-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),"oklab"===this.#ze?e=.8*e-.4:"lab"===this.#ze&&(e=250*e-125),e!==this.#ye[2]&&(this.#ye[2]=e,this.#ei(),this.#ii(),this.#hi(),this.#di(),this.#mi(),this.#ci(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#b-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#b-slider"].addEventListener("pointerup",i=()=>{this["#b-slider"].removeEventListener("pointermove",e),this["#b-slider"].removeEventListener("pointerup",i),this["#b-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#b-slider"].addEventListener("pointercancel",i)}#Re(t){if(t.button>0||this.#ie)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#ie=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#Ce&&(this.#Ce=e,this.#Ve(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#ai(),this.#ei(),this.#ii(),this.#pi(),this.#hi(),this.#di(),this.#mi(),this.#ci(),this.#ui(),this.#Ve(),this.#Ge(),this.#Xe(),this.#Be()}#ai(){let[t,e,i]=this.#ye;"oklab"===this.#ze?this["#lightness-slider-marker"].style.left=100*t+"%":"lab"===this.#ze&&(this["#lightness-slider-marker"].style.left=t+"%")}#ei(){let t=[],[e,i,s]=this.#ye;if("oklab"===this.#ze)for(let e=0;e<=1;e+=.02)t.push({space:"oklab",coords:[e,i,s]});else if("lab"===this.#ze)for(let e=0;e<=100;e+=2)t.push({space:"lab",coords:[e,i,s]});t=t.map((t=>bi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${t.join(",")})`}#ii(){if("none"===this.#$e)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ye,a=null;for(let r=0;r<=e;r+=i){let i,o=r/e;"lab"===this.#ze?i={space:this.#ze,coords:[100*o,s,n]}:"oklab"===this.#ze&&(i={space:this.#ze,coords:[o,s,n]}),se(i,this.#$e)?(null===a&&(a=[],t.push(a)),a.push(100*o)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#pi(){let[t,e,i]=this.#ye;"oklab"===this.#ze?this["#a-slider-marker"].style.left=e<-.4?"calc(0% - 18px)":e>.4?"calc(100% + 18px)":(e+.4)/.8*100+"%":"lab"===this.#ze&&(this["#a-slider-marker"].style.left=e<-125?"calc(0% - 18px)":e>125?"calc(100% + 18px)":(e+125)/250*100+"%")}#hi(){let[t,,e]=this.#ye,i=[];if("oklab"===this.#ze)for(let s=-.4;s<=.4;s+=.05)i.push({space:"oklab",coords:[t,s,e]});else if("lab"===this.#ze)for(let s=-125;s<=125;s+=5)i.push({space:"lab",coords:[t,s,e]});i=i.map((t=>bi(t))),this["#a-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${i.join(",")})`}#di(){if("none"===this.#$e)this["#a-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#a-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#ye,a=null;for(let r=0;r<=e;r+=i){let i,o=r/e;"lab"===this.#ze?i={space:this.#ze,coords:[s,250*o-125,n]}:"oklab"===this.#ze&&(i={space:this.#ze,coords:[s,.8*o-.4,n]}),se(i,this.#$e)?(null===a&&(a=[],t.push(a)),a.push(100*o)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#a-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#a-slider-gamut-path"].removeAttribute("d")}}#mi(){let[t,e,i]=this.#ye;"oklab"===this.#ze?this["#b-slider-marker"].style.left=i<-.4?"calc(0% - 18px)":i>.4?"calc(100% + 18px)":(i+.4)/.8*100+"%":"lab"===this.#ze&&(this["#b-slider-marker"].style.left=i<-125?"calc(0% - 18px)":i>125?"calc(100% + 18px)":(i+125)/250*100+"%")}#ci(){let[t,e]=this.#ye,i=[];if("oklab"===this.#ze)for(let s=-.4;s<=.4;s+=.05)i.push({space:"oklab",coords:[t,e,s]});else if("lab"===this.#ze)for(let s=-125;s<=125;s+=5)i.push({space:"lab",coords:[t,e,s]});i=i.map((t=>bi(t))),this["#b-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${i.join(",")})`}#ui(){if("none"===this.#$e)this["#b-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#b-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#ye,a=null;for(let r=0;r<=e;r+=i){let i,o=r/e;"lab"===this.#ze?i={space:this.#ze,coords:[s,n,250*o-125]}:"oklab"===this.#ze&&(i={space:this.#ze,coords:[s,n,.8*o-.4]}),se(i,this.#$e)?(null===a&&(a=[],t.push(a)),a.push(100*o)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#b-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#b-slider-gamut-path"].removeAttribute("d")}}#Ve(){this["#alpha-slider-marker"].style.left=100*this.#Ce+"%"}#Ge(){let[t,e,i]=this.#ye,s=[{space:this.#ze,coords:[t,e,i],alpha:0},{space:this.#ze,coords:[t,e,i],alpha:1}];s=s.map((t=>bi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ze} to right, ${s.join(",")})`}#Xe(){if("none"===this.#$e)this["#a-slider-marker"].removeAttribute("data-warn"),this["#b-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{se({space:this.#ze,coords:this.#ye},this.#$e)?(this["#a-slider-marker"].removeAttribute("data-warn"),this["#b-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#a-slider-marker"].setAttribute("data-warn",""),this["#b-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#Be(){this["#a-slider-label"].hidden=!this.#Se,this["#b-slider-label"].hidden=!this.#Se,this["#lightness-slider-label"].hidden=!this.#Se,this["#alpha-slider-label"].hidden=!this.#Se}#Ie(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#$e;this["#labels-menu-item"].toggled=this.#Se}}void 0===customElements.get("x-lablinearsliders")&&customElements.define("x-lablinearsliders",ya);class Ca extends HTMLElement{static#z=Ns`<template><div id="x-slider" class="slider" part="slider"><div id="x-slider-track" class="slider-track"><svg id="x-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="x-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="x-slider-marker" class="slider-marker"><span id="x-slider-label" class="slider-label">X</span></div></div></div><div id="y-slider" class="slider" part="slider"><div id="y-slider-track" class="slider-track"><svg id="y-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="y-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="y-slider-marker" class="slider-marker"><span id="y-slider-label" class="slider-label">Y</span></div></div></div><div id="z-slider" class="slider" part="slider"><div id="z-slider-track" class="slider-track"><svg id="z-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="z-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="z-slider-marker" class="slider-marker"><span id="z-slider-label" class="slider-label">Z</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Fs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}.slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}
`;get value(){let[t,e,i]=this.#ye;return[t,e,i,this.#Ce]}set value([t,e,i,s]){this.#ye=[t,e,i],this.#Ce=s,this.#Xt()}get space(){return this.#ze}set space(t){this.#ze!==t&&(this.#ze=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#$t;#ie=!1;#ze="xyz-d65";#$e="srgb";#Se=!0;#ye=[0,0,0];#Ce=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(Ca.#z.content,!0)),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,Ca.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#x-slider"].addEventListener("pointerdown",(t=>this.#bi(t))),this["#y-slider"].addEventListener("pointerdown",(t=>this.#gi(t))),this["#z-slider"].addEventListener("pointerdown",(t=>this.#fi(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Re(t))),this["#context-menu"].addEventListener("click",(t=>this.#Pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#Te(t)))}connectedCallback(){this.#$e=Os(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#Se=Gn.getConfig("x-colorpicker:labels",!0),Gn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){Gn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Os(i||"srgb","color.js");t!==this.#$e&&(this.#$e=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#Se&&(this.#Se=t,this.#Be())}}#Pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#$e&&(this.#$e=e.value,this.#Xt(),Gn.setConfig("x-colorpicker:gamutHints",Os(this.#$e,"css"))):"labels"===e.value&&(this.#Se=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#Se),this.#Xt()))}#Te(){this.#Ie()}#bi(t){if(t.button>0||this.#ie)return;let e,i,s=this["#x-slider-track"].getBoundingClientRect();this.#ie=!0,this["#x-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#ye[0]&&(this.#ye[0]=e,this.#xi(),this.#wi(),this.#vi(),this.#ki(),this.#yi(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#x-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#x-slider"].addEventListener("pointerup",i=()=>{this["#x-slider"].removeEventListener("pointermove",e),this["#x-slider"].removeEventListener("pointerup",i),this["#x-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#x-slider"].addEventListener("pointercancel",i)}#gi(t){if(t.button>0||this.#ie)return;let e,i,s=this["#y-slider-track"].getBoundingClientRect();this.#ie=!0,this["#y-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#ye[1]&&(this.#ye[1]=e,this.#Ci(),this.#zi(),this.#Ei(),this.#wi(),this.#ki(),this.#yi(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#y-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#y-slider"].addEventListener("pointerup",i=()=>{this["#y-slider"].removeEventListener("pointermove",e),this["#y-slider"].removeEventListener("pointerup",i),this["#y-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#y-slider"].addEventListener("pointercancel",i)}#fi(t){if(t.button>0||this.#ie)return;let e,i,s=this["#z-slider-track"].getBoundingClientRect();this.#ie=!0,this["#z-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#ye[2]&&(this.#ye[2]=e,this.#Ci(),this.#zi(),this.#wi(),this.#vi(),this.#$i(),this.#ki(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#z-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#z-slider"].addEventListener("pointerup",i=()=>{this["#z-slider"].removeEventListener("pointermove",e),this["#z-slider"].removeEventListener("pointerup",i),this["#z-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#z-slider"].addEventListener("pointercancel",i)}#Re(t){if(t.button>0||this.#ie)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#ie=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#Ce&&(this.#Ce=e,this.#Ve(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#xi(),this.#Ci(),this.#zi(),this.#Ei(),this.#wi(),this.#vi(),this.#$i(),this.#ki(),this.#yi(),this.#Ve(),this.#Ge(),this.#Xe(),this.#Be()}#xi(){let[t]=this.#ye;this["#x-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#Ci(){let[,t,e]=this.#ye,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#ze,coords:[s,t,e]});i=i.map((t=>bi(t))),this["#x-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${i.join(",")})`}#zi(){if("none"===this.#$e)this["#x-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#x-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ye,a=null;for(let r=0;r<=e;r+=i){let i=r/e;se({space:this.#ze,coords:[i,s,n]},this.#$e)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#x-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#x-slider-gamut-path"].removeAttribute("d")}}#Ei(){let[,t]=this.#ye;this["#y-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#wi(){let[t,,e]=this.#ye,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#ze,coords:[t,s,e]});i=i.map((t=>bi(t))),this["#y-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${i.join(",")})`}#vi(){if("none"===this.#$e)this["#y-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#y-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#ye,a=null;for(let r=0;r<=e;r+=i){let i=r/e;se({space:this.#ze,coords:[s,i,n]},this.#$e)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#y-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#y-slider-gamut-path"].removeAttribute("d")}}#$i(){let[,,t]=this.#ye;this["#z-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#ki(){let[t,e]=this.#ye,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#ze,coords:[t,e,s]});i=i.map((t=>bi(t))),this["#z-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${i.join(",")})`}#yi(){if("none"===this.#$e)this["#z-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#z-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#ye,a=null;for(let r=0;r<=e;r+=i){let i=r/e;se({space:this.#ze,coords:[s,n,i]},this.#$e)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#z-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#z-slider-gamut-path"].removeAttribute("d")}}#Ve(){this["#alpha-slider-marker"].style.left=100*this.#Ce+"%"}#Ge(){let[t,e,i]=this.#ye,s=[{space:this.#ze,coords:[t,e,i],alpha:0},{space:this.#ze,coords:[t,e,i],alpha:1}];s=s.map((t=>bi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ze} to right, ${s.join(",")})`}#Xe(){if("none"===this.#$e)this["#x-slider-marker"].removeAttribute("data-warn"),this["#y-slider-marker"].removeAttribute("data-warn"),this["#z-slider-marker"].removeAttribute("data-warn");else{se({space:this.#ze,coords:this.#ye},this.#$e)?(this["#x-slider-marker"].removeAttribute("data-warn"),this["#y-slider-marker"].removeAttribute("data-warn"),this["#z-slider-marker"].removeAttribute("data-warn")):(this["#x-slider-marker"].setAttribute("data-warn",""),this["#y-slider-marker"].setAttribute("data-warn",""),this["#z-slider-marker"].setAttribute("data-warn",""))}}#Be(){this["#x-slider-label"].hidden=!this.#Se,this["#y-slider-label"].hidden=!this.#Se,this["#z-slider-label"].hidden=!this.#Se,this["#alpha-slider-label"].hidden=!this.#Se}#Ie(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#$e;this["#labels-menu-item"].toggled=this.#Se}}void 0===customElements.get("x-xyzlinearsliders")&&customElements.define("x-xyzlinearsliders",Ca);class za extends HTMLElement{static#z=Ns`<template><div id="hue-slider" part="slider"><div id="hue-slider-track"><svg id="hue-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path"></path></svg><div id="hue-slider-marker"><span id="hue-slider-label">H</span></div></div></div><div id="planar-slider" part="slider"><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Fs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}#hue-slider{width:100%;height:35px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}#hue-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#hue-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#hue-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}#hue-slider-gamut-svg{width:100%;height:100%}#hue-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#hue-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0%;left:0%;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size) / -2), calc(var(--marker-size) / -2));background:rgba(0, 0, 0, 0.3);border:3px solid white;border-radius:999px;box-shadow:0 0 3px black;--marker-size: 20px;}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255, 255, 255, 0.9);font-size:1.125rem;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-gamut-svg{width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}
`;get value(){if("hsv"===this.#Ee||"hsl"===this.#Ee){let[t,e,i]=this.#ye,[s,n,a]=mi({space:this.#Ee,coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#Ce]}}set value([t,e,i,s]){if("hsv"===this.#Ee||"hsl"===this.#Ee){let[n,a,r]=mi({space:"srgb",coords:[t,e,i]},this.#Ee).coords;this.#ye=[n/360,a/100,r/100],this.#Ce=s}for(let t=0;t<this.#ye.length;t+=1)(null===this.#ye[t]||ga(this.#ye[t]))&&(this.#ye[t]=0);this.#Xt()}get space(){return this.#ze}set space(t){this.#ze!==t&&(this.#ze=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#$t;#Si=new ResizeObserver((()=>this.#Mi()));#ie=!1;#ze="srgb";#Ee="hsv";#$e="srgb";#Se=!0;#ye=[0,0,0];#Ce=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(za.#z.content,!0)),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,za.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#qe(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#Li(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Re(t))),this["#context-menu"].addEventListener("click",(t=>this.#Pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#Te(t)))}connectedCallback(){this.#Ee=Gn.getConfig(`${this.localName}:model`,"hsv"),this.#$e=Os(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#Se=Gn.getConfig("x-colorpicker:labels",!0),this.#Si.observe(this),Gn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){this.#Si.unobserve(this),Gn.removeEventListener("configchange",this.#$t)}#De(){return"none"===this.#$e||"srgb"===this.#$e&&["srgb","srgb-linear"].includes(this.#ze)||"p3"===this.#$e&&["srgb","srgb-linear","p3"].includes(this.#ze)||"a98rgb"===this.#$e&&["srgb","srgb-linear","a98rgb"].includes(this.#ze)||"rec2020"===this.#$e&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#ze)||"prophoto"===this.#$e?"none":this.#$e}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#Ee){let[e,i,s]=this.value;this.#Ee=t,this.value=[e,i,s,this.#Ce]}}else if("x-colorpicker:gamutHints"===e){let t=Os(i||"srgb","color.js");t!==this.#$e&&(this.#$e=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#Se&&(this.#Se=t,this.#Be())}}#Pe(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#gamut-hints-menu"])e.value!==this.#$e&&(this.#$e=e.value,this.#Xt(),Gn.setConfig("x-colorpicker:gamutHints",Os(this.#$e,"css")));else if(e.parentElement===this["#color-model-menu"]){if(e.value!==this.#Ee){let[t,i,s]=this.value;this.#Ee=e.value,this.value=[t,i,s,this.#Ce],Gn.setConfig(`${this.localName}:model`,e.value)}}else"labels"===e.value&&(this.#Se=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#Se),this.#Xt())}#Te(){this.#Ie()}#Mi(){this.#Ai()}#qe(t){if(t.button>0||this.#ie)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#ie=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this["#planar-slider-gamut-path"].style.transition="d 60ms ease",this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#ye[0]&&(this.#ye[0]=e,this.#Je(),this.#si(),this.#Ri(),this.#Pi(),this.#Ai(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this["#planar-slider-gamut-path"].style.transition="none",this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#Li(t){if(t.button>0||this.#ie)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#ie=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;if(i=ki(i,0,1),n=ki(n,0,1),"hsv"===this.#Ee){let[t,e,s]=this.#ye;e=i,s=1-n,this.#ye=[t,e,s]}else if("hsl"===this.#Ee){let[t,e,s]=this.#ye;e=i,s=1-n,this.#ye=[t,e,s]}this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#si(),this.#Ri(),this.#Ge(),this.#Xe()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#Re(t){if(t.button>0||this.#ie)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#ie=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#Ce&&(this.#Ce=e,this.#Ve(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#Je(),this.#ri(),this.#si(),this.#Ri(),this.#Pi(),this.#Ti(),this.#Ve(),this.#Ge(),this.#Xe(),this.#Be()}#Je(){if("hsv"===this.#Ee||"hsl"===this.#Ee){let[t]=this.#ye;this["#hue-slider-marker"].style.left=100*t+"%"}}#ri(){if("hsv"===this.#Ee||"hsl"===this.#Ee){let t="srgb-linear"===this.#ze?"srgb-linear":"srgb",e=[{space:this.#ze,coords:[1,0,0]},{space:this.#ze,coords:[1,1,0]},{space:this.#ze,coords:[0,1,0]},{space:this.#ze,coords:[0,1,1]},{space:this.#ze,coords:[0,0,1]},{space:this.#ze,coords:[1,0,1]},{space:this.#ze,coords:[1,0,0]}];e=e.map((t=>bi(t))).join(","),this["#hue-slider"].style.background=`linear-gradient(in ${t} to right, ${e})`}}#si(){let t=this.#De();if("none"===t)this["#hue-slider-gamut-path"].removeAttribute("d");else if("hsv"===this.#Ee||"hsl"===this.#Ee){let[e,i,s]=this.#ye,n=this["#hue-slider"].clientWidth,a=1/window.devicePixelRatio,r=[];{let e=null;for(let o=0;o<=n;o+=a){let a=o/n;se({space:this.#ze,coords:mi({space:this.#Ee,coords:[360*a,100*i,100*s]},"srgb").coords},t)?(null===e&&(e=[],r.push(e)),e.push(100*a)):e=null}r=r.map((t=>[t.at(0),t.at(-1)]))}if(r.length>0){let t=r.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#Ri(){if("hsv"===this.#Ee||"hsl"===this.#Ee){let[t,e,i]=this.#ye,s=100*e,n=100-100*i;this["#planar-slider-marker"].style.left=`${s}%`,this["#planar-slider-marker"].style.top=`${n}%`}}#Pi(){let[t]=this.#ye,e="srgb-linear"===this.#ze?"srgb-linear":"srgb",i="srgb-linear"===this.#ze?"srgb":this.#ze;if("hsv"===this.#Ee){let s=[{space:this.#ze,coords:mi({space:"hsv",coords:[360*t,0,100]},i).coords},{space:this.#ze,coords:mi({space:"hsv",coords:[360*t,100,100]},i).coords}],n=[{space:this.#ze,coords:mi({space:"hsv",coords:[360*t,0,100]},i).coords},{space:this.#ze,coords:mi({space:"hsv",coords:[360*t,0,0]},i).coords}];this["#planar-slider"].style.background=`\n        linear-gradient(in ${e} to bottom, ${n.map((t=>bi(t))).join(",")}),\n        linear-gradient(in ${e} to right,  ${s.map((t=>bi(t))).join(",")})\n      `,this["#planar-slider"].style.backgroundBlendMode="multiply, normal"}else if("hsl"===this.#Ee){let s=[{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,0,50]},i).coords},{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,100,50]},i).coords}],n=[{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,0,0]},i).coords}],a=[{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,0,0]},i).coords,alpha:0},{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,0,0]},i).coords,alpha:0}];s=s.map((t=>bi(t))),n=n.map((t=>bi(t))),a=a.map((t=>bi(t))),this["#planar-slider"].style.background=`\n        linear-gradient(in ${e} to bottom, ${a.join(",")}),\n        linear-gradient(in ${e} to bottom, ${n.join(",")}),\n        linear-gradient(in ${e} to right, ${s.join(",")})\n      `,this["#planar-slider"].style.backgroundBlendMode="normal, multiply, normal"}}#Ti(){let t=this.#De();if("none"===t)this["#planar-slider-gamut-path"].removeAttribute("d");else{let e=this["#planar-slider"].clientWidth,i=this["#planar-slider"].clientHeight,s=1/window.devicePixelRatio,[n]=this.#ye,a=[],r=(e,i,s)=>se({space:this.#ze,coords:mi({space:this.#Ee,coords:[360*e,100*i,100*s]},"srgb").coords},t);if("hsv"===this.#Ee){let t=0;for(let o=0;o<i;o+=s)for(;t<=e;){if(!1===r(n,t/e,1-o/i)){a.push([t,o]);break}t+=s}a.length>0&&a.at(-1)[0]<e&&a.push([e,a.at(-1)[1]])}else if("hsl"===this.#Ee)for(let t=0;t<i;t+=s){let o=e;for(;o>=0&&!r(n,o/e,1-t/i);)o-=10;let l=ma(o+10,e);for(;o<=l&&(o+=s,!1!==r(n,o/e,1-t/i)););a.push([o,t])}if(0===a.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=a.map((([t,e],i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ");this["#planar-slider-gamut-path"].setAttribute("d",t),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${e} ${i}`)}}}#Ai=Fn(this.#Ti,40,this);#Ve(){this["#alpha-slider-marker"].style.left=100*this.#Ce+"%"}#Ge(){if("hsv"===this.#Ee||"hsl"===this.#Ee){let[t,e,i]=this.#ye,s="srgb-linear"===this.#ze?"srgb":this.#ze,n=[{space:this.#ze,coords:mi({space:this.#Ee,coords:[360*t,100*e,100*i]},s).coords,alpha:0},{space:this.#ze,coords:mi({space:this.#Ee,coords:[360*t,100*e,100*i]},s).coords,alpha:1}];n=n.map((t=>bi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(in srgb to right, ${n})`}}#Xe(){let t=this.#De();if("none"===t)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else if("hsv"===this.#Ee||"hsl"===this.#Ee){let[e,i,s]=this.#ye;se({space:this.#ze,coords:mi({space:this.#Ee,coords:[360*e,100*i,100*s]},"srgb").coords},t)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#Be(){this["#hue-slider-label"].hidden=!this.#Se,this["#alpha-slider-label"].hidden=!this.#Se}#Ie(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#Ee;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#$e;this["#labels-menu-item"].toggled=this.#Se}}void 0===customElements.get("x-rgbplanarsliders")&&customElements.define("x-rgbplanarsliders",za);class Ea extends HTMLElement{static#z=Ns`<template><div id="hue-slider" part="slider"><div id="hue-slider-track"><svg id="hue-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path"></path></svg><div id="hue-slider-marker"><span id="hue-slider-label">H</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Fs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}#hue-slider{width:100%;height:35px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}#hue-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#hue-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#hue-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}#hue-slider-gamut-svg{width:100%;height:100%}#hue-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#hue-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0%;left:0%;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size) / -2), calc(var(--marker-size) / -2));background:rgba(0, 0, 0, 0.3);border:3px solid white;border-radius:999px;box-shadow:0 0 3px black;--marker-size: 20px;}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255, 255, 255, 0.9);font-size:1.125rem;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%;overflow:hidden;border-radius:inherit}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}
`;get value(){let[t,e,i]=this.#ye;return[t,e,i,this.#Ce]}set value([t,e,i,s]){this.#ye=[t,e,i],this.#Ce=s,this.#Xt()}get space(){return this.#ze}set space(t){this.#ze!==t&&(this.#ze=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#$t;#Si=new ResizeObserver((()=>this.#Mi()));#ie=!1;#ze="lch";#$e="srgb";#Se=!0;#ye=[0,0,0];#Ce=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(Ea.#z.content,!0)),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,Ea.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#qe(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#Li(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Re(t))),this["#context-menu"].addEventListener("click",(t=>this.#Pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#Te(t)))}connectedCallback(){this.#$e=Os(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#Se=Gn.getConfig("x-colorpicker:labels",!0),this.#Si.observe(this),Gn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){this.#Si.unobserve(this),Gn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Os(i||"srgb","color.js");t!==this.#$e&&(this.#$e=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#Se&&(this.#Se=t,this.#Be())}}#Pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#$e&&(this.#$e=e.value,this.#Xt(),Gn.setConfig("x-colorpicker:gamutHints",Os(this.#$e,"css"))):"labels"===e.value&&(this.#Se=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#Se),this.#Xt()))}#Te(){this.#Ie()}#Mi(){this.#Ai()}#qe(t){if(t.button>0||this.#ie)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#ie=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this["#planar-slider-gamut-path"].style.transition="d 60ms ease",this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),360*e!==this.#ye[2]&&(this.#ye[2]=360*e,this.#Je(),this.#si(),this.#Ri(),this.#Pi(),this.#Ai(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this["#planar-slider-gamut-path"].style.transition="none",this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#Li(t){if(t.button>0||this.#ie)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#ie=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=ki(i,0,1),n=ki(n,0,1);let[a,r,o]=this.#ye;"lch"===this.#ze?(a=100*i,r=(1-n)*fa):"oklch"===this.#ze&&(a=i,r=(1-n)*xa),this.#ye=[a,r,o],this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#si(),this.#Ri(),this.#Ge(),this.#Xe()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#Re(t){if(t.button>0||this.#ie)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#ie=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#Ce&&(this.#Ce=e,this.#Ve(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#Je(),this.#ri(),this.#si(),this.#Ri(),this.#Pi(),this.#Ti(),this.#Ve(),this.#Ge(),this.#Xe(),this.#Be()}#Je(){let[t,e,i]=this.#ye;this["#hue-slider-marker"].style.left=i/360*100+"%"}#ri(){let t=[];if("oklch"===this.#ze)for(let e=0;e<=360;e+=5)t.push({space:"oklch",coords:[.8,xa,e]});else if("lch"===this.#ze)for(let e=0;e<=360;e+=5)t.push({space:"lch",coords:[75,fa,e]});t=t.map((t=>bi(t))),this["#hue-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${t.join(",")})`}#si(){if("none"===this.#$e)this["#hue-slider-gamut-path"].removeAttribute("d");else{let[t,e]=this.#ye,i=this["#hue-slider"].clientWidth,s=1/window.devicePixelRatio,n=[];{let a=null;for(let r=0;r<=i;r+=s){let s,o=r/i;"lch"===this.#ze?s={space:"lch",coords:[t,e,360*o]}:"oklch"===this.#ze&&(s={space:"oklch",coords:[t,e,360*o]}),se(s,this.#$e)?(null===a&&(a=[],n.push(a)),a.push(100*o)):a=null}n=n.map((t=>[t.at(0),t.at(-1)]))}if(n.length>0){let t=n.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#Ri(){if("lch"===this.#ze){let[t,e]=this.#ye,i=t,s=100-e/fa*100;this["#planar-slider-marker"].style.left=`${i}%`,this["#planar-slider-marker"].style.top=`${s}%`}else if("oklch"===this.#ze){let[t,e]=this.#ye,i=100*t,s=100-e/xa*100;this["#planar-slider-marker"].style.left=`${i}%`,this["#planar-slider-marker"].style.top=`${s}%`}}#Pi(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[,,n]=this.#ye;e.clearRect(0,0,t.width,t.height);for(let t=0;t<=i;t+=1){let a=[];for(let e=0;e<=s;e+=10){let r,o=t/i,l=1-e/s;"lch"===this.#ze?r={space:"lch",coords:[100*o,l*fa,n]}:"oklch"===this.#ze&&(r={space:"oklch",coords:[o,l*xa,n]}),a.push(r)}let r=e.createLinearGradient(t,0,i,s);for(let t=0;t<a.length;t+=1){let e=a[t];r.addColorStop(t/a.length,bi(e))}e.fillStyle=r,e.fillRect(t,0,1,s)}}#Ti(){if("none"===this.#$e)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this.clientWidth,e=this.clientHeight,i=1/window.devicePixelRatio,[,,s]=this.#ye,n=[],a=(t,e,i)=>{let s;return"lch"===this.#ze?s={space:"lch",coords:[100*t,e*fa,i]}:"oklch"===this.#ze&&(s={space:"oklch",coords:[t,e*xa,i]}),se(s,this.#$e)};for(let r=0;r<=t;r+=i){let o=e;for(;o>=0&&a(r/t,1-o/e,s);)o-=10;let l=ba(o+10,e);for(;o<=l&&(o+=i,!a(r/t,1-o/e,s)););n.push([r,o])}if(0===n.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=n.map((([t,e],i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ");this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#Ai=Fn(this.#Ti,40,this);#Ve(){this["#alpha-slider-marker"].style.left=100*this.#Ce+"%"}#Ge(){let[t,e,i]=this.#ye,s=[{space:this.#ze,coords:[t,e,i],alpha:0},{space:this.#ze,coords:[t,e,i],alpha:1}];s=s.map((t=>bi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ze} to right, ${s.join(",")})`}#Xe(){if("none"===this.#$e)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else{se({space:this.#ze,coords:[...this.#ye]},this.#$e)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#Be(){this["#hue-slider-label"].hidden=!this.#Se,this["#alpha-slider-label"].hidden=!this.#Se}#Ie(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#$e;this["#labels-menu-item"].toggled=this.#Se}}void 0===customElements.get("x-lchplanarsliders")&&customElements.define("x-lchplanarsliders",Ea);class $a extends HTMLElement{static#z=Ns`<template><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Fs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}#lightness-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}#lightness-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#lightness-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#lightness-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}#lightness-slider-gamut-svg{width:100%;height:100%}#lightness-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#lightness-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0%;left:0%;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size) / -2), calc(var(--marker-size) / -2));background:rgba(0, 0, 0, 0.3);border:3px solid white;border-radius:999px;box-shadow:0 0 3px black;--marker-size: 20px;}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255, 255, 255, 0.9);font-size:1.125rem;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%;overflow:hidden;border-radius:inherit}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}
`;get value(){let[t,e,i]=this.#ye;return[t,e,i,this.#Ce]}set value([t,e,i,s]){this.#ye=[t,e,i],this.#Ce=s,this.#Xt()}get space(){return this.#ze}set space(t){this.#ze!==t&&(this.#ze=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#$t;#Si=new ResizeObserver((()=>this.#Mi()));#ie=!1;#ze="lab";#$e="srgb";#Se=!0;#ye=[0,0,0];#Ce=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode($a.#z.content,!0)),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,$a.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#Ke(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#Li(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Re(t))),this["#context-menu"].addEventListener("click",(t=>this.#Pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#Te(t)))}connectedCallback(){this.#$e=Os(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#Se=Gn.getConfig("x-colorpicker:labels",!0),this.#Si.observe(this),Gn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){this.#Si.unobserve(this),Gn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Os(i||"srgb","color.js");t!==this.#$e&&(this.#$e=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#Se&&(this.#Se=t,this.#Be())}}#Pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#$e&&(this.#$e=e.value,this.#Xt(),Gn.setConfig("x-colorpicker:gamutHints",Os(this.#$e,"css"))):"labels"===e.value&&(this.#Se=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#Se),this.#Xt()))}#Te(){this.#Ie()}#Mi(){this.#Ai()}#Ke(t){if(t.button>0||this.#ie)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#ie=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklab"===this.#ze?e=ki(e,0,1):"lab"===this.#ze&&(e=ki(100*e,0,100)),e!==this.#ye[0]&&(this.#ye[0]=e,this.#ai(),this.#Ai(),this.#Pi(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#Li(t){if(t.button>0||this.#ie)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#ie=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=ki(i,0,1),n=ki(n,0,1);let[a,r,o]=this.#ye;"lab"===this.#ze?(r=250*i-125,o=250*(1-n)-125):"oklab"===this.#ze&&(r=.8*i-.4,o=.8*(1-n)-.4),this.#ye=[a,r,o],this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ri(),this.#ei(),this.#ii(),this.#Ge(),this.#Xe()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#Re(t){if(t.button>0||this.#ie)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#ie=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#Ce&&(this.#Ce=e,this.#Ve(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#Ri(),this.#Pi(),this.#Ti(),this.#ai(),this.#ei(),this.#ii(),this.#Ve(),this.#Ge(),this.#Xe(),this.#Be()}#Ri(){let t,e,[i,s,n]=this.#ye;"lab"===this.#ze?(t=s<-125?"calc(0% - 18px)":s>125?"calc(100% + 18px)":(s+125)/250*100+"%",e=n<-125?"calc(0% - 18px)":n>125?"calc(100% + 18px)":100-(n+125)/250*100+"%"):"oklab"===this.#ze&&(t=s<-.4?"calc(0% - 18px)":s>.4?"calc(100% + 18px)":(s+.4)/.8*100+"%",e=n<-.4?"calc(0% - 18px)":n>.4?"calc(100% + 18px)":100-(n+.4)/.8*100+"%"),this["#planar-slider-marker"].style.left=t,this["#planar-slider-marker"].style.top=e}#Pi(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[n]=this.#ye;e.clearRect(0,0,i,s);for(let t=0;t<=i;t+=1){let a=[];for(let e=0;e<=s;e+=10){let r,o=t/i,l=1-e/s;"lab"===this.#ze?r={space:"lab",coords:[n,250*o-125,250*l-125]}:"oklab"===this.#ze&&(r={space:"oklab",coords:[n,.8*o-.4,.8*l-.4]}),a.push(r)}let r=e.createLinearGradient(t,0,i,s);for(let t=0;t<a.length;t+=1){let e=a[t];r.addColorStop(t/a.length,bi(e))}e.fillStyle=r,e.fillRect(t,0,1,s)}}#Ti(){if("none"===this.#$e)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this["#planar-slider-gamut-svg"].clientWidth,e=this["#planar-slider-gamut-svg"].clientHeight,i=pa(ca(t/2,2)+ca(e/2,2)),s={x:t/2,y:e/2},[n,a,r]=this.#ye,o=[];for(let a=0;a<360;a+=3){let r;for(let o=i;o>=0;o-=15){let i,l,h=$i({x:t/2,y:e/2-o},s,a);if("lab"===this.#ze?(i=h.x/t*250-125,l=-(h.y/e*250-125)):"oklab"===this.#ze&&(i=h.x/t*.8-.4,l=-(h.y/e*.8-.4)),se({space:this.#ze,coords:[n,i,l]},this.#$e)){r=o;break}}for(let l=r;l<=i;l+=1){let i,r,h=$i({x:t/2,y:e/2-l},s,a);if("lab"===this.#ze?(i=h.x/t*250-125,r=-(h.y/e*250-125)):"oklab"===this.#ze&&(i=h.x/t*.8-.4,r=-(h.y/e*.8-.4)),!1===se({space:this.#ze,coords:[n,i,r]},this.#$e)){o.push(h);break}}}if(0===o.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=o.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#Ai=Fn(this.#Ti,40,this);#ai(){let[t,e,i]=this.#ye;"oklab"===this.#ze?this["#lightness-slider-marker"].style.left=100*t+"%":"lab"===this.#ze&&(this["#lightness-slider-marker"].style.left=t+"%")}#ei(){let[,t,e]=this.#ye,i=[];if("oklab"===this.#ze)for(let s=0;s<=1;s+=.02)i.push({space:"oklab",coords:[s,t,e]});else if("lab"===this.#ze)for(let s=0;s<=100;s+=2)i.push({space:"lab",coords:[s,t,e]});i=i.map((t=>bi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${i.join(",")})`}#ii(){if("none"===this.#$e)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ye,a=null;for(let r=0;r<=e;r+=i){let i,o=r/e;"lab"===this.#ze?i={space:this.#ze,coords:[100*o,s,n]}:"oklab"===this.#ze&&(i={space:this.#ze,coords:[o,s,n]}),se(i,this.#$e)?(null===a&&(a=[],t.push(a)),a.push(100*o)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#Ve(){this["#alpha-slider-marker"].style.left=100*this.#Ce+"%"}#Ge(){let[t,e,i]=this.#ye,s=[{space:this.#ze,coords:[t,e,i],alpha:0},{space:this.#ze,coords:[t,e,i],alpha:1}];s=s.map((t=>bi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ze} to right, ${s.join(",")})`}#Xe(){if("none"===this.#$e)this["#planar-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{se({space:this.#ze,coords:[...this.#ye]},this.#$e)?(this["#planar-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#planar-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#Be(){this["#lightness-slider-label"].hidden=!this.#Se,this["#alpha-slider-label"].hidden=!this.#Se}#Ie(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#$e;this["#labels-menu-item"].toggled=this.#Se}}void 0===customElements.get("x-labplanarsliders")&&customElements.define("x-labplanarsliders",$a);class Sa extends HTMLElement{static#z=Ns`<template><div id="linear-slider" class="slider" part="slider"><div id="linear-slider-track" class="slider-track"><svg id="linear-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="linear-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="linear-slider-marker" class="slider-marker"><span id="linear-slider-label" class="slider-label">L</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="x-zy"><x-label>X-ZY</x-label></x-menuitem><x-menuitem value="y-xz"><x-label>Y-XZ</x-label></x-menuitem><x-menuitem value="z-xy"><x-label>Z-XY</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Fs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}#linear-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}#linear-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#linear-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#linear-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}#linear-slider-gamut-svg{width:100%;height:100%}#linear-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#linear-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0%;left:0%;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size) / -2), calc(var(--marker-size) / -2));background:rgba(0, 0, 0, 0.3);border:3px solid white;border-radius:999px;box-shadow:0 0 3px black;--marker-size: 20px;}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255, 255, 255, 0.9);font-size:1.125rem;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%;overflow:hidden;border-radius:inherit}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}
`;get value(){let[t,e,i]=this.#ye;return[t,e,i,this.#Ce]}set value([t,e,i,s]){this.#ye=[t,e,i],this.#Ce=s,this.#Xt()}get space(){return this.#ze}set space(t){this.#ze!==t&&(this.#ze=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#$t;#Si=new ResizeObserver((()=>this.#Mi()));#ie=!1;#ze="xyz-d65";#Ee="x-zy";#$e="srgb";#Se=!0;#ye=[0,0,0];#Ce=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(Sa.#z.content,!0)),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,Sa.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#planar-slider"].addEventListener("pointerdown",(t=>this.#Li(t))),this["#linear-slider"].addEventListener("pointerdown",(t=>this.#Di(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Re(t))),this["#context-menu"].addEventListener("click",(t=>this.#Pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#Te(t)))}connectedCallback(){this.#Ee=Gn.getConfig(`${this.localName}:model`,"x-zy"),this.#$e=Os(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#Se=Gn.getConfig("x-colorpicker:labels",!0),this.#Si.observe(this),Gn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){this.#Si.unobserve(this),Gn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"x-zy";t!==this.#Ee&&(this.#Ee=t,this.#Xt())}else if("x-colorpicker:gamutHints"===e){let t=Os(i||"srgb","color.js");t!==this.#$e&&(this.#$e=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#Se&&(this.#Se=t,this.#Be())}}#Pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#color-model-menu"]?e.value!==this.#Ee&&(this.#Ee=e.value,this.#Xt(),Gn.setConfig(`${this.localName}:model`,e.value)):e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#$e&&(this.#$e=e.value,this.#Xt(),Gn.setConfig("x-colorpicker:gamutHints",Os(this.#$e,"css"))):"labels"===e.value&&(this.#Se=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#Se),this.#Xt()))}#Te(){this.#Ie()}#Mi(){this.#Ai()}#Di(t){if(t.button>0||this.#ie)return;let e,i,s=this["#linear-slider-track"].getBoundingClientRect();this.#ie=!0,this["#linear-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e,i=(t-s.x)/s.width;i=ki(i,0,1),"x-zy"===this.#Ee?e=0:"y-xz"===this.#Ee?e=1:"z-xy"===this.#Ee&&(e=2),i!==this.#ye[e]&&(this.#ye[e]=i,this.#Pi(),this.#Ai(),this.#Bi(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#linear-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#linear-slider"].addEventListener("pointerup",i=()=>{this["#linear-slider"].removeEventListener("pointermove",e),this["#linear-slider"].removeEventListener("pointerup",i),this["#linear-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#linear-slider"].addEventListener("pointercancel",i)}#Li(t){if(t.button>0||this.#ie)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#ie=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=ki(i,0,1),n=ki(n,0,1);let[a,r,o]=this.#ye;"x-zy"===this.#Ee?this.#ye=[a,n,i]:"y-xz"===this.#Ee?this.#ye=[i,r,n]:"z-xy"===this.#Ee&&(this.#ye=[i,n,o]),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ri(),this.#Ii(),this.#Oi(),this.#Ge(),this.#Xe()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#Re(t){if(t.button>0||this.#ie)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#ie=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#Ce&&(this.#Ce=e,this.#Ve(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#Bi(),this.#Ii(),this.#Oi(),this.#Ri(),this.#Pi(),this.#Ti(),this.#Ve(),this.#Ge(),this.#Xe(),this.#Be()}#Bi(){let[t,e,i]=this.#ye;"x-zy"===this.#Ee?this["#linear-slider-marker"].style.left=100*t+"%":"y-xz"===this.#Ee?this["#linear-slider-marker"].style.left=100*e+"%":"z-xy"===this.#Ee&&(this["#linear-slider-marker"].style.left=100*i+"%")}#Ii(){let[t,e,i]=this.#ye,s=[];if("x-zy"===this.#Ee)for(let t=0;t<=1;t+=.02)s.push({space:this.#ze,coords:[t,e,i]});else if("y-xz"===this.#Ee)for(let e=0;e<=1;e+=.02)s.push({space:this.#ze,coords:[t,e,i]});else if("z-xy"===this.#Ee)for(let i=0;i<=1;i+=.02)s.push({space:this.#ze,coords:[t,e,i]});s=s.map((t=>bi(t))),this["#linear-slider"].style.background=`linear-gradient(in ${this.#ze} to right, ${s.join(",")})`}#Oi(){if("none"===this.#$e)this["#linear-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#linear-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n,a]=this.#ye,r=null;for(let o=0;o<=e;o+=i){let i,l=o/e;"x-zy"===this.#Ee?i={space:this.#ze,coords:[l,n,a]}:"y-xz"===this.#Ee?i={space:this.#ze,coords:[s,l,a]}:"z-xy"===this.#Ee&&(i={space:this.#ze,coords:[s,n,l]}),se(i,this.#$e)?(null===r&&(r=[],t.push(r)),r.push(100*l)):r=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#linear-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#linear-slider-gamut-path"].removeAttribute("d")}}#Ri(){let t,e,[i,s,n]=this.#ye;"x-zy"===this.#Ee?(t=n<0?"calc(0% - 18px)":n>1?"calc(100% + 18px)":100*n+"%",e=s<0?"calc(0% - 18px)":s>1?"calc(100% + 18px)":100*s+"%"):"y-xz"===this.#Ee?(t=i<0?"calc(0% - 18px)":i>1?"calc(100% + 18px)":100*i+"%",e=n<0?"calc(0% - 18px)":n>1?"calc(100% + 18px)":100*n+"%"):"z-xy"===this.#Ee&&(t=i<0?"calc(0% - 18px)":i>1?"calc(100% + 18px)":100*i+"%",e=s<0?"calc(0% - 18px)":s>1?"calc(100% + 18px)":100*s+"%"),this["#planar-slider-marker"].style.left=t,this["#planar-slider-marker"].style.top=e}#Pi(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[n,a,r]=this.#ye;e.clearRect(0,0,i,s);for(let t=0;t<=i;t+=1){let o=[];for(let e=0;e<=s;e+=10){let l;if("x-zy"===this.#Ee){let a=t/i,r=e/s;l={space:this.#ze,coords:[n,r,a]}}else if("y-xz"===this.#Ee){let n=t/i,r=e/s;l={space:this.#ze,coords:[n,a,r]}}else if("z-xy"===this.#Ee){let n=t/i,a=e/s;l={space:this.#ze,coords:[n,a,r]}}o.push(l)}let l=e.createLinearGradient(t,0,i,s);for(let t=0;t<o.length;t+=1){let e=o[t];l.addColorStop(t/o.length,bi(e))}e.fillStyle=l,e.fillRect(t,0,1,s)}}#Ti(){if("none"===this.#$e)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this["#planar-slider-gamut-svg"].clientWidth,e=this["#planar-slider-gamut-svg"].clientHeight,i=pa(ca(t/2,2)+ca(e/2,2)),s={x:t/2,y:e/2},n=[];for(let a=0;a<360;a+=3){let r,[o,l,h]=this.#ye;for(let n=i;n>=0;n-=15){let i=$i({x:t/2,y:e/2-n},s,a);if("x-zy"===this.#Ee?(h=i.x/t,l=i.y/e):"y-xz"===this.#Ee?(o=i.x/t,h=i.y/e):"z-xy"===this.#Ee&&(o=i.x/t,l=i.y/e),se({space:this.#ze,coords:[o,l,h]},this.#$e)){r=n;break}}for(let o=r;o<=i;o+=1){let i=$i({x:t/2,y:e/2-o},s,a),[r,l,h]=this.#ye;if("x-zy"===this.#Ee?(h=i.x/t,l=i.y/e):"y-xz"===this.#Ee?(r=i.x/t,h=i.y/e):"z-xy"===this.#Ee&&(r=i.x/t,l=i.y/e),!1===se({space:this.#ze,coords:[r,l,h]},this.#$e)){n.push(i);break}}}if(0===n.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=n.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#Ai=Fn(this.#Ti,40,this);#Ve(){this["#alpha-slider-marker"].style.left=100*this.#Ce+"%"}#Ge(){let[t,e,i]=this.#ye,s=[{space:this.#ze,coords:[t,e,i],alpha:0},{space:this.#ze,coords:[t,e,i],alpha:1}];s=s.map((t=>bi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ze} to right, ${s.join(",")})`}#Xe(){if("none"===this.#$e)this["#linear-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else{se({space:this.#ze,coords:[...this.#ye]},this.#$e)?(this["#linear-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#linear-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#Be(){this["#linear-slider-label"].hidden=!this.#Se,this["#linear-slider-label"].textContent=this.#Ee[0].toUpperCase(),this["#alpha-slider-label"].hidden=!this.#Se}#Ie(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#Ee;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#$e;this["#labels-menu-item"].toggled=this.#Se}}void 0===customElements.get("x-xyzplanarsliders")&&customElements.define("x-xyzplanarsliders",Sa);class Ma extends HTMLElement{static#z=Ns`<template><div id="polar-slider" part="slider"><div id="polar-slider-circle"><canvas id="polar-slider-canvas" width="100" height="100"></canvas><svg id="polar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="polar-slider-gamut-path"></path></svg><div id="polar-slider-marker"></div></div></div><div id="linear-slider" part="slider"><div id="linear-slider-track"><div id="linear-slider-marker"><span id="linear-slider-label"></span></div><svg id="linear-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="linear-slider-gamut-path"></path></svg></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">H</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Fs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}#polar-slider{display:flex;align-items:center;width:100%;max-width:200px;height:200px;margin:0 auto}#polar-slider-circle{touch-action:pinch-zoom;position:relative;width:100%;height:fit-content;aspect-ratio:1 / 1;border-radius:999px!important}#polar-slider-marker{position:absolute;top:0%;left:0%;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size) / -2), calc(var(--marker-size) / -2));background:rgba(0, 0, 0, 0.3);border:3px solid white;border-radius:999px;box-shadow:0 0 3px black;--marker-size: 20px;}#polar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255, 255, 255, 0.9);font-size:1.125rem;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#polar-slider-canvas{position:absolute;width:100%;height:100%;border-radius:9999px}#polar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%;transform:rotate(-90deg)}#polar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#linear-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}#linear-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#linear-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#linear-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}#linear-slider-gamut-svg{width:100%;height:100%}#linear-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#linear-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}
`;get value(){if("hsv"===this.#Ee||"hsl"===this.#Ee){let[t,e,i]=this.#ye,[s,n,a]=mi({space:this.#Ee,coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#Ce]}}set value([t,e,i,s]){if("hsv"===this.#Ee||"hsl"===this.#Ee){let[n,a,r]=mi({space:"srgb",coords:[t,e,i]},this.#Ee).coords;this.#ye=[n/360,a/100,r/100],this.#Ce=s}for(let t=0;t<this.#ye.length;t+=1)(null===this.#ye[t]||ga(this.#ye[t]))&&(this.#ye[t]=0);this.#Xt()}get space(){return this.#ze}set space(t){this.#ze!==t&&(this.#ze=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#$t;#Si=new ResizeObserver((()=>this.#Mi()));#ie=!1;#ze="srgb";#Ee="hsv";#$e="srgb";#Se=!0;#ye=[0,0,0];#Ce=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(Ma.#z.content,!0)),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,Ma.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#polar-slider"].addEventListener("pointerdown",(t=>this.#Hi(t))),this["#linear-slider"].addEventListener("pointerdown",(t=>this.#Di(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Re(t))),this["#context-menu"].addEventListener("click",(t=>this.#Pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#Te(t)))}connectedCallback(){this.#Ee=Gn.getConfig(`${this.localName}:model`,"hsv"),this.#$e=Os(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#Se=Gn.getConfig("x-colorpicker:labels",!0),this.#Si.observe(this),Gn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){this.#Si.unobserve(this),Gn.removeEventListener("configchange",this.#$t)}#De(){return"none"===this.#$e||"srgb"===this.#$e&&["srgb","srgb-linear"].includes(this.#ze)||"p3"===this.#$e&&["srgb","srgb-linear","p3"].includes(this.#ze)||"a98rgb"===this.#$e&&["srgb","srgb-linear","a98rgb"].includes(this.#ze)||"rec2020"===this.#$e&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#ze)||"prophoto"===this.#$e?"none":this.#$e}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#Ee){let[e,i,s]=this.value;this.#Ee=t,this.value=[e,i,s,this.#Ce]}}else if("x-colorpicker:gamutHints"===e){let t=Os(i||"srgb","color.js");t!==this.#$e&&(this.#$e=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#Se&&(this.#Se=t,this.#Be())}}#Pe(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#gamut-hints-menu"])e.value!==this.#$e&&(this.#$e=e.value,this.#Xt(),Gn.setConfig("x-colorpicker:gamutHints",Os(this.#$e,"css")));else if(e.parentElement===this["#color-model-menu"]){if(e.value!==this.#Ee){let[t,i,s]=this.value;this.#Ee=e.value,this.value=[t,i,s,this.#Ce],Gn.setConfig(`${this.localName}:model`,e.value)}}else"labels"===e.value&&(this.#Se=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#Se),this.#Xt())}#Te(){this.#Ie()}#Mi(){this.#ji()}#Hi(t){if(t.button>0||this.#ie)return;let e,i,s=this["#polar-slider"].getBoundingClientRect();this.#ie=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#polar-slider"].style.cursor="default",this["#polar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=s.width/2,n=t-s.left-i,a=e-s.top-i,r=ca(n,2)+ca(a,2),o=ua(a,n);r>ca(i,2)&&(n=i*da(o),a=i*ha(o),r=ca(n,2)+ca(a,2),o=ua(a,n)),this.#ye[0]=(o+la)/(2*la),"hsv"!==this.#Ee&&"hsl"!==this.#Ee||(this.#ye[1]=pa(r)/i),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ni(),this.#Ii(),this.#Oi(),this.#Ge(),this.#Xe()};n(t.clientX,t.clientY),this["#polar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#polar-slider"].addEventListener("pointerup",i=()=>{this["#polar-slider"].removeEventListener("pointermove",e),this["#polar-slider"].removeEventListener("pointerup",i),this["#polar-slider"].removeEventListener("pointercancel",i),this["#polar-slider"].style.cursor=null,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#polar-slider"].addEventListener("pointercancel",i)}#Di(t){if(t.button>0||this.#ie)return;let e,i,s=this["#linear-slider-track"].getBoundingClientRect();this.#ie=!0,this["#linear-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#ye[2]&&(this.#ye[2]=e,this.#Bi(),this.#ji(),this.#Ge(),this.#Xe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#linear-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#linear-slider"].addEventListener("pointerup",i=()=>{this["#linear-slider"].removeEventListener("pointermove",e),this["#linear-slider"].removeEventListener("pointerup",i),this["#linear-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#linear-slider"].addEventListener("pointercancel",i)}#Re(t){if(t.button>0||this.#ie)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#ie=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=ki(e,0,1),e!==this.#Ce&&(this.#Ce=e,this.#Ve(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#ie=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#Ni(),this.#Fi(),this.#Gi(),this.#Bi(),this.#Ii(),this.#Oi(),this.#Ve(),this.#Ge(),this.#Xe(),this.#Be()}#Ni(){let[t,e,i]=this.#ye;if("hsv"===this.#Ee||"hsl"===this.#Ee){let i=100,s=xi*(360*t)/180,n=e*i/2,a={x:i/2,y:i/2},r=(i-(a.x+n*da(s)))/i*100,o=(a.y-n*ha(s))/i*100;this["#polar-slider-marker"].style.left=r+"%",this["#polar-slider-marker"].style.top=o+"%"}}#Fi(){let t="srgb-linear"===this.#ze?"srgb-linear":"srgb",e="srgb-linear"===this.#ze?"srgb":this.#ze;if("hsv"===this.#Ee){let i=[{space:this.#ze,coords:mi({space:"hsv",coords:[0,0,100]},e).coords},{space:this.#ze,coords:mi({space:"hsv",coords:[0,0,0]},e).coords}],s=[{space:this.#ze,coords:[1,0,0]},{space:this.#ze,coords:[1,1,0]},{space:this.#ze,coords:[0,1,0]},{space:this.#ze,coords:[0,1,1]},{space:this.#ze,coords:[0,0,1]},{space:this.#ze,coords:[1,0,1]},{space:this.#ze,coords:[1,0,0]}];i=i.map((t=>bi(t))).join(","),s=s.map((t=>bi(t))).join(","),this["#polar-slider-circle"].style.background=`\n        radial-gradient(circle closest-side in ${t}, ${i} 100%),\n        conic-gradient(from -90deg in hsl, ${s})\n      `,this["#polar-slider-circle"].style.backgroundBlendMode="screen, normal"}else if("hsl"===this.#Ee){let i=[{space:this.#ze,coords:mi({space:"hsl",coords:[0,0,50]},e).coords,alpha:1},{space:this.#ze,coords:mi({space:"hsl",coords:[0,0,50]},e).coords,alpha:0}],s=[{space:this.#ze,coords:[1,0,0]},{space:this.#ze,coords:[1,1,0]},{space:this.#ze,coords:[0,1,0]},{space:this.#ze,coords:[0,1,1]},{space:this.#ze,coords:[0,0,1]},{space:this.#ze,coords:[1,0,1]},{space:this.#ze,coords:[1,0,0]}];i=i.map((t=>bi(t))).join(","),s=s.map((t=>bi(t))).join(","),this["#polar-slider-circle"].style.background=`\n        radial-gradient(circle closest-side in ${t}, ${i}),\n        conic-gradient(from -90deg in hsl, ${s})\n      `,this["#polar-slider-circle"].style.backgroundBlendMode="normal, normal"}}#Gi(){let t=this.#De();if("none"===t)this["#polar-slider-gamut-path"].removeAttribute("d");else{let e=this["#polar-slider-gamut-svg"].clientWidth,i=this["#polar-slider-gamut-svg"].clientHeight,s=1/window.devicePixelRatio,[n,a,r]=this.#ye,o=(e,i,s)=>se({space:this.#ze,coords:mi({space:this.#Ee,coords:[360*e,100*i,100*s]},"srgb").coords},t),l=[];if("hsv"===this.#Ee||"hsl"===this.#Ee)for(let t=0;t<=1;t+=.01)for(let n=i/2;n>=0;n-=s){if(o(t,n/(i/2),r)){let s=$i({x:e/2,y:i/2-n},{x:e/2,y:i/2},360*t);l.push(s);break}}if(0===l.length)this["#polar-slider-gamut-path"].removeAttribute("d");else{let t=l.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#polar-slider-gamut-path"].setAttribute("d",t),this["#polar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${e} ${i}`)}}}#ji=Fn(this.#Gi,40,this);#Bi(){let[,t,e]=this.#ye;"hsv"!==this.#Ee&&"hsl"!==this.#Ee||(this["#linear-slider-marker"].style.left=100*e+"%")}#Ii(){if("hsv"===this.#Ee){let[t,e]=this.#ye,i="srgb-linear"===this.#ze?"srgb-linear":"srgb",s="srgb-linear"===this.#ze?"srgb":this.#ze,n=[{space:this.#ze,coords:mi({space:"hsv",coords:[360*t,100*e,0]},s).coords},{space:this.#ze,coords:mi({space:"hsv",coords:[360*t,100*e,100]},s).coords}];n=n.map((t=>bi(t))).join(","),this["#linear-slider"].style.background=`linear-gradient(in ${i} to right, ${n})`}else if("hsl"===this.#Ee){let[t,e]=this.#ye,i="srgb-linear"===this.#ze?"srgb-linear":"srgb",s="srgb-linear"===this.#ze?"srgb":this.#ze,n=[{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,100*e,0]},s).coords},{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,100*e,50]},s).coords},{space:this.#ze,coords:mi({space:"hsl",coords:[360*t,100*e,100]},s).coords}];n=n.map((t=>bi(t))).join(","),this["#linear-slider"].style.background=`linear-gradient(in ${i} to right, ${n})`}}#Oi(){let t=this.#De();if("none"===t)this["#linear-slider-gamut-path"].removeAttribute("d");else{let[e,i,s]=this.#ye,n=this["#linear-slider"].clientWidth,a=1/window.devicePixelRatio,r=[];{let s=null;for(let o=0;o<=n;o+=a)if("hsv"===this.#Ee||"hsl"===this.#Ee){let a=o/n;se({space:this.#ze,coords:mi({space:this.#Ee,coords:[360*e,100*i,100*a]},"srgb").coords},t)?(null===s&&(s=[],r.push(s)),s.push(100*a)):s=null}r=r.map((t=>[t.at(0),t.at(-1)]))}if(r.length>0){let t=r.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#linear-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#linear-slider-gamut-path"].removeAttribute("d")}}#Ve(){this["#alpha-slider-marker"].style.left=100*this.#Ce+"%"}#Ge(){if("hsv"===this.#Ee||"hsl"===this.#Ee){let[t,e,i]=this.#ye,s="srgb-linear"===this.#ze?"srgb":this.#ze,n=[{space:this.#ze,coords:mi({space:this.#Ee,coords:[360*t,100*e,100*i]},s).coords,alpha:0},{space:this.#ze,coords:mi({space:this.#Ee,coords:[360*t,100*e,100*i]},s).coords,alpha:1}];n=n.map((t=>bi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(in srgb to right, ${n})`}}#Xe(){let t=this.#De();if("none"===t)this["#polar-slider-marker"].removeAttribute("data-warn"),this["#linear-slider-marker"].removeAttribute("data-warn");else{let[e,i,s]=this.#ye;se({space:this.#ze,coords:mi({space:this.#Ee,coords:[360*e,100*i,100*s]},"srgb").coords},t)?(this["#polar-slider-marker"].removeAttribute("data-warn"),this["#linear-slider-marker"].removeAttribute("data-warn")):(this["#polar-slider-marker"].setAttribute("data-warn",""),this["#linear-slider-marker"].setAttribute("data-warn",""))}}#Be(){this.#Se?("hsv"===this.#Ee?this["#linear-slider-label"].textContent="V":"hsl"===this.#Ee&&(this["#linear-slider-label"].textContent="L"),this["#alpha-slider-label"].textContent="A"):(this["#linear-slider-label"].textContent="",this["#alpha-slider-label"].textContent="")}#Ie(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#Ee;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#$e;this["#labels-menu-item"].toggled=this.#Se}}void 0===customElements.get("x-rgbpolarsliders")&&customElements.define("x-rgbpolarsliders",Ma);class La extends HTMLElement{static observedAttributes=["value","alpha","spaces","disabled","size"];static#z=Ns`<template><div id="preview"></div><x-popover id="popover" part="popover" modal><x-colorpicker id="color-picker"></x-colorpicker></x-popover></template>`;static#E=Fs`:host{display:block;width:32px;height:32px;box-sizing:border-box;position:relative;overflow:hidden;background:var(--checkboard-background)}:host([hidden]){display:none}:host([disabled]){pointer-events:none;opacity:0.4}#preview{width:100%;height:100%}#popover{overflow:visible;--align: left;}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"}set value(t){this.setAttribute("value",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get spaces(){return this.hasAttribute("spaces")?this.getAttribute("spaces").replace(/\s+/g," ").split(" "):["srgb","p3"]}set spaces(t){this.setAttribute("spaces",t.join(" "))}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#X=!1;#Xi=!1;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,La.#E],this.#$.append(document.importNode(La.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("keydown",(t=>this.#W(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this["#preview"].addEventListener("click",(t=>this.#P(t))),this["#popover"].addEventListener("close",(()=>this.#_i())),this["#color-picker"].addEventListener("changestart",(()=>this.#Zi())),this["#color-picker"].addEventListener("change",(t=>this.#Ui(t))),this["#color-picker"].addEventListener("changeend",(()=>this.#Yi()))}connectedCallback(){this["#color-picker"].setAttribute("value",this.value),this.#J(),this.#Vi()}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Zt():"alpha"===t?this.#pe():"spaces"===t?this.#me():"disabled"===t?this.#vt():"size"===t&&this.#qi())}async#Vt(){!1===this.hasAttribute("expanded")&&(this.#X=this.matches(":focus"),this.setAttribute("expanded",""),await this["#popover"].open(this),this["#popover"].focus())}async#Wt(t=null){if(this.hasAttribute("expanded")){if(this["#popover"].setAttribute("closing",""),await this["#popover"].close(),this.removeAttribute("expanded"),this.#X)this.focus();else{let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}this["#popover"].removeAttribute("closing")}}#Vi(){this["#preview"].style.background=this.value}#J(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#Zt(){!1===this.#Xi&&(this.#Vi(),this["#color-picker"].getAttribute("value")!==this.getAttribute("value")&&this["#color-picker"].setAttribute("value",this.getAttribute("value")))}#pe(){this["#color-picker"].alpha=this.alpha}#me(){this["#color-picker"].spaces=this.spaces}#vt(){this.#J()}#qi(){this["#color-picker"].size=this.size}#Zi(){this.#Xi=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))}#Ui(t){this.value=this["#color-picker"].value,this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Vi()}#Yi(){this.#Xi=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#Y(t){t.target===this&&!1===this.matches(":focus")&&t.preventDefault()}#P(t){!1===this["#popover"].opened&&(t.preventDefault(),this.#Vt())}#W(t){"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code?(t.preventDefault(),t.stopPropagation(),this.hasAttribute("expanded")?this.#Wt():this.#Vt()):"Escape"===t.code?this.hasAttribute("expanded")&&(t.preventDefault(),this.#Wt()):"Tab"===t.code&&this.hasAttribute("expanded")&&t.preventDefault()}#_i(){this.dispatchEvent(new CustomEvent("collapse")),this.#Wt()}}customElements.define("x-colorselect",La);class Aa extends HTMLElement{static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:block;position:fixed;width:0px;height:0px;font-size:0.875rem;z-index:1001}
`;get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#Wi=null;#Ki=null;#Ji=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Aa.#E],this.#$.append(document.importNode(Aa.#z.content,!0)),this["#backdrop"]=Xn("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)",this["#backdrop"].addEventListener("contextmenu",(t=>this.#Qi(t))),this["#backdrop"].addEventListener("pointerdown",(t=>this.#ut(t))),this["#backdrop"].addEventListener("click",(t=>this.#At(t))),this.addEventListener("blur",(t=>this.#ts())),this.addEventListener("keydown",(t=>this.#W(t)),!0),this.addEventListener("click",(t=>this.#P(t)))}connectedCallback(){this.#Wi=this.parentElement||this.parentNode.host,window.addEventListener("blur",this.#Ki=()=>{this.#ts()}),this.#Wi.addEventListener("contextmenu",this.#Ji=t=>{this.#es(t)})}disconnectedCallback(){window.removeEventListener("blur",this.#Ki),this.#Wi.removeEventListener("contextmenu",this.#Ji),this.#Wi=null}open(t,e){let i=this.querySelector("x-menu");!1===i.opened&&(i.openAtPoint(t,e),this["#backdrop"].ownerElement=i,this["#backdrop"].show(!1),i.focus())}close(){return new Promise((async t=>{this["#backdrop"].hide(!1);let e=this.querySelector("x-menu");if(e&&!0===e.opened&&(await e.close(),this.isConnected)){let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}t()}))}#ts(){this.close()}#es(t){!1===this.disabled&&(t.preventDefault(),this.open(t.clientX,t.clientY))}#Qi(t){"touch"!==t.pointerType&&(t.preventDefault(),t.stopImmediatePropagation(),this.close().then((()=>{let e=((t,e,i=!0)=>{let s=document.elementFromPoint(t,e);if(i&&s)for(;;){let i=s.shadowRoot||s._shadowRoot;if(!i)break;{let n=i.elementFromPoint(t,e);if(n.getRootNode()!==i&&(n=null),!n||n===s)break;s=n}}return s})(t.clientX,t.clientY,!0),i=new MouseEvent(t.type,t);e.dispatchEvent(i)})))}#ut(t){t.buttons<=1&&"touch"!==t.pointerType&&(t.preventDefault(),t.stopImmediatePropagation(),this.close())}#At(t){"touch"===t.pointerType&&this.close()}async#P(t){let e=t.target.closest("x-menuitem");if(e&&!1===e.disabled){let t=e.querySelector("x-menu");t?t.opened?t.close():t.openNextToElement(e,"horizontal"):(this.setAttribute("closing",""),await e.whenTriggerEnd,await this.close(),this.removeAttribute("closing"))}}#W(t){if("Escape"===t.code){this.querySelector("x-menu").opened&&(t.preventDefault(),this.close())}else if("Tab"===t.code){t.preventDefault(),t.stopPropagation(),this.querySelector("x-menu").focusNextMenuItem()}}}customElements.define("x-contextmenu",Aa);class Ra extends HTMLElement{static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:none;width:300px;height:100%;left:0px;right:auto;top:0px;bottom:auto;padding:0;box-sizing:border-box;border-width:0;transition-duration:200ms;transition-timing-function:linear}:host([position="right"]){top:0px;bottom:auto;left:auto;right:0px}:host([position="top"]){top:0px;bottom:auto;left:0px;right:auto;width:100%;height:300px}:host([position="bottom"]){top:auto;bottom:0px;left:0px;right:auto;width:100%;height:300px}:host([popover]){display:block}:host(:popover-open){display:block}:host([hidden]){display:none}:host(:focus){outline:none}:host::backdrop{background-color:color(srgb 0 0 0 / 0.25);transition-property:all;transition-duration:200ms;transition-timing-function:linear;transition-behavior:allow-discrete}
`;get position(){return this.hasAttribute("position")?this.getAttribute("position"):"left"}set position(t){this.setAttribute("position",t)}get manual(){return this.hasAttribute("manual")}set manual(t){t?this.setAttribute("manual",""):this.removeAttribute("manual")}#$=null;#is;#ss;#ns;showPopover=void 0;hidePopover=void 0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ra.#E],this.#$.append(document.importNode(Ra.#z.content,!0)),this.addEventListener("pointerdown",(t=>{t.stopPropagation()})),this.addEventListener("click",(t=>{t.stopPropagation()}))}open(){return new Promise((async t=>{if(!1===this.isConnected)return void t();this.#is&&await this.#is.finished,this.#ss&&await this.#ss.finished,this.setAttribute("popover","manual"),this.setAttribute("tabindex","0"),this.setAttribute("position",this.position);let e=getComputedStyle(this),i=1e3*parseFloat(e.getPropertyValue("transition-duration")||"0s"),s=e.getPropertyValue("transition-timing-function"),n=this.getBoundingClientRect();"left"===this.position?this.#is=this.animate({transform:[`translateX(-${n.right}px)`,"translateX(0px)"]},{duration:i,easing:s}):"right"===this.position?this.#is=this.animate({transform:[`translateX(${n.width}px)`,"translateX(0px)"]},{duration:i,easing:s}):"top"===this.position?this.#is=this.animate({transform:[`translateY(-${n.bottom}px)`,"translateY(0px)"]},{duration:i,easing:s}):"bottom"===this.position&&(this.#is=this.animate({transform:[`translateY(${n.height}px)`,"translateY(0px)"]},{duration:i,easing:s})),window.addEventListener("click",this.#ns=t=>{if("finished"===this.#is.playState&&this.popover){let e=this.getBoundingClientRect();!1===Ei(e,{x:t.clientX,y:t.clientY})&&(getComputedStyle(this,"::backdrop").pointerEvents,this.manual||this.close())}}),super.showPopover(),t()}))}close(){return new Promise((async t=>{this.#is&&await this.#is.finished,this.#ss&&await this.#ss.finished,window.removeEventListener("click",this.#ns);let e=getComputedStyle(this),i=1e3*parseFloat(e.getPropertyValue("transition-duration")||"0s"),s=e.getPropertyValue("transition-timing-function")||"ease",n=this.getBoundingClientRect();"left"===this.position?this.#ss=this.animate({transform:["translateX(0px)",`translateX(-${n.right}px)`]},{duration:i,easing:s}):"right"===this.position?this.#ss=this.animate({transform:["translateX(0px)",`translateX(${n.width}px)`]},{duration:i,easing:s}):"top"===this.position?this.#ss=this.animate({transform:["translateY(0px)",`translateY(-${n.bottom+50}px)`]},{duration:i,easing:s}):"bottom"===this.position&&(this.#ss=this.animate({transform:["translateY(0px)",`translateY(${n.height}px)`]},{duration:i,easing:s})),this.#ss&&(await this.#ss.finished,this.#ss=null),super.hidePopover(),this.removeAttribute("popover"),this.removeAttribute("tabindex"),t()}))}toggle(){this.hasAttribute("popover")?this.close():this.open()}}customElements.define("x-drawer",Ra);class Pa extends HTMLElement{static observedAttributes=["href"];static#z=Ns`<template><svg id="svg" preserveAspectRatio="none" viewBox="0 0 100 100" width="0px" height="0px"></svg><slot></slot></template>`;static#E=Fs`:host{display:block;color:currentColor;display:flex;align-items:center;justify-content:center;width:17px;height:17px}:host([disabled]){opacity:0.5}:host([hidden]){display:none}#svg{width:100%;height:100%;fill:currentColor;stroke:none;overflow:inherit;pointer-events:none}
`;get href(){return this.hasAttribute("href")?this.getAttribute("href"):""}set href(t){this.setAttribute("href",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#as=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Pa.#E],this.#$.append(document.importNode(Pa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#q()))}connectedCallback(){Gn.addEventListener("iconschange",this.#as=()=>{this.#Xt()})}disconnectedCallback(){Gn.removeEventListener("iconschange",this.#as)}attributeChangedCallback(t,e,i){e!==i&&"href"===t&&this.#Xt()}#V(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#q(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}async#Xt(){let t=null,e=this.href.trim();if(""!==e){let i=null,s=null;if(e.includes("#")){let t=e.split("#");""!==t[0]&&(i=t[0]),""!==t[1]&&(s=t[1])}if(null!==s)if(null===i)await Gn.whenIconsReady,t=Gn.queryIcon("#"+CSS.escape(s));else{let e=await _s(i);e&&(t=e.querySelector("#"+CSS.escape(s)))}}if(t){let e=new Set;for(let i of t.querySelectorAll("*"))for(let s of["fill","stroke"]){let n="";if(""!==i.style[s]?n=i.style[s].trim():i.hasAttribute(s)&&(n=i.getAttribute(s).trim()),n.startsWith("url(")&&n.endsWith(")")&&(n=n.substring(n.indexOf("(")+1,n.indexOf(")")),n=n.replace(/['"]+/g,""),n.startsWith("#"))){let i=t.ownerSVGElement.querySelector(n);if(i){e.add(i);for(let t of Yn(i))e.add(t)}}}e=[...e].filter((e=>!1===t.contains(e)));let i="";e.length>0&&(i="<defs>"+e.map((t=>t.outerHTML)).join("")+"</defs>"),this["#svg"].setAttribute("viewBox",t.getAttribute("viewBox")),this["#svg"].innerHTML=i+t.innerHTML}else this["#svg"].innerHTML=""}}customElements.define("x-icon",Pa);class Ta extends HTMLElement{static observedAttributes=["type","value","spellcheck","minlength","maxlength","readonly","disabled","validation"];static#z=Ns`<template><div id="main"><slot></slot><input id="input" spellcheck="false" part="input"></div></template>`;static#E=Fs`:host{display:block;position:relative;max-width:160px;height:32px;box-sizing:border-box;font-size:0.78125rem}:host(:focus){z-index:10}:host(:hover){cursor:text}:host([mixed]){color:rgba(0, 0, 0, 0.7)}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}#main{display:flex;align-items:center;width:100%;height:100%}#input{width:100%;height:100%;padding:0 6px;box-sizing:border-box;color:inherit;background:none;border:none;outline:none;font-family:inherit;font-size:inherit;font-weight:inherit;text-align:inherit;cursor:inherit;z-index:1}#input:-webkit-autofill{z-index:1}#input:-internal-autofill-previewed, #input:-internal-autofill-selected{-webkit-box-shadow:var(--autofill-background-color) 0px 0px 0px 30px inset}:host(:not(:focus)) ::selection{color:inherit;background:transparent}
`;get type(){return this.hasAttribute("type")?this.getAttribute("type"):"text"}set type(t){this.setAttribute("type",t)}get value(){return this["#input"].value}set value(t){this["#input"].value!==t&&(this.matches(":focus")?(this["#input"].selectionStart=0,this["#input"].selectionEnd=this["#input"].value.length,document.execCommand("insertText",!1,t)):this["#input"].value=t,"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#rs)&&this.reportValidity(),this.#zt())}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get minLength(){return this.hasAttribute("minlength")?parseInt(this.getAttribute("minlength")):0}set minLength(t){this.setAttribute("minlength",t)}get maxLength(){return this.hasAttribute("maxlength")?parseInt(this.getAttribute("maxlength")):Infinity}set maxLength(t){this.setAttribute("maxlength",t)}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get readOnly(){return this.hasAttribute("readonly")}set readOnly(t){!0===t?this.setAttribute("readonly",t):this.removeAttribute("readonly")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get validation(){return this.hasAttribute("validation")?this.getAttribute("validation"):"auto"}set validation(t){this.setAttribute("validation",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#$=null;#U=0;#os=0;#Et=null;#rs=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Ta.#E],this.#$.append(document.importNode(Ta.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#q())),this.addEventListener("focusin",(t=>this.#Rt(t))),this.addEventListener("focusout",(t=>this.#Pt(t))),this.addEventListener("keydown",(t=>this.#W(t))),this["#input"].addEventListener("input",(t=>this.#Tt(t))),this["#input"].addEventListener("change",(t=>this.#de(t))),this["#input"].addEventListener("search",(t=>this.#Bt(t)))}connectedCallback(){this.#J(),this.#zt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#rs)&&this.reportValidity()}attributeChangedCallback(t,e,i){e!==i&&("type"===t?this.#ls():"value"===t?this.#Zt():"spellcheck"===t?this.#hs():"minlength"===t?this.#ds():"maxlength"===t?this.#cs():"readonly"===t?this.#us():"disabled"===t?this.#vt():"validation"===t&&this.#ps())}selectAll(){this["#input"].select()}clear(){this.value="",this.#Et=null,this.#rs=null,this.#Yt()}reportValidity(){let t=new CustomEvent("beforevalidate",{bubbles:!1,cancelable:!0});return this.dispatchEvent(t),!1===t.defaultPrevented&&(this.value.length<this.minLength?this.#Et={href:"#entered-text-is-too-short"}:this.value.length>this.maxLength?this.#Et={href:"#entered-text-is-too-long"}:this.required&&0===this.value.length?this.#Et={href:"#required-field"}:"email"===this.type&&!1===this["#input"].validity.valid?this.#Et={href:"#invalid-email"}:"url"===this.type&&!1===this["#input"].validity.valid?this.#Et={href:"#invalid-url"}:"color"===this.type&&!1===Hs(this["#input"].value)?this.#Et={href:"#invalid-color"}:this.#Et=null,this.#Yt()),null===this.#Et&&null===this.#rs}setCustomValidity(t){this.#rs=""===t?null:t,this.#Yt()}#Yt(){let t=this.#rs||this.#Et;t?this.setAttribute("error",""):this.removeAttribute("error");{let e=this.querySelector(':scope > x-tooltip[type="error"]');if(t&&this.matches(":focus")){if(e||(e=Xn("x-tooltip"),e.setAttribute("type","error"),this.append(e)),t.href){let i=t.args?Object.entries(t.args).map((([t,e])=>`${t}:${e}`)).join(","):"";e.innerHTML=`<x-message href="${t.href}" args="${i}"></x-message>`}else e.innerHTML=t;jn(10).then((()=>{e.open(this)}))}else e&&e.close().then((()=>e.remove()))}}#zt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#J(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.setAttribute("aria-readonly",this.readOnly),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#ls(){"color"===this.type?this["#input"].type="text":this["#input"].type=this.type}#Zt(){this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&this.selectAll()}#hs(){this["#input"].spellcheck=this.spellcheck}#ds(){this["#input"].minLength=this.minLength}#cs(){this["#input"].maxLength=this.maxLength}#us(){this["#input"].readOnly=this.readOnly,this.#J()}#vt(){this["#input"].disabled=this.disabled,this.#J()}#ps(){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#rs)&&this.reportValidity()}#P(){this.#Yt()}#V(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#q(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#Rt(){this.#Yt(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#Pt(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),"auto"===this.validation||"instant"===this.validation?this.reportValidity():"manual"===this.validation&&this.#Yt()}#W(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(document.execCommand("selectAll"),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||this.reportValidity())}#Tt(t){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#rs)&&this.reportValidity(),t.stopPropagation(),this.#zt(),this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}#de(t){this.#os=t.timeStamp,this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#Bt(t){t.timeStamp-this.#os>100&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}customElements.define("x-input",Ta);class Da extends HTMLElement{static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:block;cursor:inherit;user-select:none;-webkit-user-select:none;box-sizing:border-box;font-size:0.8125rem;font-weight:400;line-height:1.2}:host([disabled]){opacity:0.5}:host([hidden]){display:none}:host([level="1"]){margin:12px 0px;font-size:1.625rem;font-weight:600}:host([level="2"]){margin:10px 0px;font-size:1rem;font-weight:700}:host([level="3"]){margin:8px 0px;font-size:0.8125rem;font-weight:700}:host([level="4"]){margin:4px 0px;font-size:0.75rem;font-weight:500}slot{text-decoration:inherit}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get level(){return this.hasAttribute("level")?parseInt(this.getAttribute("level")):null}set level(t){null===t?this.removeAttribute("level"):this.setAttribute("level",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Da.#E],this.#$.append(document.importNode(Da.#z.content,!0))}}customElements.define("x-label",Da);let{isFinite:Ba,isNaN:Ia,parseFloat:Oa}=Number;class Ha extends HTMLElement{static observedAttributes=["href","args","autocapitalize","ellipsis"];get href(){return this.hasAttribute("href")?this.getAttribute("href"):""}set href(t){this.setAttribute("href",t)}get args(){let t=Object.create(null),e=this.hasAttribute("args")?this.getAttribute("args").trim():"";if(""!==e)for(let i of e.split(",")){let[e,...s]=i.split(":"),n=s.join(":");e=e.trim(),n=n.trim();let a=parseFloat(n),r=n-a+1>=0;t[e]=r?a:n}return t}set args(t){let e=Object.keys(t).map((e=>`${e}: ${t[e]}`)).join(", ");0===t.length?this.removeAttribute("args"):this.setAttribute("args",e)}get autocapitalize(){return!!this.hasAttribute("autocapitalize")}set autocapitalize(t){t?this.setAttribute("autocapitalize",""):this.removeAttribute("autocapitalize")}get ellipsis(){return this.hasAttribute("ellipsis")}set ellipsis(t){t?this.setAttribute("ellipsis",""):this.removeAttribute("ellipsis")}get whenReady(){return new Promise((t=>{null===this.#ms?t():this.#ms.push(t)}))}#bs=null;#St=null;#ms=[];#gs="";constructor(){super(),this.textContent.length>0&&(this.#gs=this.textContent)}connectedCallback(){this.#Xt(),Gn.addEventListener("localeschange",this.#bs=()=>{this.#Xt()}),Gn.addEventListener("themechange",this.#St=()=>{this.#Xt()})}disconnectedCallback(){Gn.removeEventListener("localeschange",this.#bs),Gn.removeEventListener("themechange",this.#St)}attributeChangedCallback(t,e,i){e!==i&&!1!==this.isConnected&&("href"===t||"args"===t||"autocapitalize"===t||"ellipsis"===t)&&this.#Xt()}async#Xt(){await Gn.whenLocalesReady;let t=Gn.queryMessage(this.href,this.args);if(t.fallback&&this.#gs?this.textContent=this.#gs:"html"===t.format?this.innerHTML=t.content+(this.ellipsis?"…":""):!0===this.autocapitalize&&"titlecase"===Gn.autocapitalize?this.textContent=(t=>{let e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|v.?|vs.?|via)$/i,i=/([A-Za-z0-9\u00C0-\u00FF])/;return t.split(/([ :–—-])/).map(((t,s,n)=>t.search(e)>-1&&0!==s&&s!==n.length-1&&":"!==n[s-3]&&":"!==n[s+1]&&("-"!==n[s+1]||"-"===n[s-1]&&"-"===n[s+1])?t.toLowerCase():t.substr(1).search(/[A-Z]|\../)>-1||":"===n[s+1]&&""!==n[s+2]?t:t.replace(i,(t=>t.toUpperCase())))).join("")})(t.content)+(this.ellipsis?"…":""):this.textContent=t.content+(this.ellipsis?"…":""),null!==this.#ms){for(let t of this.#ms)t();this.#ms=null}}}customElements.define("x-message",Ha);let ja=t=>{let[e,i,...s]=t.trim().split(" ");return[i,parseFloat(e),s.join(" ")]},{abs:Na}=Math;class Fa extends HTMLElement{static observedAttributes=["opened"];static#z=Ns`<template><slot id="slot"></slot></template>`;static#E=Fs`:host{display:none;top:0;left:0;width:fit-content;padding:4px 0;z-index:1001;box-sizing:border-box;background:white;cursor:default;overflow:auto;flex-direction:column;-webkit-app-region:no-drag;--align: start;--scrollbar-background: rgba(0, 0, 0, 0.2);--scrollbar-width: 6px;--open-transition: none;--close-transition: none;}:host([opened]), :host([animating]){display:flex}:host(:focus){outline:none}:host-context([debug]):host(:focus){outline:2px solid red}::-webkit-scrollbar{max-width:var(--scrollbar-width);background:none}::-webkit-scrollbar-thumb{background-color:var(--scrollbar-background)}::-webkit-scrollbar-corner{display:none}
`;get opened(){return this.hasAttribute("opened")}#$=null;#fs=[];#xs=null;#ws=null;#vs=0;#ks=0;#ys=!1;#Cs=!1;#zs=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Fa.#E],this.#$.append(document.importNode(Fa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("pointerover",(t=>this.#Es(t))),this.addEventListener("pointerout",(t=>this.#$s(t))),this.addEventListener("pointermove",(t=>this.#Ss(t))),this.addEventListener("keydown",(t=>this.#W(t))),this.addEventListener("wheel",(t=>this.#Ms(t)),{passive:!1}),this.addEventListener("scroll",(t=>this.#Ls(t)),{passive:!0})}connectedCallback(){this.setAttribute("role","menu"),this.setAttribute("aria-hidden",!this.opened),this.setAttribute("tabindex","0")}attributeChangedCallback(t,e,i){e!==i&&"opened"===t&&this.#As()}openOverElement(t,e){return new Promise((async i=>{let s=this.querySelectorAll(":scope > x-menuitem");if(s.length>0){this.#ys=!0,this.#zs=Nn(),this.#Rs(),this.setAttribute("opened","");let i=[...s].find((t=>t.contains(e)))||s[0],n=this.getBoundingClientRect(),a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=0,l=0;i.focus(),0===n.top&&0===n.left||(o=-n.left,l=-n.top),this.style.left=a.x-(r.x-n.x)+o+"px",this.style.top=a.y-(r.y-n.y)+l+"px",n=this.getBoundingClientRect(),n.left<7&&(this.style.left=7+o+"px",n=this.getBoundingClientRect());7-n.top>0&&(this.style.height=n.bottom-7+"px",this.style.top=7+l+"px",this.scrollTop=9999,n=this.getBoundingClientRect());if(n.bottom+7>window.innerHeight){let t=n.bottom-window.innerHeight,e=n.height-t-7;this.style.height=e+"px"}if(n.right+7>window.innerWidth){let t=n.right-window.innerWidth,e=n.width-t-7;this.style.width=`${e}px`}{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=ja(t);if("transform"===e){let t=this.getBoundingClientRect(),e=a.y+a.height/2-t.top;await this.animate({transform:["scaleY(0)","scaleY(1)"],transformOrigin:[`0 ${e}px`,`0 ${e}px`]},{duration:i,easing:s}).finished}}this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),this.#ks=l}i()}))}openOverLabel(t){return new Promise((async e=>{let i=this.querySelectorAll(":scope > x-menuitem");if(i.length>0){this.#Rs(),this.setAttribute("opened",""),this.#ys=!0,this.#zs=Nn();let e=[...i].find((e=>{let i=e.querySelector("x-label");return!(!i||i.textContent!==t.textContent)}));e||(e=i[0]);let s=e.querySelector("x-label");await this.openOverElement(t,s)}e()}))}openNextToElement(t,e="horizontal",i=0){return new Promise((async s=>{this.#ys=!1,this.#zs=Nn(),this.#Rs(),this.setAttribute("opened",""),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),"x-menuitem"===t.localName&&t.setAttribute("expanded","");let n=getComputedStyle(this).getPropertyValue("--align").trim(),a=t.getBoundingClientRect(),r=this.getBoundingClientRect(),o=0,l=0;if(0===r.top&&0===r.left||(o=-r.left,l=-r.top),"horizontal"===e){this.style.top=a.top+l+"px",this.style.left=a.left+a.width+i+o+"px";let t="right";{let t=this.getBoundingClientRect();t.width>window.innerWidth-10&&(this.style.width=window.innerWidth-10+"px"),t.height>window.innerHeight-10&&(this.style.height=window.innerHeight-10+"px")}{let e=this.getBoundingClientRect();e.left+e.width+7>window.innerWidth&&(a.left>e.width+7?(this.style.left=a.left-e.width+o+"px",t="left"):a.left>window.innerWidth-(a.left+a.width)?(this.style.left=7+o+"px",t="left"):(this.style.left=window.innerWidth-e.width-7+o+"px",t="right"))}{let t=this.getBoundingClientRect();if(t.top+t.height+7>window.innerHeight){let e=t.top+t.height+7-window.innerHeight;this.style.top=t.top-e+l+"px"}}{let e=getComputedStyle(this).getPropertyValue("--open-transition"),[i,s,n]=ja(e);"transform"===i&&await this.animate({transform:["scale(0, 0)","scale(1, 1)"],transformOrigin:["left"===t?"100% 0":"0 0","left"===t?"100% 0":"0 0"]},{duration:s,easing:n}).finished}}else if("vertical"===e){this.style.top=a.top+a.height+i+l+"px",this.style.left="0px";let e="bottom";{let t=this.getBoundingClientRect();t.width>window.innerWidth-10&&(this.style.width=window.innerWidth-10+"px"),t.height>window.innerHeight-10&&(this.style.height=window.innerHeight-10+"px")}if(t.parentElement&&"x-menubar"===t.parentElement.localName){let t=this.getBoundingClientRect();t.top+t.height+7>window.innerHeight&&(this.style.height=window.innerHeight-(a.top+a.height)-10+"px")}else{let t=this.getBoundingClientRect();t.top+t.height+7>window.innerHeight&&(a.top>t.height+7?(this.style.top=a.top-t.height-i+l+"px",e="top"):a.top>window.innerHeight-(a.top+a.height)?(this.style.top=7+l+"px",e="top"):(this.style.top=window.innerHeight-t.height-7+l+"px",e="bottom"))}if("start"===n){this.style.left=a.left+o+"px";{let t=this.getBoundingClientRect();t.left+t.width+7>window.innerWidth&&(this.style.left=a.left+a.width-t.width+o+"px")}this.getBoundingClientRect().left<7&&(this.style.left=7+o+"px")}else if("end"===n){this.style.left=a.left+a.width-r.width+o+"px";this.getBoundingClientRect().left<7&&(this.style.left=a.left+o+"px");{let t=this.getBoundingClientRect();t.left+t.width+7>window.innerWidth&&(this.style.left=window.innerWidth-7+o+"px")}}{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[i,s,n]=ja(t);"transform"===i&&await this.animate({transform:["scale(1, 0)","scale(1, 1)"],transformOrigin:["top"===e?"0 100%":"0 0","top"===e?"0 100%":"0 0"]},{duration:s,easing:n}).finished}}this.#ks=l,s()}))}openAtPoint(t,e){return new Promise((async i=>{this.#ys=!1,this.#zs=Nn(),this.#Rs(),this.setAttribute("opened",""),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this}));let s=0,n=0,a=[...this.querySelectorAll(":scope > x-menuitem > x-label > x-message")];await Promise.all(a.map((t=>t.whenReady)));let r=this.getBoundingClientRect();0===r.top&&0===r.left||(s=-r.left,n=-r.top),this.style.left=t+s+"px",this.style.top=e+n+"px",r=this.getBoundingClientRect(),r.right+7>window.innerWidth&&(t-=r.width,this.style.left=t+s+"px",r=this.getBoundingClientRect()),r.bottom+7>window.innerHeight&&(e=e+window.innerHeight-(r.top+r.height)-7,this.style.top=e+n+"px",r=this.getBoundingClientRect(),r.top<7&&(e=7,this.style.top=e+n+"px",this.style.height=window.innerHeight-7-7+"px"));{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=ja(t);"transform"===e&&await this.animate({transform:["scale(0)","scale(1)"],transformOrigin:["0 0","0 0"]},{duration:80,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)"}).finished}this.#ks=n,i()}))}close(t=!0){return new Promise((async e=>{if(this.opened){this.removeAttribute("opened"),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this}));let e=this.closest("x-menuitem");if(e&&e.removeAttribute("expanded"),t){this.setAttribute("animating","");let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=ja(t);"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished,this.removeAttribute("animating")}for(let t of this.querySelectorAll(":scope > x-menuitem")){let e=t.querySelector("x-menu[opened]");e&&e.close()}}e()}))}focusNextMenuItem(){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){let e=null;for(let i=t.nextElementSibling;i;i=i.nextElementSibling)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(null===e&&null!=t.parentElement)for(let i of t.parentElement.children)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(e){e.focus();let i=t.querySelector("x-menu");i&&i.close()}}else this.focusFirstMenuItem()}focusPreviousMenuItem(){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){let e=null;for(let i=t.previousElementSibling;i;i=i.previousElementSibling)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(null===e&&null!=t.parentElement)for(let i of[...t.parentElement.children].reverse())if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(e){e.focus();let i=t.querySelector("x-menu");i&&i.close()}}else this.focusLastMenuItem()}focusFirstMenuItem(){let t=this.querySelectorAll("x-menuitem:not([disabled]):not([hidden])")[0]||null;t&&t.focus()}focusLastMenuItem(){let t=this.querySelectorAll("x-menuitem:not([disabled]):not([hidden])"),e=t.length>0?t[t.length-1]:null;e&&e.focus()}#Ps(t){let e=0;{let t=this.#fs[this.#fs.length-1],i=this.#fs[0];if(this.querySelector("x-menu[opened]")&&t){i||(i=t);let s=this.getBoundingClientRect(),n={x:s.left,y:s.top-75},a={x:s.left+s.width,y:n.y},r={x:s.left,y:s.top+s.height+75},o={x:s.left+s.width,y:r.y},l=!0;if((i.x<s.left||i.x>o.x||i.y<s.top||i.y>o.y)&&(l=!1),this.#ws&&t.x===this.#ws.x&&t.y===this.#ws.y&&(l=!1),l){let s,n;s=a,n=o;let r=(t,e)=>(e.y-t.y)/(e.x-t.x),l=r(t,s),h=r(t,n),d=r(i,s),c=r(i,n);l<d&&h>c?(this.#ws=t,e=300):this.#ws=null}}}e>0?this.#xs=setTimeout((()=>{this.#Ps(t)}),e):t()}#Ts(){this.#xs&&(clearTimeout(this.#xs),this.#xs=null)}#Rs(){this.style.position="fixed",this.style.top="0px",this.style.left="0px",this.style.width=null,this.style.height=null,this.style.minWidth=null,this.style.maxWidth=null}#Ds(){return this.matches("*[closing], *[closing] x-menu")}#As(){this.setAttribute("aria-hidden",!this.opened)}#Y(t){if(t.target!==this&&"hr"!==t.target.localName||t.stopPropagation(),"touch"===t.pointerType&&t.target.closest("x-menu")===this){!1===this.#Cs&&this.#Bs();{let e=t.target.closest("x-menuitem");e&&!1===e.disabled&&e.closest("x-menu")===this?!1===e.matches(":focus")&&this.#Ps((async()=>{let t=this.querySelector(":scope > x-menuitem:focus");if(t){let e=t.querySelector("x-menu");e&&e.close()}e.closest("x-menu");let i=e.querySelector("x-menu"),s=[...this.querySelectorAll(":scope > x-menuitem")].filter((t=>t!==e));i&&!1===i.opened&&i.openNextToElement(e,"horizontal");for(let t of s){let e=t.querySelector("x-menu");e&&e.close()}})):this.#Ps((()=>{this.focus()}))}}}#Es(t){if(!this.#Ds()&&"touch"!==t.pointerType&&t.target.closest("x-menu")===this){!1===this.#Cs&&this.#Bs();{let e=t.target.closest("x-menuitem");e&&!1===e.disabled&&e.closest("x-menu")===this?!1===e.matches(":focus")&&this.#Ps((async()=>{let t=this.querySelector(":scope > x-menuitem:focus");if(t){let e=t.querySelector("x-menu");e&&e.close()}e.focus(),e.closest("x-menu");let i=e.querySelector("x-menu"),s=[...this.querySelectorAll(":scope > x-menuitem")].filter((t=>t!==e));i&&(await jn(60),e.matches(":focus")&&!1===i.opened&&i.openNextToElement(e,"horizontal"));for(let t of s){let e=t.querySelector("x-menu");e&&e.close()}})):this.#Ps((()=>{this.focus()}))}}}#$s(t){t.relatedTarget&&Zn(t.relatedTarget,"x-menu")===this||!0===this.#Cs&&this.#Is()}#Bs(){this.#Ds()||(this.#Cs=!0,this.#Ts())}#Is(){this.#Ds()||(this.#Cs=!1,this.#Ts(),this.focus())}#Ss(t){this.#fs.push({x:t.clientX,y:t.clientY}),this.#fs.length>3&&this.#fs.shift()}#Ms(t){t.target.closest("x-menu")===this?(t.preventDefault(),this.scrollTop=this.scrollTop+t.deltaY,this.#Cs=!0):this.#Cs=!1}#Ls(){if(this.#ys){let t=this.scrollTop-this.#vs;if(this.#vs=this.scrollTop,Nn()-this.#zs>100){let e=this.getBoundingClientRect();t<0?e.bottom+Na(t)<=window.innerHeight-7?this.style.height=e.height+Na(t)+"px":this.style.height=window.innerHeight-14+"px":t>0&&(e.top-t>=7?(this.style.top=this.#ks+e.top-t+"px",this.style.height=e.height+t+"px",this.scrollTop=0,this.#vs=0):(this.style.top=7+this.#ks+"px",this.style.height=window.innerHeight-14+"px"))}}}#W(t){if(this.#Ds())t.preventDefault(),t.stopPropagation();else if("ArrowUp"===t.code)t.preventDefault(),t.stopPropagation(),this.focusPreviousMenuItem();else if("ArrowDown"===t.code)t.preventDefault(),t.stopPropagation(),this.focusNextMenuItem();else if("ArrowRight"===t.code||"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector("x-menuitem:focus");if(e){let i=e.querySelector("x-menu");if(i){t.preventDefault(),t.stopPropagation(),!1===i.opened&&i.openNextToElement(e,"horizontal");let s=i.querySelector("x-menuitem:not([disabled]):not([hidden])");s&&s.focus()}}}else if("ArrowLeft"===t.code){let e=this.querySelector("x-menuitem:focus");if(e){let i=e.closest("x-menu").closest("x-menuitem");i&&i.closest("x-menu")&&(t.preventDefault(),t.stopPropagation(),i.focus(),this.close())}}}}customElements.define("x-menu",Fa);const Ga=Symbol();class Xa extends HTMLElement{static observedAttributes=["disabled"];static#z=Ns`<template><svg id="backdrop" hidden><path id="backdrop-path"></path></svg><x-box id="container"><div id="main"><slot></slot></div><div id="aside"><slot name="aside"></slot></div></x-box></template>`;static#E=Fs`:host{display:flex;align-items:center;width:100%;height:36px;font-size:0.875rem;box-sizing:border-box}:host([disabled]){pointer-events:none;opacity:0.6}:host([hidden]){display:none}#backdrop{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;pointer-events:none;touch-action:none}#backdrop[hidden]{display:none}#backdrop path{fill:red;fill-rule:evenodd;opacity:0;pointer-events:all}#container{flex:1;width:100%;height:100%}#main{display:flex;align-items:center;width:fit-content;height:100%}#aside{margin-left:auto;display:flex;align-items:center;height:100%}::slotted(x-menuitem[ellipsis]){order:9999}
`;get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#Os=!1;#Hs=null;#L=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Xa.#E],this.#$.append(document.importNode(Xa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;new ResizeObserver((()=>this.#js())).observe(this["#container"],{box:"border-box"}),new ResizeObserver((()=>this.#Ns())).observe(this["#main"],{box:"border-box"}),this.#L=new MutationObserver((t=>this.#Fs())),this.#L.observe(this,{childList:!0}),this.addEventListener("focusout",(t=>this.#Pt(t))),this.addEventListener("click",(t=>this.#P(t))),this.#$.addEventListener("click",(t=>this.#Gs(t))),this.#$.addEventListener("pointerdown",(t=>this.#Xs(t))),this.#$.addEventListener("pointerover",(t=>this.#_s(t))),this.#$.addEventListener("wheel",(t=>this.#Zs(t))),this.#$.addEventListener("keydown",(t=>this.#Us(t)))}connectedCallback(){this.setAttribute("role","menubar"),this.setAttribute("aria-disabled",this.disabled),this.#Ys(),window.addEventListener("orientationchange",this.#Hs=()=>{this.#Vs()})}disconnectedCallback(){window.removeEventListener("orientationchange",this.#Hs)}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.#vt()}#Ys(){{let t=this.querySelector(":scope > x-menuitem[ellipsis]");t?t.hasAttribute("slot")&&t.removeAttribute("slot"):(t=Ns`<x-menuitem ellipsis><x-label><strong>⋯</strong></x-label><x-menu id="ellipsis-menu"></x-menu></x-menuitem>`,this.append(t))}let t=[...this.children].filter((t=>"x-menuitem"===t.localName&&""===t.slot)),e=t.find((t=>t.hasAttribute("ellipsis"))),i=[];for(let e of t)e.hasAttribute("autohidden")&&(i.push(e),e.removeAttribute("autohidden"));let s=this.getBoundingClientRect(),n=this["#aside"].getBoundingClientRect(),a=[];for(let e=0;e<t.length;e+=1){let i=t[e];i.getBoundingClientRect().right>s.right-n.width&&a.push(i)}if(a.length<=1)e.setAttribute("autohidden","");else for(let i of[...t].reverse())if(i!==e){if(i.setAttribute("autohidden",""),e.getBoundingClientRect().right<=s.right-n.width)break}{let s=[...this.querySelectorAll(":scope > x-menuitem[autohidden]")];if(!1===rt(s,i,!0)){let i=e.querySelector("x-menu");i.innerHTML="";for(let n of t)if(n!==e)if(n[Ga]||(n[Ga]=n.querySelector(":scope > x-menu")),s.includes(n)){let t=n.cloneNode(!1);for(let e of n.children)"x-menu"!==e.localName&&t.append(e.cloneNode(!0));n[Ga]&&t.append(n[Ga]),i.append(t)}else n[Ga]&&n[Ga].parentElement!==n&&n.append(n[Ga])}}}#qs=Fn(this.#Ys,100,this);#Ws(t){let e=t.querySelector(":scope > x-menu");if(e&&!1===e.opened){let i=this.#Os;t.focus(),this.#Os=!0,this.style.touchAction="none","aside"!==t.slot&&(this["#aside"].style.pointerEvents="none");{e.openNextToElement(t,"vertical");let i=[...this.querySelectorAll(":scope > x-menuitem > x-menu")].filter((t=>t!==e));for(let t of i)t&&t.close(!1)}{let{x:t,y:e,width:i,height:s}=this.getBoundingClientRect();this["#backdrop-path"].setAttribute("d",`\n          M 0 0\n          L ${window.innerWidth} 0\n          L ${window.innerWidth} ${window.innerHeight}\n          L 0 ${window.innerHeight}\n          L 0 0\n          M ${t} ${e}\n          L ${t+i} ${e}\n          L ${t+i} ${e+s}\n          L ${t} ${e+s}\n        `),this["#backdrop"].removeAttribute("hidden")}!1===i&&this.dispatchEvent(new CustomEvent("expand"))}}#Ks(){return new Promise((async t=>{let e=this.#Os;this.#Os=!1,this.style.touchAction=null,this["#aside"].style.pointerEvents=null,this["#backdrop"].setAttribute("hidden",""),this["#backdrop-path"].setAttribute("d","");{let t=this.querySelectorAll(":scope > x-menuitem > x-menu[opened]");for(let e of t)await e.close(!0)}let i=this.querySelector("x-menuitem:focus");i&&i.blur(),!0===e&&this.dispatchEvent(new CustomEvent("collapse")),t()}))}#Js(){let t=[...this.querySelectorAll(":scope > x-menuitem:not([disabled])")],e=this.querySelector(":focus").closest("x-menubar > x-menuitem");if(t.length>1&&e){let i=t.indexOf(e),s=t[i-1]||t[t.length-1];this.#Ws(s)}}#Qs(){let t=[...this.querySelectorAll(":scope > x-menuitem:not([disabled])")],e=this.querySelector(":focus").closest("x-menubar > x-menuitem");if(e&&t.length>1){let i=t.indexOf(e),s=t[i+1]||t[0];this.#Ws(s)}}#vt(){this.setAttribute("aria-disabled",this.disabled)}#Pt(t){null!==t.relatedTarget&&!1!==this.contains(t.relatedTarget)||this.#Ks()}#Vs(){this.#Ks()}#js(){this.isConnected&&this.#qs()}#Ns(){this.isConnected&&this.#qs()}#Fs(){this.isConnected&&this.#qs()}#Zs(t){let e=this.querySelector("x-menu[opened]");e&&!1===e.contains(t.target)&&t.preventDefault()}async#P(t){let e=t.target.closest("x-menuitem");if(e&&!1===t.isTrusted&&!1===t.isTrusted&&!e.closest("[expanded]")){let t=null;for(let i=e;i!==this;i=i.parentElement)"x-menuitem"===i.localName&&(t=i);t.setAttribute("highlighted",""),await jn(150),t.removeAttribute("highlighted")}}async#Gs(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem"),i=t.target.closest("x-menu");if(e&&!1===e.disabled&&i){let t=e.querySelector(":scope > x-menu");e.parentElement!==this&&(t?t.opened&&!1===t.opened&&t.openNextToElement(e,"horizontal"):(this.setAttribute("closing",""),await e.whenTriggerEnd,await this.#Ks(),this.removeAttribute("closing")))}else t.target===this["#backdrop-path"]&&(this.#Ks(),t.preventDefault(),t.stopPropagation())}#Xs(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem");if(e&&!1===e.disabled&&e.parentElement===this){let i=e.querySelector(":scope > x-menu");i?i.opened?this.#Ks():this.#Ws(e):t.preventDefault()}}#_s(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem"),i=t.target.closest("x-menu");e&&!1===e.disabled&&e.parentElement===this&&!i&&this.#Os&&"touch"!==t.pointerType&&(!1===e.hasAttribute("expanded")?this.#Ws(e):e.focus())}#Us(t){if(this.hasAttribute("closing"))t.stopPropagation(),t.preventDefault();else if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector(":scope > x-menuitem:focus");e&&(t.preventDefault(),e.click())}else if("Escape"===t.code)this.#Os&&(t.preventDefault(),this.#Ks());else if("Tab"===t.code){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){t.focus();let e=t.querySelector(":scope > x-menu");e&&(e.tabIndex=-1,e.close().then((()=>{e.tabIndex=-1})))}}else if("ArrowRight"===t.code)this.#Qs();else if("ArrowLeft"===t.code)this.#Js();else if("ArrowDown"===t.code){let e=this.querySelector("x-menuitem:focus > x-menu");e&&(t.preventDefault(),e.focusFirstMenuItem())}else if("ArrowUp"===t.code){let e=this.querySelector("x-menuitem:focus > x-menu");e&&(t.preventDefault(),e.focusLastMenuItem())}}}customElements.define("x-menubar",Xa);class _a extends HTMLElement{static observedAttributes=["disabled"];static#z=Ns`<template><svg id="checkmark" part="checkmark" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="checkmark-path"></path></svg><slot></slot><svg id="arrow" part="arrow" viewBox="0 0 100 100" hidden><path id="arrow-path"></path></svg></template>`;static#E=Fs`:host{display:flex;flex-flow:row;align-items:center;position:relative;padding:0 12px 0 23px;min-height:28px;box-sizing:border-box;cursor:default;user-select:none;-webkit-user-select:none;--trigger-effect: blink}:host([hidden]){display:none}:host([disabled]){pointer-events:none;opacity:0.6}:host(:focus){outline:none}:host-context([debug]):host(:focus){outline:2px solid red}#checkmark{display:none;transition:transform 0.2s cubic-bezier(0.4, 0.0, 0.2, 1);align-self:center;width:18px;height:18px;margin:0 2px 0 -20px;color:inherit;--path-data: M 44 61 L 29 47 L 21 55 L 46 79 L 79 27 L 70 21 L 44 61 Z;}:host([togglable]) #checkmark{display:flex;transform:scale(0);transform-origin:50% 50%}:host([toggled]) #checkmark{display:flex;transform:scale(1)}#checkmark-path{fill:currentColor}#arrow{display:flex;width:16px;height:16px;transform:scale(1.1);align-self:center;margin-left:8px;opacity:1;color:inherit;--path-data: M 26 20 L 26 80 L 74 50 Z;}#arrow[hidden]{display:none}#arrow path{fill:currentColor}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){this.value!==t&&(null===t?this.removeAttribute("value"):this.setAttribute("value",t))}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get togglable(){return this.hasAttribute("togglable")}set togglable(t){t?this.setAttribute("togglable",""):this.removeAttribute("togglable")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get whenTriggerEnd(){return new Promise((t=>{!1===this.#tn?t():this.#en.push(t)}))}#$=null;#U=0;#tn=!1;#en=[];#in=!1;#R=null;#sn=new MutationObserver((()=>this.#nn()));constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[_a.#E],this.#$.append(document.importNode(_a.#z.content,!0)),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("keydown",(t=>this.#W(t)));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){Gn.whenThemeReady.then((()=>{this.#ft(),this.#I()})),this.#nn(),this.#J(),this.#sn.observe(this,{childList:!0,attributes:!1,characterData:!1,subtree:!1}),Gn.addEventListener("themechange",this.#R=()=>this.#an())}disconnectedCallback(){this.#sn.disconnect(),Gn.removeEventListener("themechange",this.#R)}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.#J()}#ft(){let t=getComputedStyle(this["#checkmark"]).getPropertyValue("--path-data");this["#checkmark-path"].setAttribute("d",t)}#I(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#nn(){if(this.parentElement&&"x-menubar"===this.parentElement.localName)this["#arrow"].setAttribute("hidden","");else{this.querySelector("x-menu")?this["#arrow"].removeAttribute("hidden"):this["#arrow"].setAttribute("hidden","")}}#J(){this.setAttribute("role","menuitem"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#an(){this.#ft(),this.#I()}async#Y(t){if(this.#in=this.matches(":focus"),t.buttons>1)return!1;if(this.matches("[closing] x-menuitem"))return t.preventDefault(),void t.stopPropagation();if(t.target.closest("x-menuitem")===this){this.setPointerCapture(t.pointerId);{let e,i=!0,s=Date.now();this.addEventListener("pointerup",e=async()=>{this.removeEventListener("pointerup",e),this.removeEventListener("pointercancel",e),i=!1;let n=Date.now()-s,a="touch"===t.pointerType?600:150;n<a&&await jn(a-n),this.removeAttribute("pressed")}),this.addEventListener("pointercancel",e),i&&this.setAttribute("pressed","")}}}async#P(t){if(t.buttons>1)return;let e=t.target.closest("x-menuitem"),i=t.target.closest("x-menu");if(e===this&&i===this.closest("x-menu")&&!this.matches("[closing] x-menuitem"))if(t.detail>0&&!1===Ei(e.getBoundingClientRect(),new DOMPoint(t.clientX,t.clientY)))t.stopImmediatePropagation();else{if(this.togglable){let t=new CustomEvent("toggle",{bubbles:!0,cancelable:!0});this.dispatchEvent(t),!1===t.defaultPrevented&&(this.toggled=!this.toggled)}if(!this.querySelector(":scope > x-menu")&&"x-menubar"!==this.parentElement.localName){let t=getComputedStyle(this).getPropertyValue("--trigger-effect").trim();if("blink"===t){this.#tn=!0,this.#in?(this.parentElement.focus(),await jn(150),this.focus(),await jn(150)):(this.focus(),await jn(150),this.parentElement.focus(),await jn(150));for(let t of this.#en)t();this.#en=[],this.#tn=!1}else if("none"===t){this.#tn=!0,await jn(50);for(let t of this.#en)t();this.#en=[],this.#tn=!1}}}}#W(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.querySelector("x-menu")||(t.stopPropagation(),this.click()))}}customElements.define("x-menuitem",_a);class Za extends HTMLElement{static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:block;box-sizing:border-box}
`;get value(){let t=this.querySelector("x-navitem[toggled]");return t?t.value:null}set value(t){let e=[...this.querySelectorAll("x-navitem")],i=null===t?null:e.find((e=>e.value===t));for(let t of e)t.toggled=t===i}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Za.#E],this.#$.append(document.importNode(Za.#z.content,!0)),this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("keydown",(t=>this.#W(t)))}connectedCallback(){this.setAttribute("role","navigation"),"x-navitem"===this.parentElement?.localName&&this.parentElement.setAttribute("expandable",""),this.closest("x-navitem")&&this.setAttribute("slot","expandable")}#rn(){let t=this;for(;;){let e=t.parentElement?.closest("x-nav");if(!e)break;t=e}return t}#P(t){let e=t.target.closest("x-navitem");if(e&&!1===e.hasAttribute("expandable")&&("a"!==e.parentElement.localName||"_blank"!==e.parentElement.getAttribute("target"))&&e.closest("x-nav")===this){for(let t of this.#rn().querySelectorAll("x-navitem"))t===e?!1===t.toggled&&(t.toggled=!0):t.toggled=!1;e.dispatchEvent(new CustomEvent("toggle",{bubbles:!0}))}}#Y(t){if(t.buttons>1)return void t.preventDefault();let e=t.target.closest("x-navitem");if(e&&e.closest("x-nav")===this){if(t.preventDefault(),!1===this.matches(":focus")){let t,e=Zn(this.parentNode,"*[tabindex]:not(a,x-navitem)");this.addEventListener("pointerup",t=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),e?e.focus():(this.focus(),this.blur())}),this.addEventListener("pointercancel",t)}if("x-nav"!==t.target.localName){let t,i=Date.now(),s=!0,n=parseInt(getComputedStyle(e).getPropertyValue("--min-pressed-time")||"150ms");this.addEventListener("pointerup",t=async()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),s=!1;let a=Date.now()-i;a<n&&await jn(n-a),e.removeAttribute("pressed")}),this.addEventListener("pointercancel",t),(async()=>{!1===e.hasAttribute("toggled")&&await jn(40),s&&e.setAttribute("pressed","")})()}}}#W(t){let e=this.#rn(),i=e.querySelector("x-navitem:focus");if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code)t.preventDefault(),t.stopPropagation(),i.click();else if("ArrowLeft"===t.code)i.expandable&&i.expanded&&(t.preventDefault(),t.stopPropagation(),i.click());else if("ArrowRight"===t.code)i.expandable&&!1===i.expanded&&(t.preventDefault(),t.stopPropagation(),i.click());else if("ArrowUp"===t.code||"ArrowDown"===t.code){let s=[...e.querySelectorAll("x-navitem:not([disabled])")];s=s.filter((t=>0!==t.clientHeight));let n=s.indexOf(i),a="ArrowUp"===t.code?s[n-1]:s[n+1];a&&(t.preventDefault(),t.stopPropagation(),a.focus())}}}customElements.define("x-nav",Za);class Ua extends HTMLElement{static observedAttributes=["disabled"];static#z=Ns`<template><div id="button" part="button"><slot></slot><div id="arrow" part="arrow"><svg id="arrow-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg></div></div><div id="main"><slot name="expandable"></slot></div></template>`;static#E=Fs`:host{display:block;box-sizing:border-box}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}#button{display:flex;align-items:center;justify-content:center;padding:8px 15px;min-height:36px;box-sizing:border-box}#main{height:0;display:none;overflow:hidden}:host([expanded]) #main, :host([animating]) #main{display:block;height:auto}:host([expanded]:not([animating])) #main{overflow:visible}#arrow{display:none;align-items:center;justify-content:flex-start;pointer-events:none;margin-left:auto;padding-left:4px;--path-data: M 26 20 L 26 80 L 74 50 Z;}:host([expandable]) #arrow{display:flex}:host([animating]) #arrow{outline:none!important}#arrow-svg{display:flex;width:16px;height:16px;transform:rotate(0deg);color:currentColor}#arrow-svg:focus{background:transparent;outline:none}:host([expanded]) #arrow-svg{transform:rotate(90deg)}#arrow-path{fill:currentColor}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):""}set value(t){this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get expanded(){return this.hasAttribute("expanded")}set expanded(t){t?this.setAttribute("expanded",""):this.removeAttribute("expanded")}get expandable(){return this.hasAttribute("expandable")}#$;#R;#A=[];#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ua.#E],this.#$.append(document.importNode(Ua.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#P(t)))}connectedCallback(){Gn.whenThemeReady.then((()=>{this.#I()})),Gn.addEventListener("themechange",this.#R=()=>this.#I()),this.parentElement&&"a"===this.parentElement.localName&&-1!==this.parentElement.tabIndex&&(this.parentElement.tabIndex=-1),this.#J()}disconnectedCallback(){Gn.removeEventListener("themechange",this.#R)}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.#J()}expand(t=!0){return new Promise((async e=>{if(!1===this.expanded)if(!1===t)this.#H(),this.removeAttribute("animating"),this.expanded=!0;else if(!0===t){let t=this["#main"].getBoundingClientRect();this.#H(),this.removeAttribute("animating"),this.expanded=!0;let e=this["#main"].getBoundingClientRect();this.setAttribute("animating","");let i=[this["#main"].animate({height:[`${t.height}px`,`${e.height}px`]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"}),this["#arrow-svg"].animate({transform:["rotate(0deg)","rotate(90deg)"]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})];this.#A=i,await Promise.all(i.map((t=>t.finished))),this.#A===i&&this.removeAttribute("animating")}e()}))}collapse(t=!0){return new Promise((async e=>{if(!0===this.expanded)if(!1===t)this.#H(),this.removeAttribute("animating"),this.expanded=!1;else if(!0===t){let t=this["#main"].getBoundingClientRect();this.#H(),this.removeAttribute("animating"),this.expanded=!1;let e=this["#main"].getBoundingClientRect();this.setAttribute("animating","");let i=[this["#main"].animate({height:[`${t.height}px`,`${e.height}px`]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"}),this["#arrow-svg"].animate({transform:["rotate(90deg)","rotate(0deg)"]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})];this.#A=i,await Promise.all(i.map((t=>t.finished))),this.#A===i&&this.removeAttribute("animating")}e()}))}#P(t){if(this===t.target.closest("x-navitem")&&this.hasAttribute("expandable")&&"x-nav"!==t.target.localName)if(this.expanded){let t=new CustomEvent("collapse",{bubbles:!0,cancelable:!0});this.dispatchEvent(t),!1===t.defaultPrevented&&this.collapse()}else{let t=new CustomEvent("expand",{bubbles:!0,cancelable:!0});this.dispatchEvent(t),!1===t.defaultPrevented&&this.expand()}}#H(){this.#A.length>0&&this.#A.map((t=>t.finish()))}#J(){this.setAttribute("role","button"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#I(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}}customElements.define("x-navitem",Ua);class Ya extends HTMLElement{static observedAttributes=["opened"];static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:none;position:fixed;min-width:15px;min-height:15px;bottom:15px;left:50%;transform:translateX(-50%);padding:5px 12px;box-sizing:border-box;color:rgba(255, 255, 255, 0.9);background:#434343;z-index:9999;font-size:0.75rem;user-select:text;-webkit-user-select:none;transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1)}:host([opened]), :host([animating]){display:block}:host(:focus){outline:none}
`;get opened(){return this.hasAttribute("opened")}set opened(t){!0===t?this.setAttribute("opened",""):this.removeAttribute("opened"),this.#on=0}get timeout(){return this.hasAttribute("timeout")?parseFloat(this.getAttribute("timeout")):0}set timeout(t){this.setAttribute("timeout",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#on=0;#ln=null;#hn=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ya.#E],this.#$.append(document.importNode(Ya.#z.content,!0))}connectedCallback(){this.setAttribute("tabindex","0")}attributeChangedCallback(t,e,i){e!==i&&"opened"===t&&(this.opened?this.#dn():this.#K())}#dn(){if(this.isConnected){let t=0-this.getBoundingClientRect().height-10+"px",e=getComputedStyle(this).bottom;this.animate({bottom:[t,e]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})}if(this.timeout>0&&(this.#on=0,this.#ln=setInterval((()=>{this.#on+=100,this.timeout>0&&this.#on>this.timeout&&(this.opened=!1)}),100)),this.timeout>=0){let t=Nn();window.addEventListener("pointerdown",this.#hn=e=>{let i=Nn(),s=this.getBoundingClientRect();i-t>10&&!1===Ei(s,new DOMPoint(e.clientX,e.clientY))&&(this.opened=!1)},!0)}}async#K(){if(null!==this.#ln&&(clearInterval(this.#ln),this.#ln=null),this.isConnected){this.setAttribute("animating","");let t=getComputedStyle(this).bottom,e=0-this.getBoundingClientRect().height-10+"px",i=this.animate({bottom:[t,e]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});await i.finished,this.removeAttribute("animating")}window.removeEventListener("pointerdown",this.#hn,!0)}}customElements.define("x-notification",Ya);let{isFinite:Va}=Number;const qa=["0","1","2","3","4","5","6","7","8","9","-","+",",","."];class Wa extends HTMLElement{static observedAttributes=["value","min","max","prefix","suffix","disabled"];static#z=Ns`<template><div id="main"><div id="editor-container"><div id="editor" contenteditable="plaintext-only" spellcheck="false"></div></div><slot></slot></div></template>`;static#E=Fs`:host{display:block;position:relative;max-width:160px;height:32px;box-sizing:border-box;font-size:0.78125rem;line-height:10;--inner-padding: 0 6px;}:host(:hover){cursor:text}:host([mixed]){color:rgba(0, 0, 0, 0.7)}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}#main{display:flex;align-items:center;height:100%}#editor-container{display:flex;align-items:center;width:100%;height:100%;padding:var(--inner-padding);box-sizing:border-box;overflow:hidden}#editor{width:100%;color:inherit;background:none;border:none;outline:none;font-family:inherit;font-size:inherit;line-height:inherit;white-space:nowrap;font-variant-numeric:tabular-nums;overflow:hidden;text-overflow:ellipsis}:host(:focus) #editor{overflow:visible;text-overflow:clip}:host([disabled]) #editor{user-select:none;-webkit-user-select:none}#editor::-webkit-scrollbar{display:none}#editor::before{content:attr(data-prefix);pointer-events:none}#editor::after{content:attr(data-suffix);pointer-events:none}:host([empty]) #editor::before, :host([empty]) #editor::after, :host(:focus) #editor::before, :host(:focus) #editor::after{display:none}
`;get value(){return this.hasAttribute("value")?parseFloat(this.getAttribute("value")):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get min(){return this.hasAttribute("min")?parseFloat(this.getAttribute("min")):-Infinity}set min(t){Va(t)?this.setAttribute("min",t):this.removeAttribute("min")}get max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):Infinity}set max(t){Va(t)?this.setAttribute("max",t):this.removeAttribute("max")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get precision(){return this.hasAttribute("precision")?parseFloat(this.getAttribute("precision")):20}set precision(t){this.setAttribute("precision",t)}get step(){return this.hasAttribute("step")?parseFloat(this.getAttribute("step")):1}set step(t){this.setAttribute("step",t)}get prefix(){return this.hasAttribute("prefix")?this.getAttribute("prefix"):""}set prefix(t){this.setAttribute("prefix",t)}get suffix(){return this.hasAttribute("suffix")?this.getAttribute("suffix"):""}set suffix(t){this.setAttribute("suffix",t)}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;#cn=!1;#un=!1;#pn=!1;#mn=!1;#bn=!1;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Wa.#E],this.#$.append(document.importNode(Wa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#Xs(t))),this.#$.addEventListener("wheel",(t=>this.#Ms(t))),this["#editor"].addEventListener("paste",(t=>this.#gn(t))),this["#editor"].addEventListener("input",(t=>this.#fn(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#q())),this.addEventListener("keydown",(t=>this.#W(t))),this.addEventListener("keyup",(t=>this.#xn(t))),this.addEventListener("keypress",(t=>this.#wn(t))),this.addEventListener("incrementstart",(t=>this.#vn(t))),this.addEventListener("decrementstart",(t=>this.#kn(t))),this.addEventListener("focusin",(t=>this.#Rt(t))),this.addEventListener("focusout",(t=>this.#Pt(t))),"gecko"===Hn()&&(this["#editor"].setAttribute("contenteditable",""),this["#editor"].addEventListener("beforeinput",(t=>{if("insertFromPaste"===t.inputType&&t.dataTransfer.types.includes("text/plain")){t.preventDefault();let e=window.getSelection(),i=e.getRangeAt(0);i.deleteContents(),i.insertNode(document.createTextNode(t.dataTransfer.getData("text/plain"))),e.collapseToEnd()}})))}connectedCallback(){this.#J(),this.#Xt()}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Zt():"min"===t?this.#yn():"max"===t?this.#Cn():"prefix"===t?this.#zn():"suffix"===t?this.#En():"disabled"===t&&this.#vt())}#$n(t=!1){let e=this.value,i=this.value;i+=t?10*this.step:this.step,i=ki(i,this.min,this.max,Ci(this.step)),e!==i&&(this.value=i),this.matches(":focus")&&document.execCommand("selectAll"),this.#Sn()}#Mn(t=!1){let e=this.value,i=this.value;i-=t?10*this.step:this.step,i=ki(i,this.min,this.max,Ci(this.step)),e!==i&&(this.value=i),this.matches(":focus")&&document.execCommand("selectAll"),this.#Sn()}#Ln(){this.#un||(this.#un=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})))}#An=((t,e,i,s=!1)=>{let n=null,a=null;return(...r)=>{let o=s&&!n;return clearTimeout(n),n=setTimeout((()=>{n=null,s||(a=t.apply(i,r))}),e),o&&(a=t.apply(i,r)),a}})((()=>{!this.#un||this.#pn||this.#mn||this.#bn||(this.#un=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})))}),500);#Rn(){let t=this["#editor"].textContent,e=parseFloat(t);Number.isNaN(e)&&(e=null);let i=null===e?null:ki(e,this.min,this.max);i!==this.value?(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this.value=i,this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))):e!==this.value?this.value=i:this.#Pn()}#Xt(){this.#Pn(),this.#Sn(),this.#Tn()}#Pn(){if(this.hasAttribute("value"))if(this.step<1){let t=parseFloat(this.getAttribute("value")),e=Ci(this.step),i=Ci(t);this["#editor"].textContent=e>0&&i<e?t.toFixed(e):this.getAttribute("value").trim()}else this["#editor"].textContent=this.getAttribute("value").trim();else this["#editor"].textContent=""}#Sn(){let t=null;if(this.matches(":focus")){let e=this["#editor"].textContent;t=""===e.trim()?null:parseFloat(e)}else t=this.value;null===t?this.setAttribute("empty",""):this.removeAttribute("empty")}#Tn(){let t=this.querySelector("x-stepper");if(t){let e=this.value>this.min,i=this.value<this.max;!0===i&&!0===e?t.removeAttribute("disabled"):!1===i&&!1===e?t.setAttribute("disabled",""):!1===i?t.setAttribute("disabled","increment"):!1===e&&t.setAttribute("disabled","decrement")}}#J(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#Zt(){this.#Xt()}#yn(){this.#Tn()}#Cn(){this.#Tn()}#zn(){this["#editor"].setAttribute("data-prefix",this.prefix)}#En(){this["#editor"].setAttribute("data-suffix",this.suffix)}#vt(){this["#editor"].contentEditable=this.disabled?"false":"plaintext-only",this.#J()}#Rt(){document.execCommand("selectAll"),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#Pt(){"chromium"===Hn()&&this.#$.getSelection().collapse(this["#main"]),this["#editor"].scrollLeft=0,this.#Rn(),this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0}))}#fn(){this.#Sn(),this.#Tn()}#Ms(t){this.matches(":focus")&&(t.preventDefault(),this.#Ln(),t.wheelDeltaX>0||t.wheelDeltaY>0?(this.#$n(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))):(this.#Mn(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#An())}#P(t){t.preventDefault()}#Y(t){"x-stepper"===t.target.localName&&t.preventDefault()}#Xs(t){if(t.buttons>1||!1===t.isPrimary)t.preventDefault();else if(t.target===this["#editor"]&&!1===this["#editor"].matches(":focus")){t.preventDefault();let e,i,s=this.value,n=t.clientX,a=new DOMPoint(t.clientX,t.clientY);this.style.cursor="col-resize",this["#editor"].setPointerCapture(t.pointerId),this["#editor"].addEventListener("pointermove",e=e=>{let i=new DOMPoint(e.clientX,e.clientY),r=e.timeStamp-t.timeStamp,o=e.clientX!==n,l=zi(a,i)>3||r>80;if(n=e.clientX,o&&l&&e.isPrimary){!1===this.#cn&&(this.#cn=!0,this.#un=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})));let i=e.clientX-t.clientX,n=s+i*this.step;n=ki(n,this.min,this.max,Ci(this.step)),this.value=n,this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}),this["#editor"].addEventListener("pointerup",i=()=>{this["#editor"].removeEventListener("pointermove",e),this["#editor"].removeEventListener("pointerup",i),this["#editor"].removeEventListener("pointercancel",i),this.style.cursor=null,!0===this.#cn?(this.#cn=!1,this.#un=!1,this.dispatchEvent(new CustomEvent("changeend",{detail:this.value!==s,bubbles:!0}))):(this["#editor"].focus(),document.execCommand("selectAll"))}),this["#editor"].addEventListener("pointercancel",i)}}#V(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#q(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#vn(t){let e,i;this.matches(":focus")&&this.#Rn(),this.#bn=!0,this.addEventListener("increment",e=t=>{this.#Ln(),this.#$n(t.detail.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#An()}),this.addEventListener("incrementend",i=t=>{this.#bn=!1,this.removeEventListener("increment",e),this.removeEventListener("incrementend",i)})}#kn(t){let e,i;this.matches(":focus")&&this.#Rn(),this.#bn=!0,this.addEventListener("decrement",e=t=>{this.#Ln(),this.#Mn(t.detail.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#An()}),this.addEventListener("decrementend",i=t=>{this.#bn=!1,this.removeEventListener("decrement",e),this.removeEventListener("decrementend",i)})}#W(t){"ArrowDown"===t.code?(t.preventDefault(),this.#pn=!0,this.#Ln(),this.#Mn(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#An()):"ArrowUp"===t.code?(t.preventDefault(),this.#pn=!0,this.#Ln(),this.#$n(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#An()):"Backspace"===t.code?this.#mn=!0:"Enter"!==t.code&&"NumpadEnter"!==t.code||(this.#Rn(),document.execCommand("selectAll"))}#xn(t){"ArrowDown"===t.code||"ArrowUp"===t.code?(this.#pn=!1,this.#An()):"Backspace"===t.code&&(this.#mn=!1)}#wn(t){!1===t.ctrlKey&&!1===t.altKey&&!1===t.metaKey&&!1===qa.includes(t.key)&&t.preventDefault()}async#gn(t){t.preventDefault();let e=t.clipboardData.getData("text/plain").trim();(t=>{let e=Oa(t);return!1===Ia(e)&&Ba(e)})(e)&&(await jn(1),document.execCommand("insertText",!1,e))}}customElements.define("x-numberinput",Wa);class Ka extends HTMLElement{static observedAttributes=["value","max","controls","href"];static#z=Ns`<template><div id="items"></div></template>`;static#E=Fs`:host{display:block;box-sizing:border-box;width:100%;--prev-path-data:  M 74 20 L 74 80 L 26 50 L 74 20 Z;--next-path-data:  M 26 20 L 26 80 L 74 50 Z;--first-path-data: M 16 20 L 26 20 L 26 80 L 16 80 L 16 20 Z M 84 20 L 84 80 L 36 50 L 84 20 Z;--last-path-data:  M 84 20 L 74 20 L 74 80 L 84 80 L 84 20 Z M 16 20 L 16 80 L 64 50 L 16 20 Z;}:host([hidden]){display:none}:host([max="1"]){display:none}#items{display:flex;align-items:center;justify-content:center}#items a{color:inherit;text-decoration:none}.item{display:flex;align-items:center;justify-content:center;margin:0 3px;height:30px;box-sizing:border-box;border-width:1px;border-style:solid;outline-offset:0;font-size:0.875rem;font-weight:700;line-height:1;user-select:none;-webkit-user-select:none}div.item{cursor:default}.item[data-disabled]{opacity:0}#first-item, #last-item, #prev-item, #next-item{padding:0 4px}.nth-item{padding:0 10px}.ellipsis-item{background:none;border:none}.item:first-child{margin-left:0}.item:last-child{margin-right:0}.ellipsis-item{flex:0}.arrow{display:flex;width:16px;height:16px}.arrow path{fill:currentColor}
`;get value(){return this.hasAttribute("value")?parseInt(this.getAttribute("value")):1}set value(t){t=ki(t,1,this.max),this.setAttribute("value",t)}get max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):5}set max(t){this.setAttribute("max",t)}get controls(){return this.hasAttribute("controls")?this.getAttribute("controls").replace(/\s+/g," ").split(" "):["prev","next","nth"]}set controls(t){this.setAttribute("controls",t.join(" "))}get href(){return this.getAttribute("href")}set href(t){t?this.setAttribute("href",t):this.removeAttribute("href")}#$;#R;constructor(){super()}connectedCallback(){if(!this.#$){this.setAttribute("role","navigation"),this.setAttribute("aria-label","pagination"),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ka.#E],this.#$.append(document.importNode(Ka.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#Y(t))),this.#$.addEventListener("click",(t=>this.#P(t))),this.addEventListener("keydown",(t=>this.#W(t)))}Gn.addEventListener("themechange",this.#R=()=>this.#an()),Gn.whenThemeReady.then((()=>this.#Xt()))}disconnectedCallback(){Gn.removeEventListener("themechange",this.#R)}attributeChangedCallback(t,e,i){e!==i&&this.#$&&("value"===t||"max"===t||"controls"===t||"href"===t)&&this.#Xt()}#an(){this.#Xt()}#Y(t){if(t.buttons>1)return void t.preventDefault();let e=t.target.closest(".item");if(e&&(t.preventDefault(),!1===e.matches(":focus"))){let t,e=Zn(this,"*[tabindex]:not(a)");this.addEventListener("pointerup",t=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),e?e.focus():(this.focus(),this.blur())}),this.addEventListener("pointercancel",t)}}#P(t){let e=t.target.closest(".item"),i=t.target.closest("a");e&&void 0!==e.dataset.value&&(i&&t.preventDefault(),!1===e.part.contains("toggled-item")&&(this.value=parseInt(e.dataset.value),this.dispatchEvent(new CustomEvent("toggle"))))}#W(t){let e=this["#items"].querySelector(":focus");if(e)if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code)t.preventDefault(),t.stopPropagation(),e.click();else if("ArrowRight"===t.code||"ArrowLeft"===t.code){let i=[...this["#items"].children].filter((t=>t.hasAttribute("data-value")&&!t.hasAttribute("data-disabled"))),s=i.indexOf(e);if("ArrowRight"===t.code){let t=i[s+1];t&&t.focus()}else if("ArrowLeft"===t.code){let t=i[s-1];t&&t.focus()}}}#Dn(){let t="";if(this.controls.includes("first")&&this.max>1&&(t+=this.#Bn(1,"first")),this.controls.includes("prev")&&this.max>1&&(t+=this.#Bn(Math.max(1,this.value-1),"prev")),this.controls.includes("nth"))if(this.max<=10)for(let e=1;e<=this.max;e+=1)e===this.value?t+=this.#In(e,!0):t+=this.#In(e,!1);else if(this.value<=6){for(let e=1;e<=7;e+=1)e===this.value?t+=this.#In(e,!0):t+=this.#In(e,!1);t+=this.#On();for(let e of[this.max-1,this.max])t+=this.#In(e,!1)}else if(this.value>this.max-6){for(let e of[1,2])t+=this.#In(e,!1);t+=this.#On();for(let e=this.max-6;e<=this.max;e+=1)t+=this.#In(e,e===this.value)}else{for(let e of[1,2])t+=this.#In(e,!1);t+=this.#On();for(let e=this.value-1;e<this.value+4;e+=1)t+=this.#In(e,e===this.value);t+=this.#On();for(let e of[this.max-1,this.max])t+=this.#In(e,!1)}return this.controls.includes("next")&&this.max>1&&(t+=this.#Bn(Math.min(this.max,this.value+1),"next")),this.controls.includes("last")&&this.max>1&&(t+=this.#Bn(this.max,"last")),t}#Bn(t=1,e="prev"){let i='part="item"',s=`data-value="${t}"`,n=t===this.value?"data-disabled":"",a=t===this.value?'tabindex="-1"':'tabindex="0"';if(this.href){return`\n        <a id="${e}-item" class="item" ${i} ${s} ${n} ${`href="${this.#Hn(t)}" rel="${e}"`} ${a}>\n          <svg id="${e}-arrow" class="arrow" viewBox="0 0 100 100">\n            <path id="${e}-path"></path>\n          </svg>\n        </a>\n      `}return`\n        <div id="${e}-item" class="item" ${i} ${s} ${n} ${a}>\n          <svg id="${e}-arrow" class="arrow" viewBox="0 0 100 100">\n            <path id="${e}-path"></path>\n          </svg>\n        </div>\n      `}#In(t=1,e=!1){let i=e||!this.href?null:this.#Hn(t),s=`id="item-${t}"`,n=`part="item ${e?" toggled-item":""}"`,a=`data-value="${t}"`,r=e?'tabindex="-1"':'tabindex="0"';if(i){return`<a class="item nth-item" ${s} ${n} ${a} ${r} ${`href="${i}" rel="${t}"`}>${t}</a>`}return`<div class="item nth-item" ${s} ${n} ${a} ${r}>${t}</div>`}#On(){return'<div class="item ellipsis-item">…</div>'}#Hn(t=1){let e=new URL(this.href);return 1===t?e.searchParams.delete("page"):e.searchParams.set("page",t),e.href}#Xt(){let t=this["#items"].querySelector(":focus");this["#items"].innerHTML=this.#Dn();for(let t of this["#items"].querySelectorAll("[id]"))this["#"+t.id]=t;if(t){let e=this["#items"].querySelector(`#${t.id}:not([data-disabled])`);e?e.focus():(e=this["#items"].querySelector('[part*="toggled-item"]'),e&&e.focus())}{let t=getComputedStyle(this);for(let e of["prev","next","first","last"]){let i=this["#items"].querySelector(`#${e}-path`);i&&i.setAttribute("d",t.getPropertyValue(`--${e}-path-data`))}}}}customElements.define("x-pager",Ka);class Ja extends HTMLElement{static observedAttributes=["modal"];static#z=Ns`<template><svg id="arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path" part="arrow-path"></path></svg><slot id="slot"></slot></template>`;static#E=Fs`:host{position:fixed;display:none;top:0;left:0;min-height:30px;z-index:1001;box-sizing:border-box;background:white;-webkit-app-region:no-drag;--align: bottom;--arrow-size: 20px;--open-transition: 900 transform cubic-bezier(0.4, 0, 0.2, 1);--close-transition: 200 opacity cubic-bezier(0.4, 0, 0.2, 1);}:host(:focus){outline:none}:host([opened]), :host([animating]){display:block}#arrow{position:fixed;box-sizing:border-box;content:"";overflow:visible}#arrow[data-align="top"], #arrow[data-align="bottom"]{width:var(--arrow-size);height:calc(var(--arrow-size) * 0.6);transform:translate(-50%, 0)}#arrow[data-align="left"], #arrow[data-align="right"]{width:calc(var(--arrow-size) * 0.6);height:var(--arrow-size);transform:translate(0, -50%)}#arrow-path{stroke-width:1;vector-effect:non-scaling-stroke}#arrow[data-align="left"] #arrow-path{clip-path:polygon(0% -50%, 150% -50%, 150% 200%, 0% 150%)}#arrow[data-align="right"] #arrow-path{clip-path:polygon(-50% -50%, 100% -50%, 100% 150%, -50% 150%)}#arrow[data-align="top"] #arrow-path{clip-path:polygon(-50% 0%, 150% 0%, 150% 150%, -50% 150%)}#arrow[data-align="bottom"] #arrow-path{clip-path:polygon(-50% -50%, 150% -50%, 150% 100%, -50% 100%)}#slot{border-radius:inherit}
`;get opened(){return this.hasAttribute("opened")}get modal(){return this.hasAttribute("modal")}set modal(t){t?this.setAttribute("modal",""):this.removeAttribute("modal")}#$=null;#jn=null;#Nn=new ResizeObserver((()=>this.#Mi()));#Fn=null;#Gn;#Xn;#St;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ja.#E],this.#$.append(document.importNode(Ja.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#backdrop"]=Xn("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>{t.preventDefault()})),this["#backdrop"].addEventListener("pointerdown",(t=>{this.hasAttribute("animating")?t.stopPropagation():this.parentNode&&"x-button"!==this.parentNode.localName&&"x-colorselect"!==this.parentNode.localName&&this.close()}))}connectedCallback(){this.tabIndex=-1}attributeChangedCallback(t,e,i){e!==i&&"modal"===t&&(this.modal&&this.opened?this["#backdrop"].show():this["#backdrop"].hide())}#Mi(){this.#_n(this.#Fn)}open(t,e=!0){return new Promise((async i=>{if(this.#Fn=t,!1===this.opened&&(this.modal&&this["#backdrop"].show(!1),this.setAttribute("opened",""),this.#Nn.observe(this),window.addEventListener("resize",this.#Xn=()=>this.#Mi()),Gn.addEventListener("themechange",this.#St=()=>this.#Zn()),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),await new Promise((t=>{requestAnimationFrame(t)})),this.#Zn(),this.#_n(t),this.#jn=Un(this),this.#jn&&this.#jn.addEventListener("scroll",this.#Gn=()=>{this.close()},{once:!0}),e)){let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=ja(t);"transform"===e&&await this.animate({transform:["scale(1, 0)","scale(1, 1)"],transformOrigin:["0 0","0 0"]},{duration:i,easing:s}).finished}i()}))}close(t=!0){return new Promise((async e=>{if(!0===this.opened&&(this.removeAttribute("opened"),this.#Nn.disconnect(),window.removeEventListener("resize",this.#Xn),Gn.removeEventListener("themechange",this.#St),this["#backdrop"].hide(),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this})),this.#jn.removeEventListener("scroll",this.#Gn),t)){let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=ja(t);this.setAttribute("animating",""),"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished,this.removeAttribute("animating")}e()}))}#_n(t){let e=getComputedStyle(this).getPropertyValue("--align").trim(),i=parseInt(getComputedStyle(this).borderWidth),s=0,n=0,a=null;this.style.maxWidth=null,this.style.maxHeight=null,this.style.left="0px",this.style.top="0px";{let e=this.getBoundingClientRect();0===e.top&&0===e.left||(s=-e.left,n=-e.top),a=t instanceof DOMPoint?new DOMRect(t.x,t.y,0,0):t instanceof DOMRect?t:t instanceof Element?t.getBoundingClientRect():new DOMRect}if("bottom"===e||"top"===e){let t=(t=!1)=>{this.style.maxHeight=null,this["#arrow"].setAttribute("data-align","bottom"),this["#arrow-path"].setAttribute("d","M 0 100, L 50 0, L 100 100");let e=this.getBoundingClientRect(),s=this["#arrow"].getBoundingClientRect(),r=0;if(this["#arrow"].style.top=n+a.bottom+2+i+"px",this.style.top=n+a.bottom+2+s.height+"px",e=this.getBoundingClientRect(),r=e.bottom+8-window.innerHeight,t&&r>0){let t=e.height-r;r=0,this.style.maxHeight=t+"px"}return r},r=(t=!1)=>{this.style.maxHeight=null,this["#arrow"].setAttribute("data-align","top"),this["#arrow-path"].setAttribute("d","M 0 0, L 50 100, L 100 0");let e=this.getBoundingClientRect(),s=this["#arrow"].getBoundingClientRect(),r=0;if(this["#arrow"].style.top=Math.floor(n+a.top-2-i-s.height)+"px",this.style.top=n+a.top-2-s.height-e.height+"px",e=this.getBoundingClientRect(),r=-(e.top-8),t&&r>0){let t=e.height-r;r=0,this.style.maxHeight=t+"px",this.style.top=n+a.top-2-s.height-t+"px"}return r},o=()=>{this.style.maxWidth=null;let t=this.getBoundingClientRect(),e=0,i=0;return this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+a.left+a.width/2-t.width/2+"px",t=this.getBoundingClientRect(),e=-(t.left-8),i=t.right+8-window.innerWidth,[e,i]},l=(t=!1)=>{this.style.maxWidth=null;let e=this.getBoundingClientRect(),i=0;if(this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+window.innerWidth-8-e.width+"px",e=this.getBoundingClientRect(),i=-(e.left-8),t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px",this.style.left=s+window.innerWidth-8-t+"px"}return i},h=(t=!1)=>{this.style.maxWidth=null;let e=this.getBoundingClientRect(),i=0;if(this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+8+"px",e=this.getBoundingClientRect(),i=e.right+8-window.innerWidth,t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px"}return i};if("bottom"===e){let e=t();if(e>0){let i=r();i>0&&(i>e?t(!0):r(!0))}}else if("top"===e){let e=r();if(e>0){let i=t();i>0&&(i>e?r(!0):t(!0))}}{let[t,e]=o();e>0?(t=l(),t>0&&l(!0)):t>0&&(e=h(),e>0&&h(!0))}}else if("right"===e||"left"===e){let t=(t=!1)=>{this.style.maxWidth=null,this["#arrow"].setAttribute("data-align","right"),this["#arrow-path"].setAttribute("d","M 100 0, L 0 50, L 100 100");let e=this.getBoundingClientRect(),n=this["#arrow"].getBoundingClientRect(),r=0;if(this["#arrow"].style.left=s+a.right+2+i+"px",this.style.left=s+a.right+2+n.width+"px",e=this.getBoundingClientRect(),r=e.right+8-window.innerWidth,t&&r>0){let t=e.width-r;r=0,this.style.maxWidth=t+"px"}return r},r=(t=!1)=>{this.style.maxWidth=null,this["#arrow"].setAttribute("data-align","left"),this["#arrow-path"].setAttribute("d","M 0 0, L 100 50, L 00 100");let e=this.getBoundingClientRect(),n=this["#arrow"].getBoundingClientRect(),r=0;if(this["#arrow"].style.left=s+a.left-2-i-n.width+"px",this.style.left=s+a.left-2-n.width-e.width+"px",e=this.getBoundingClientRect(),r=-(e.left-8),t&&r>0){let t=e.width-r;r=0,this.style.maxWidth=t+"px",this.style.left=s+a.left-2-n.width-t+"px"}return r},o=()=>{this.style.maxHeight=null;let t=this.getBoundingClientRect(),e=0,i=0;return this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+a.top+a.height/2-t.height/2+"px",t=this.getBoundingClientRect(),e=-(t.top-8),i=t.bottom+8-window.innerHeight,[e,i]},l=(t=!1)=>{this.style.maxHeight=null;let e=this.getBoundingClientRect(),i=0;if(this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+window.innerHeight-8-e.height+"px",e=this.getBoundingClientRect(),i=-(e.top-8),t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px",this.style.top=n+window.innerHeight-8-t+"px"}return i},h=(t=!1)=>{this.style.maxHeight=null;let e=this.getBoundingClientRect(),i=0;if(this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+8+"px",e=this.getBoundingClientRect(),i=e.bottom+8-window.innerHeight,t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px"}return i};if("right"===e){let e=t();if(e>0){let i=r();i>0&&(i>e?t(!0):r(!0))}}else if("left"===e){let e=r();if(e>0){let i=t();i>0&&(i>e?r(!0):t(!0))}}{let[t,e]=o();e>0?(t=l(),t>0&&l(!0)):t>0&&(e=h(),e>0&&h(!0))}}}#Zn(){{let{backgroundColor:t,borderColor:e,borderWidth:i}=getComputedStyle(this);this["#arrow-path"].style.fill=t,this["#arrow-path"].style.stroke=e,this["#arrow-path"].style.strokeWidth=i}}}customElements.define("x-popover",Ja);class Qa extends HTMLElement{static observedAttributes=["value","max","disabled"];static#z=Ns`<template><div id="determinate-bar" part="bar"></div><div id="indeterminate-bars"><div id="primary-indeterminate-bar" part="bar"></div><div id="secondary-indeterminate-bar" part="bar"></div></div></template>`;static#E=Fs`:host{display:block;box-sizing:border-box;height:8px;width:100%;position:relative;contain:strict;overflow:hidden;cursor:default}:host([hidden]){display:none}#indeterminate-bars{width:100%;height:100%}#determinate-bar{position:absolute;top:0;left:0;bottom:0;width:0%;height:100%;background:#3B99FB;transition:width 0.4s ease-in-out;will-change:left, right}:host([value="-1"]) #determinate-bar{visibility:hidden}#primary-indeterminate-bar{position:absolute;top:0;left:0;bottom:0;height:100%;background:#3B99FB;will-change:left, right}#secondary-indeterminate-bar{position:absolute;top:0;left:0;bottom:0;height:100%;background:#3B99FB;will-change:left, right}
`;get value(){return this.hasAttribute("value")?parseFloat(this.getAttribute("value")):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):1}set max(t){this.setAttribute("max",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#Un=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Qa.#E],this.#$.append(document.importNode(Qa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){this.#Xt()}attributeChangedCallback(t,e,i){e!==i&&("value"===t||"disabled"===t)&&this.#Xt()}#Xt(){if(null===this.value||-1===this.value||this.disabled?this["#determinate-bar"].style.width="0%":this["#determinate-bar"].style.width=this.value/this.max*100+"%",null!==this.value||this.disabled){if(this.#Un){for(let t of this.#Un)t.cancel();this.#Un=null}}else this.#Un||(this.#Un=[this["#primary-indeterminate-bar"].animate([{left:"-35%",right:"100%",offset:0},{left:"100%",right:"-90%",offset:.6},{left:"100%",right:"-90%",offset:1}],{duration:2e3,easing:"ease-in-out",iterations:Infinity}),this["#secondary-indeterminate-bar"].animate([{left:"-100%",right:"100%",offset:0},{left:"110%",right:"-30%",offset:.8},{left:"110%",right:"-30%",offset:1}],{duration:2e3,delay:1e3,easing:"ease-in-out",iterations:Infinity})])}}customElements.define("x-progressbar",Qa);class tr extends HTMLElement{static observedAttributes=["toggled","disabled"];static#z=Ns`<template><div id="main"><div id="indicator" part="indicator"><div id="indicator-dot" part="indicator-dot"></div></div><div id="description"><slot></slot></div></div></template>`;static#E=Fs`:host{display:block;position:relative;width:fit-content}:host(:focus){outline:none}:host([disabled]){opacity:0.4;pointer-events:none}:host([hidden]){display:none}#main{display:flex;align-items:center}#indicator{position:relative;border:3px solid black;width:19px;height:19px;border-radius:99px;display:flex;align-items:center;justify-content:center}#indicator-dot{width:100%;height:100%;background:currentColor;border-radius:99px;transform:scale(0)}:host([mixed][toggled]) #indicator-dot{height:33%;border-radius:0}:host([toggled]) #indicator-dot{transform:scale(0.5)}#description{flex:1}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[tr.#E],this.#$.append(document.importNode(tr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("keydown",(t=>this.#W(t)))}connectedCallback(){this.#J()}attributeChangedCallback(t,e,i){e!==i&&("toggled"===t?this.#xt():"disabled"===t&&this.#vt())}#J(){this.setAttribute("role","radio"),this.setAttribute("aria-checked",this.toggled),this.setAttribute("aria-disabled",this.disabled),this.closest("x-radios")||(this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0))}#xt(){this.setAttribute("aria-checked",this.toggled)}#vt(){this.#J()}#P(t){this.closest("x-radios")||(this.toggled&&this.mixed?this.mixed=!1:(this.mixed=!1,this.toggled=!this.toggled),this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0})))}#Y(t){if(!1===this.matches(":focus")){t.preventDefault();let e=Zn(this.parentNode,"[tabindex]");e&&e.focus()}}#W(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-radio",tr);class er extends HTMLElement{get value(){let t=this.querySelector("x-radio[toggled]");return t?t.value:null}set value(t){for(let e of this.querySelectorAll("x-radio"))e.toggled=e.value===t&&null!==t}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.innerHTML="<slot></slot>",this.addEventListener("click",(t=>this.#P(t)),!0),this.addEventListener("keydown",(t=>this.#W(t)))}connectedCallback(){this.setAttribute("role","radiogroup");let t=[...this.querySelectorAll("x-radio")].filter((t=>t.closest("x-radios")===this)),e=t.find((t=>t.toggled&&!t.disabled))||t.find((t=>!t.disabled));for(let i of t)i.setAttribute("tabindex",i===e?"0 ":"-1"),i.setAttribute("aria-checked",i===e)}#P(t){let e=t.target.closest("x-radio");if(e&&!e.disabled&&t.buttons<=1){let t=[...this.querySelectorAll("x-radio")].filter((t=>t.closest("x-radios")===this&&t!==e));if(!1===e.toggled||!0===e.mixed){e.toggled=!0,e.mixed=!1,e.tabIndex=0;for(let e of t)e.toggled=!1,e.mixed=!1,e.tabIndex=-1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}}}#W(t){if("ArrowDown"===t.code||"ArrowRight"===t.code){let e=[...this.querySelectorAll("x-radio")],i=e.filter((t=>!1===t.disabled&&t.closest("x-radios")===this)),s=e.find((t=>t.matches(":focus")));if(s){let e=i.indexOf(s),n=i.length>1?i[e+1]||i[0]:null;n&&(t.preventDefault(),n.focus(),n.tabIndex=0,s.tabIndex=-1)}}else if("ArrowUp"===t.code||"ArrowLeft"===t.code){let e=[...this.querySelectorAll("x-radio")],i=e.filter((t=>!1===t.disabled&&t.closest("x-radios")===this)),s=e.find((t=>t.matches(":focus")));if(s){let e=i.indexOf(s),n=i[i.length-1],a=i.length>1?i[e-1]||n:null;a&&(t.preventDefault(),a.focus(),a.tabIndex=0,s.tabIndex=-1)}}}}customElements.define("x-radios",er);let ir=Symbol();class sr extends HTMLElement{static observedAttributes=["disabled"];static#z=Ns`<template><div id="button"><div id="arrow-container"><svg id="arrow" part="arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg></div></div><slot></slot></template>`;static#E=Fs`:host{display:block;width:fit-content;height:32px;padding:0 0 0 8px;max-width:100%;box-sizing:border-box;position:relative;outline:none;font-size:0.875rem;user-select:none;-webkit-user-select:none}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}:host(:hover){cursor:default}:host([size="small"]){font-size:0.78125rem}#button{display:flex;flex-flow:row;align-items:center;justify-content:flex-start;flex:1;width:100%;height:100%}:host([mixed]) #button > *{opacity:0.7}#button > x-label{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#button > #arrow-container{display:flex;align-content:center;justify-content:center;margin:0 0 0 auto;z-index:1}#button > #arrow-container #arrow{display:flex;width:13px;height:13px;min-width:13px;margin:0 2px 0 11px;color:currentColor;--text-color: 50%;--path-data: M 25 41 L 50 16 L 75 41 L 83 34 L 50 1 L 17 34 Z M 17 66 L 50 100 L 83 66 L 75 59 L 50 84 L 25 59 Z;}#button > #arrow-container #arrow path{fill:currentColor}
`;get value(){let t=this.querySelector("x-menuitem[toggled]");return t?t.value:null}set value(t){for(let e of this.querySelectorAll("x-menuitem"))e.toggled=e.value===t&&null!==t}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;#X=!1;#Mt=null;#Lt=null;#R=null;#Yn=new MutationObserver((t=>this.#Vn(t)));#Si=new ResizeObserver((()=>this.#Mi()));constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[sr.#E],this.#$.append(document.importNode(sr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#backdrop"]=Xn("x-backdrop"),this["#backdrop"].style.opacity="0",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>this.#At(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("toggle",(t=>this.#qn(t))),this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("keydown",(t=>this.#W(t)))}connectedCallback(){this.#Yn.observe(this,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this.#Si.observe(this),this.#Wn(),this.#J(),Gn.whenThemeReady.then((()=>{this.#I()})),Gn.addEventListener("themechange",this.#R=()=>this.#I())}disconnectedCallback(){this.#Yn.disconnect(),this.#Si.disconnect(),Gn.removeEventListener("themechange",this.#R)}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.#J()}#Vt(){if(!1===this.#qt())return;this.#X=this.matches(":focus"),this["#backdrop"].show(!1),window.addEventListener("resize",this.#Mt=()=>{this.#Wt()}),window.addEventListener("blur",this.#Lt=()=>{this.#Wt()});let t=this.querySelector(":scope > x-menu");{let e=null;for(let i of t.querySelectorAll("x-menuitem"))i.togglable=!0,i.toggled&&(null===e?e=i:i.toggled=!1)}if(t.querySelector("x-menuitem[toggled]")){let e=this["#button"].querySelector("x-label")||this["#button"].firstElementChild,i=e[ir];t.openOverElement(e,i)}else{let e=t.querySelector("x-menuitem").firstElementChild;t.openOverElement(this["#button"],e)}{let e=t.getBoundingClientRect(),i=this["#button"].getBoundingClientRect(),s=parseFloat(getComputedStyle(this).paddingRight);e.right-s<i.right&&(t.style.minWidth=i.right-e.left+s+"px")}{let t=this.getBoundingClientRect();t.right+7>window.innerWidth&&(this.style.maxWidth=window.innerWidth-t.left-7+"px")}}async#Wt(t=null){if(!1===this.#Kt())return;let e=this.querySelector(":scope > x-menu");if(e.setAttribute("closing",""),await t,this["#backdrop"].hide(!1),this.#X)this.focus();else{let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}window.removeEventListener("resize",this.#Mt),window.removeEventListener("blur",this.#Lt),await e.close(),e.removeAttribute("closing")}#qt(){if(this.disabled)return!1;{let t=this.querySelector(":scope > x-menu"),e=t.querySelector("x-menuitem");return null!==t&&!1===t.opened&&!1===t.hasAttribute("closing")&&null!==e}}#Kt(){if(this.disabled)return!1;{let t=this.querySelector(":scope > x-menu");return t.querySelector("x-menuitem"),null!==t&&!0===t.opened&&!1===t.hasAttribute("closing")}}#Wn(){let t=this.querySelector(":scope > x-menu x-menuitem[toggled]");if(this["#button"].innerHTML="",t){for(let e of t.children){let t=e.cloneNode(!0);t[ir]=e,t.removeAttribute("id"),t.removeAttribute("style"),this["#button"].append(t)}this.#Kn()}this["#button"].append(this["#arrow-container"])}#Jn=Fn(this.#Wn,300,this);#Kn(){for(let t of this["#button"].children)if(t!==this["#arrow-container"]){let{width:e,height:i,margin:s,padding:n,border:a,borderRadius:r}=getComputedStyle(t[ir]);["x-icon","x-swatch","img","svg"].includes(t[ir].localName)&&(t.style.width=e,t.style.height=i,t.style.minWidth=e,t.style.borderRadius=r),t.style.margin=s,t.style.padding=n,t.style.border=a}}#I(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#J(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0);{this.setAttribute("role","button");let t=this.querySelector(":scope > x-menu");if(t){t.setAttribute("role","listbox");for(let e of t.querySelectorAll("x-menuitem"))e.setAttribute("role","option")}}}async#Vn(t){for(let e of t)if("attributes"===e.type&&"x-menuitem"===e.target.localName&&"toggled"===e.attributeName){await jn(10),this.#Jn();break}}#Mi(){this.#Kn()}#Y(t){t.target.closest("x-menu")||!1!==this.matches(":focus")||t.preventDefault()}async#P(t){if(!(t.buttons>1))if(this.#qt())this.#Vt();else if(this.#Kt()){let e=t.target.closest("x-menuitem");if(e){let t=this.value,i=e.value;for(let t of this.querySelectorAll("x-menuitem"))t.toggled=t===e;await this.#Wt(e.whenTriggerEnd),(t!==i||this.mixed)&&(this.mixed=!1,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{oldValue:t,newValue:i}})))}}}#qn(t){t.preventDefault()}#At(t){this.#Wt()}#W(t){!1===t.defaultPrevented&&(this.querySelector(":scope > x-menu"),"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code||"ArrowUp"===t.code||"ArrowDown"===t.code?this.#qt()&&(t.preventDefault(),this.#Vt()):"Escape"===t.code&&this.#Kt()&&(t.preventDefault(),this.#Wt()))}}customElements.define("x-select",sr);const nr=navigator.platform.startsWith("Mac")||["iPhone","iPad"].includes(navigator.platform),ar=["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock"];class rr extends HTMLElement{static observedAttributes=["value"];static#z=Ns`<template><div id="main"></div></template>`;static#E=Fs`:host{display:inline-block;box-sizing:border-box;font-size:0.875rem;line-height:1}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}
`;get value(){let t=[];if(this.hasAttribute("value")){let e=this.getAttribute("value").replace("++","+PLUS").split("+");e=e.map((t=>t.trim().replace("PLUS","+"))).filter((t=>""!==t)),t=e}return t}set value(t){this.setAttribute("value",t.join("+"))}get modKeys(){return this.value.filter((t=>ar.includes(t)))}get normalKey(){let t=this.value.find((t=>!1===ar.includes(t)));return void 0===t?null:t}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[rr.#E],this.#$.append(document.importNode(rr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}attributeChangedCallback(t,e,i){e!==i&&"value"===t&&this.#Xt()}#Xt(){let t="";this.value;let e=this.modKeys,i=this.normalKey;if(nr){e.includes("Meta")&&(t+="^"),e.includes("Alt")&&(t+="⌥"),e.includes("Shift")&&(t+="⇧"),e.includes("Control")&&(t+="⌘"),e.includes("Symbol")&&(t+="☺"),void 0!==i&&(t+={ArrowUp:"↑",ArrowDown:"↓",ArrowLeft:"←",ArrowRight:"→",Backspace:"⌦"}[i]||i)}else{let s=[];e.includes("Control")&&s.push("Ctrl"),e.includes("Alt")&&s.push("Alt"),e.includes("Meta")&&s.push("Meta"),e.includes("Shift")&&s.push("Shift"),e.includes("Symbol")&&s.push("Symbol");let n={ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};null!==i&&s.push(n[i]||i),t=s.join("+")}this["#main"].textContent=t}}customElements.define("x-shortcut",rr);class or extends HTMLElement{static observedAttributes=["value","min","max","ticks","disabled"];static#z=Ns`<template><div id="main"><div id="groove-track" part="track groove-track"></div><div id="range-track" part="track range-track"></div><div id="thumbs" part="thumbs"><div id="ticks"></div><div id="start-thumb" class="thumb" part="thumb start-thumb" data-value="start" tabindex="0"></div><div id="end-thumb" class="thumb" part="thumb end-thumb" data-value="end" tabindex="0"></div></div></div></template>`;static#E=Fs`:host{display:block;width:100%;height:20px;position:relative;box-sizing:border-box;touch-action:pan-y}:host(:focus){outline:none}:host(:hover){cursor:default}:host([disabled]){pointer-events:none;opacity:0.4}:host([size="small"]){height:17px}:host([size="large"]){height:23px}#main{display:flex;flex-flow:column;width:100%;height:100%;position:relative}#range-track{position:absolute;width:0%;height:4px;background:black;top:50%;transform:translateY(-50%)}#groove-track{position:absolute;width:100%;height:4px;background:gray;top:50%;transform:translateY(-50%)}#thumbs{position:relative;width:calc(100% - var(--computed-thumb-width));height:100%;margin:0 auto}#thumbs .thumb{position:absolute;top:0;left:0%;width:fit-content;height:100%;aspect-ratio:1;margin-left:calc(var(--computed-thumb-width) / -2);box-sizing:border-box;background:gray;border:1px solid rgba(0, 0, 0, 0.2)}#thumbs .thumb:focus{outline:none;z-index:2}#ticks{position:absolute;left:0px;bottom:0px;width:100%;height:100%}#ticks:empty{display:none}#ticks .tick{position:absolute;left:0%;bottom:-5px;width:1px;height:5px;background:rgba(0, 0, 0, 0.4)}
`;get min(){return this.hasAttribute("min")?parseFloat(this.getAttribute("min")):0}set min(t){this.setAttribute("min",t)}get max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):100}set max(t){this.setAttribute("max",t)}get value(){if(this.hasAttribute("value")){let t=this.getAttribute("value").split(/[ ,]+/);return t.length>=2?t.map((t=>parseFloat(t))).slice(0,2):parseFloat(t[0])}return this.max>=this.min?this.min+(this.max-this.min)/2:this.min}set value(t){Array.isArray(t)?((t=t.map((t=>ki(t,this.min,this.max)))).length=2,this.setAttribute("value",t.join(" "))):(t=ki(t,this.min,this.max),this.setAttribute("value",t))}get step(){return this.hasAttribute("step")?parseFloat(this.getAttribute("step")):1}set step(t){this.setAttribute("step",t)}get ticks(){return this.hasAttribute("ticks")}set ticks(t){t?this.setAttribute("ticks",""):this.removeAttribute("ticks")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get range(){return this.hasAttribute("range")}get dragging(){return this.getAttribute("dragging")}#$=null;#U=0;#Qn=null;#ta=new ResizeObserver((()=>this.#ea()));constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[or.#E],this.#$.append(document.importNode(or.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#Xs(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("keydown",(t=>this.#W(t)))}connectedCallback(){this.setAttribute("value",this.value),this.#ta.observe(this["#start-thumb"]),this.#Xt(),this.#J()}disconnectedCallback(){this.#ta.unobserve(this["#start-thumb"])}attributeChangedCallback(t,e,i){e!==i&&!1!==this.isConnected&&("value"===t?this.#Zt():"min"===t?this.#yn():"max"===t?this.#Cn():"ticks"===t?this.#ia():"disabled"===t&&this.#vt())}#Zt(){this.#Xt()}#yn(){this.#Xt()}#Cn(){this.#Xt()}#ia(){this.#Xt()}#vt(){this.#J()}#ea(){let t=this["#start-thumb"].getBoundingClientRect();t.width!==this.#Qn&&(this.#Qn=t.width,this["#main"].style.setProperty("--computed-thumb-width",t.width+"px"))}#Y(t){if(!1===this.matches(":focus")){t.preventDefault();let e=Zn(this.parentNode,"[tabindex]");e&&e.focus()}}#Xs(t){if(t.buttons>1||!1===t.isPrimary)return;let e,i,s=null,{width:n,height:a}=this["#start-thumb"].getBoundingClientRect(),r=this["#main"].getBoundingClientRect(),o=!1;if(t.target.matches(".thumb"))s=t.target;else if(!0===this["#end-thumb"].hidden)s=this["#start-thumb"];else{let e=this["#start-thumb"].getBoundingClientRect(),i=this["#end-thumb"].getBoundingClientRect(),n=new DOMPoint(e.x+e.width/2,e.y+e.height/2),a=new DOMPoint(i.x+i.width/2,i.y+i.height/2),r=new DOMPoint(t.clientX,t.clientY),o=zi(r,n),l=zi(r,a);s=o<=l?this["#start-thumb"]:this["#end-thumb"]}let l=(t,e)=>{let i=t-(r.x+n/2);i=ki(i,0,r.width-n);let a=i/(r.width-n)*(this.max-this.min)+this.min;var l,h;if(l=a,h=this.step,a=wi(wi(l/h)*h,Ci(h)),Array.isArray(this.value)){let[t,e]=this.value;s===this["#start-thumb"]?(a>=e&&(a=e),a!==t&&(this.value=[a,e],!1===o&&(o=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))):s===this["#end-thumb"]&&(a<=t&&(a=t),a!==e&&(this.value=[t,a],!1===o&&(o=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))))}else this.value!==a&&(this.value=a,!1===o&&(o=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};s.setPointerCapture(t.pointerId),this.setAttribute("dragging",s.dataset.value),l(t.clientX,t.clientY);for(let t of this["#thumbs"].children)t.style.zIndex=t===s?"1":"0";s.addEventListener("pointermove",e=t=>{t.isPrimary&&l(t.clientX,t.clientY)}),s.addEventListener("pointerup",i=()=>{s.removeEventListener("pointermove",e),s.removeEventListener("pointerup",i),s.removeEventListener("pointercancel",i),this.removeAttribute("dragging"),o&&this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}),s.addEventListener("pointercancel",i)}#W(t){if("ArrowLeft"===t.code||"ArrowDown"===t.code){t.preventDefault(),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=this.value;if(Array.isArray(this.value)){let[i,s]=this.value;this.#$.activeElement===this["#start-thumb"]?t.shiftKey?i-=10*this.step:i-=this.step:this.#$.activeElement===this["#end-thumb"]&&(t.shiftKey?s-=10*this.step:s-=this.step,s<=i&&(s=i)),this.value=[i,s],!1===rt(e,this.value)&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}else t.shiftKey?this.value-=10*this.step:this.value-=this.step,e!==this.value&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}));this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}else if("ArrowRight"===t.code||"ArrowUp"===t.code){t.preventDefault(),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=this.value;if(Array.isArray(this.value)){let[i,s]=this.value;this.#$.activeElement===this["#start-thumb"]?(t.shiftKey?i+=10*this.step:i+=this.step,i>=s&&(i=s)):this.#$.activeElement===this["#end-thumb"]&&(t.shiftKey?s+=10*this.step:s+=this.step),this.value=[i,s],!1===rt(e,this.value)&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}else t.shiftKey?this.value+=10*this.step:this.value+=this.step,e!==this.value&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}));this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}}#Xt(){if(Array.isArray(this.value)){let[t,e]=this.value,i=(t-this.min)/(this.max-this.min)*100,s=(e-this.min)/(this.max-this.min)*100;this.setAttribute("range",""),this["#start-thumb"].style.left=`${i}%`,this["#start-thumb"].hidden=!1,this["#end-thumb"].style.left=`${s}%`,this["#end-thumb"].hidden=!1,this["#range-track"].style.left=`${i}%`,this["#range-track"].style.width=s-i+"%"}else{let t=(this.value-this.min)/(this.max-this.min)*100;this.removeAttribute("range"),this["#start-thumb"].style.left=`${t}%`,this["#start-thumb"].hidden=!1,this["#end-thumb"].hidden=!0;{let e=((this.min>0?this.min:0)-this.min)/(this.max-this.min)*100;t>=e?(this["#range-track"].style.left=`${e}%`,this["#range-track"].style.width=t-e+"%",this["#range-track"].style.removeProperty("border-top-left-radius"),this["#range-track"].style.removeProperty("border-bottom-left-radius"),this["#range-track"].style.setProperty("border-top-right-radius","0px","important"),this["#range-track"].style.setProperty("border-bottom-right-radius","0px","important")):(this["#range-track"].style.left=`${t}%`,this["#range-track"].style.width=e-t+"%",this["#range-track"].style.setProperty("border-top-left-radius","0px","important"),this["#range-track"].style.setProperty("border-bottom-left-radius","0px","important"),this["#range-track"].style.removeProperty("border-top-right-radius"),this["#range-track"].style.removeProperty("border-bottom-right-radius"))}}if(this["#ticks"].innerHTML="",this.ticks){let t=(this.max-this.min)/this.step;for(let e=this.min,i=0;e<=this.max;e+=this.step,i+=1){let s=(e-this.min)/(this.max-this.min)*100,n=["tick"];if(0===i?n.push("first-tick"):i===t&&n.push("last-tick"),Array.isArray(this.value)){let[t,i]=this.value;e>=t&&e<=i&&n.push("range-tick")}else e<=this.value&&n.push("range-tick");this["#ticks"].insertAdjacentHTML("beforeend",`<div class="tick" part="${n.join(" ")}" data-value="${e}" style="left: ${s}%"></div>`)}}}#J(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0),this["#start-thumb"].tabIndex=this.tabIndex,this["#end-thumb"].tabIndex=this.tabIndex}}customElements.define("x-slider",or);class lr extends HTMLElement{static observedAttributes=["disabled"];static#z=Ns`<template><div id="decrement-button" part="decrement-button" class="button"><svg id="decrement-arrow" part="decrement-arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="decrement-arrow-path"></path></svg></div><div id="increment-button" part="increment-button" class="button"><svg id="increment-arrow" part="increment-arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="increment-arrow-path"></path></svg></div></template>`;static#E=Fs`:host{display:flex;flex-flow:column-reverse;align-items:center;justify-content:center;box-sizing:border-box;height:100%;width:fit-content;color:rgba(0, 0, 0, 0.6)}:host(:hover){cursor:default}:host([disabled=""]){opacity:0.5;pointer-events:none}.button{display:flex;align-items:center;justify-content:center;width:100%;height:100%;user-select:none;-webkit-user-select:none;box-sizing:border-box;color:inherit;border-left:none}.button[data-pressed]{color:white;background:rgba(0, 0, 0, 0.3)}:host([disabled="increment"]) #increment-button, :host([disabled="decrement"]) #decrement-button{opacity:0.3;pointer-events:none}#increment-arrow{width:11px;height:11px;pointer-events:none;--path-data: M 24 69 L 50 43 L 76 69 L 69 76 L 50 58 L 31 76 L 24 69 Z;}#decrement-arrow{width:11px;height:11px;pointer-events:none;--path-data: M 24 32 L 50 58 L 76 32 L 69 25 L 50 44 L 31 25 L 24 32 Z;}#increment-arrow-path, #decrement-arrow-path{fill:currentColor}
`;get disabled(){return!!this.hasAttribute("disabled")&&("increment"===this.getAttribute("disabled")?"increment":"decrement"!==this.getAttribute("disabled")||"decrement")}set disabled(t){!0===t?this.setAttribute("disabled",""):!1===t?this.removeAttribute("disabled"):this.setAttribute("disabled",t)}#$=null;#sa=null;#R=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[lr.#E],this.#$.append(document.importNode(lr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("contextmenu",(t=>t.preventDefault()))}connectedCallback(){Gn.whenThemeReady.then((()=>{this.#na()})),Gn.addEventListener("themechange",this.#R=()=>this.#na()),"x-numberinput"===this.parentElement?.localName&&(this.#sa=this.parentElement,this.#sa.setAttribute("hasstepper",""))}disconnectedCallback(){Gn.removeEventListener("themechange",this.#R),this.#sa&&(null===this.#sa.querySelector(":scope > x-stepper")&&this.#sa.removeAttribute("hasstepper",""),this.#sa=null)}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.#vt()}#na(){let t=getComputedStyle(this["#increment-arrow"]).getPropertyValue("--path-data"),e=getComputedStyle(this["#decrement-arrow"]).getPropertyValue("--path-data");this["#increment-arrow-path"].setAttribute("d",t),this["#decrement-arrow-path"].setAttribute("d",e)}#vt(){this.hasAttribute("disabled")&&(this.removeAttribute("pressed"),this["#increment-button"].removeAttribute("data-pressed"),this["#decrement-button"].removeAttribute("data-pressed"))}#Y(t){let e=t.target.closest(".button"),i=null;if(e===this["#increment-button"]?i="increment":e===this["#decrement-button"]&&(i="decrement"),!(t.buttons>1||null===i)){this.setPointerCapture(t.pointerId);{let t,s=Date.now();e.setAttribute("data-pressed",""),this.setAttribute("pressed",i),this.addEventListener("pointerup",t=async()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t);let i=Date.now()-s;i<100&&await jn(100-i),e.removeAttribute("data-pressed"),this.removeAttribute("pressed")},{once:!0}),this.addEventListener("pointercancel",t)}{let e,s=null,n=Date.now(),{shiftKey:a}=t;this.dispatchEvent(new CustomEvent(i+"start",{bubbles:!0})),this.dispatchEvent(new CustomEvent(i,{bubbles:!0,detail:{shiftKey:a}})),this.addEventListener("pointerup",e=()=>{this.removeEventListener("pointerup",e),this.removeEventListener("pointercancel",e),clearInterval(s),this.dispatchEvent(new CustomEvent(i+"end",{bubbles:!0}))}),this.addEventListener("pointercancel",e),s=setInterval((()=>{Date.now()-n>500&&this.dispatchEvent(new CustomEvent(i,{bubbles:!0,detail:{shiftKey:a}}))}),100)}}}}customElements.define("x-stepper",lr);class hr extends HTMLElement{static observedAttributes=["value"];static#z=Ns`<template><div id="preview"></div></template>`;static#E=Fs`:host{display:block;width:18px;height:18px;cursor:default;box-sizing:border-box;overflow:hidden;border-width:1px;border-style:solid;background:var(--checkboard-background);background-size:8px 8px;background-position:0 0, 0 4px, 4px -4px, -4px 0px}#preview{width:100%;height:100%;position:relative}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"white"}set value(t){this.setAttribute("value",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[hr.#E],this.#$.append(document.importNode(hr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){this.#Vi()}attributeChangedCallback(t,e,i){e!==i&&"value"===t&&this.#Vi()}#Vi(){this["#preview"].style.background=this.value}}customElements.define("x-swatch",hr);class dr extends HTMLElement{static observedAttributes=["toggled","disabled"];static#z=Ns`<template><div id="main"><div id="indicator" part="indicator"><div id="indicator-track" part="indicator-track"><div id="indicator-thumb" part="indicator-thumb" style="transition: none;"></div></div></div><div id="description"><slot></slot></div></div></template>`;static#E=Fs`:host{display:block;width:fit-content;margin:2px 0}:host(:focus){outline:none}:host([disabled]){opacity:0.4;pointer-events:none}#main{display:flex;align-items:center}#indicator{position:relative;width:34px;height:15px;display:flex;align-items:center}#indicator-track{display:flex;align-items:center;width:100%;height:65%;background:currentColor;border-radius:999px}#indicator-thumb{position:absolute;left:0px;width:16px;height:16px;background:currentColor;border-radius:999px;transition:left 0.2s cubic-bezier(0.4, 0, 0.2, 1)}:host([toggled]) #indicator-thumb{left:calc(100% - 16px)}:host([mixed]) #indicator-thumb{left:calc(50% - 16px / 2)}#description{flex:1}
`;get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[dr.#E],this.#$.append(document.importNode(dr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("keydown",(t=>this.#W(t)))}connectedCallback(){jn(100).then((()=>this["#indicator-thumb"].style.transition=null)),this.#J()}disconnectedCallback(){this["#indicator-thumb"].style.transition="none"}attributeChangedCallback(t,e,i){e!==i&&("toggled"===t?this.#xt():"disabled"===t&&this.#vt())}#J(){this.setAttribute("role","switch"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#xt(){this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled)}#vt(){this.#J()}#Y(t){if(t.buttons>1)t.preventDefault();else if(!1===this.matches(":focus")){t.preventDefault();let e=Zn(this.parentNode,"[tabindex]");e&&e.focus()}}async#P(t){this.mixed?this.mixed=!1:this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle"))}#W(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-switch",dr);class cr extends HTMLElement{static observedAttributes=["toggled","disabled"];static#z=Ns`<template><div id="selection-indicator" part="selection-indicator"></div><div id="content"><slot></slot></div></template>`;static#E=Fs`:host{position:relative;display:flex;align-items:center;justify-content:center;min-height:30px;padding:2px 12px;box-sizing:border-box;cursor:default;user-select:none;-webkit-user-select:none;box-sizing:border-box;font-size:0.875rem}:host(:focus){z-index:10;outline:none}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}#content{display:inherit;flex-flow:inherit;align-items:inherit;z-index:100}#selection-indicator{display:none;width:100%;height:0px;background:var(--accent-color);position:absolute;bottom:0;left:0}:host([toggled]) #selection-indicator{display:block}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):""}set value(t){this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[cr.#E],this.#$.append(document.importNode(cr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t)))}connectedCallback(){this.#J()}attributeChangedCallback(t,e,i){e!==i&&("toggled"===t||"disabled"===t)&&this.#J()}animateSelectionIndicator(t){return new Promise((async e=>{if("0px"!==getComputedStyle(this["#selection-indicator"]).height){let e=this.getBoundingClientRect(),i=t.getBoundingClientRect(),s=getComputedStyle(this["#selection-indicator"]),n=1e3*parseFloat(s.getPropertyValue("transition-duration")||"0s"),a=s.getPropertyValue("transition-timing-function")||"linear",r=this["#selection-indicator"].animate([{left:"0px",width:e.width+"px"},{left:i.left-e.left+"px",width:i.width+"px"}],{duration:n,easing:a,iterations:1,delay:0});await r.finished}e()}))}#J(){this.setAttribute("role","tab"),this.setAttribute("aria-selected",this.toggled),this.setAttribute("aria-disabled",this.disabled),this.setAttribute("tabindex",this.toggled?"0":"-1")}async#Y(t){if(!1===this.matches(":focus")){t.preventDefault();let e=Zn(this.parentNode,"[tabindex]");e&&e.focus()}if(!(t.buttons>1)){this.setPointerCapture(t.pointerId);{let t,e=Date.now();this.setAttribute("pressed",""),this.addEventListener("pointerup",t=async()=>{if(this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),!0===this.toggled){let t=Date.now()-e,i=100;t<i&&await jn(i-t)}this.removeAttribute("pressed")}),this.addEventListener("pointercancel",t)}}}}customElements.define("x-tab",cr);class ur extends HTMLElement{static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{position:relative;display:flex;margin:0 auto;width:fit-content;max-width:100%;box-sizing:border-box;justify-content:center}::slotted(x-tab){flex:0}
`;get value(){let t=this.querySelector("x-tab[toggled]");return t?t.value:null}set value(t){let e=[...this.querySelectorAll("x-tab")],i=null===t?null:e.find((e=>e.value===t));for(let t of e)t.toggled=t===i}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ur.#E],this.#$.append(document.importNode(ur.#z.content,!0)),this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("keydown",(t=>this.#W(t)))}connectedCallback(){this.setAttribute("role","tablist")}async#P(t){if(!(t.buttons>1)&&t.target.closest("x-tab")){let e=this.querySelectorAll("x-tab"),i=t.target.closest("x-tab"),s=this.querySelector("x-tab[toggled]");if(i!==s){s&&await s.animateSelectionIndicator(i);for(let t of e)t.toggled=t===i;this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}}#W(t){if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=t.target;t.preventDefault(),e.click()}else if("ArrowLeft"===t.code){let e=[...this.querySelectorAll("x-tab:not([disabled])")],i=this.querySelector('x-tab[tabindex="0"]');if(t.target,t.preventDefault(),i&&e.length>0){let t=e.indexOf(i),s=e[t-1]||e[e.length-1];i.tabIndex=-1,s.tabIndex=0,s.focus()}}else if("ArrowRight"===t.code){let e=[...this.querySelectorAll("x-tab:not([disabled])")],i=this.querySelector('x-tab[tabindex="0"]');if(t.target,t.preventDefault(),i&&e.length>0){let t=e.indexOf(i),s=e[t+1]||e[0];i.tabIndex=-1,s.tabIndex=0,s.focus()}}}}customElements.define("x-tabs",ur);class pr extends HTMLElement{static#z=Ns`<template><div id="container"><div id="scope" part="scope"><slot id="scope-slot" name="scope"></slot></div><div id="main" part="main"><slot></slot><svg id="remove-button" part="remove-button" width="12" height="12" viewBox="0 0 100 100"><path id="remove-button-path"></path></svg></div></div></template>`;static#E=Fs`:host{display:inline-block;height:24px;box-sizing:border-box;overflow:hidden;color:var(--text-color);border-width:1px;border-style:solid;cursor:default}:host([toggled]){background:gray;color:white;outline:none}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}:host(:focus){outline:none;z-index:1}#container{width:100%;height:100%;display:flex;align-items:center;justify-content:center}#scope{height:100%;padding:0 6px;display:none;align-items:center;justify-content:center;border-right-width:1px;border-right-style:solid}:host([scoped]) #scope{display:flex}#main{height:100%;padding:0 6px;display:flex;align-items:center;justify-content:center}#remove-button{display:none;opacity:0.8;width:12px;height:12px;vertical-align:middle;margin-left:4px;fill:currentColor;color:inherit;--path-data: M 25 16 L 50 41 L 75 16 L 84 25 L 59 50 L 84 75 L 75 84 L 50 59 L 25 84 L 16 75 L 41 50 L 16 25 Z;}:host([removable]) #remove-button{display:block}#remove-button:hover{opacity:1}#remove-button path{fill:inherit;pointer-events:none}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get removable(){return this.hasAttribute("removable")}set removable(t){t?this.setAttribute("removable",""):this.removeAttribute("removable")}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#R=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[pr.#E],this.#$.append(document.importNode(pr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#scope-slot"].addEventListener("slotchange",(()=>this.#aa())),this["#remove-button"].addEventListener("click",(t=>this.#ra(t)))}connectedCallback(){Gn.whenThemeReady.then((()=>{this.#oa()})),this.#aa(),Gn.addEventListener("themechange",this.#R=()=>this.#oa()),this.closest("x-tags")?(this.tabIndex=0,this.removable=!1):this.closest("x-tagsinput")?(this.toggled=!1,this.tabIndex=0,this.removable=!0):this.removable=!1}disconnectedCallback(){Gn.removeEventListener("themechange",this.#R)}#ra(t){t.buttons<=1&&this.dispatchEvent(new CustomEvent("remove",{bubbles:!0}))}#oa(){let t=getComputedStyle(this["#remove-button"]).getPropertyValue("--path-data");this["#remove-button-path"].setAttribute("d",t)}#aa(){0===this["#scope-slot"].assignedElements().length?this.removeAttribute("scoped"):this.setAttribute("scoped","")}}customElements.define("x-tag",pr);class mr extends HTMLElement{static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:flex;box-sizing:border-box;align-items:center;justify-content:flex-start}:host([hidden]){display:none}
`;get value(){return[...this.children].filter((t=>"x-tag"===t.localName)).filter((t=>t.toggled)).map((t=>t.value)).filter((t=>null!==t))}set value(t){let e=[...this.children].filter((t=>"x-tag"===t.localName));for(let i of e)i.toggled=t.includes(i.value)}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[mr.#E],this.#$.append(document.importNode(mr.#z.content,!0)),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("keydown",(t=>this.#W(t)))}#Y(t){if(t.buttons>1)t.preventDefault();else if(t.preventDefault(),!1===this.matches(":focus")){let t=Zn(this.parentNode,"*[tabindex]:not(a)");this.addEventListener("pointerup",(()=>{t?t.focus():this.blur()}),{once:!0})}}#P(t){let e=t.target.closest("x-tag");e&&!1===t.defaultPrevented&&(e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{detail:e})))}#W(t){if(!1===t.defaultPrevented)if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector("x-tag:focus");e&&(t.preventDefault(),e.click())}else if("ArrowRight"===t.code){let t=this.querySelector("x-tag:focus");t&&(t.nextElementSibling?t.nextElementSibling.focus():t!==t.parentElement.firstElementChild&&t.parentElement.firstElementChild.focus())}else if("ArrowLeft"===t.code){let t=this.querySelector("x-tag:focus");t&&(t.previousElementSibling?t.previousElementSibling.focus():t!==t.parentElement.lastElementChild&&t.parentElement.lastElementChild.focus())}}}customElements.define("x-tags",mr);class br extends HTMLElement{static observedAttributes=["spellcheck","disabled"];static#z=Ns`<template><div id="main"><slot></slot><input id="input" type="text" part="input" spellcheck="false" tabindex="0"></div><x-popover id="suggestions-popover" part="suggestions"><div id="suggested-tags"></div></x-popover></template>`;static#E=Fs`:host{display:block flex;position:relative;box-sizing:border-box;align-items:center;padding:3px;gap:3px;font-size:0.78125rem}:host(:focus){z-index:10}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}#main{width:100%;height:100%;cursor:text;display:flex;align-items:center;flex-wrap:wrap;gap:inherit}:host([mixed]) #main{opacity:0.7}#input{width:10px;height:20px;margin:2px;padding:0px 3px 0 5px;box-sizing:border-box;line-height:22px;color:inherit;background:none;border:none;outline:none;font-size:inherit;font-family:inherit}#suggestions-popover{width:200px;max-height:200px;padding:4px;box-sizing:border-box}#suggestions-popover #suggested-tags{flex:1;overflow:auto}#suggestions-popover x-tag{display:block;margin:4px 0 0 0}#suggestions-popover x-tag:first-child{margin-top:0}
`;get value(){return[...this.children].filter((t=>"x-tag"===t.localName)).map((t=>t.value)).filter((t=>null!==t))}get delimiter(){return this.hasAttribute("delimiter")?this.getAttribute("delimiter"):","}set delimiter(t){this.setAttribute("delimiter",t)}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get suggestions(){return this.hasAttribute("suggestions")}set suggestions(t){t?this.setAttribute("suggestions",""):this.removeAttribute("suggestions")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,br.#E],this.#$.append(document.importNode(br.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t))),this.#$.addEventListener("pointerdown",(t=>this.#Xs(t))),this.#$.addEventListener("remove",(t=>this.#ra(t))),this.#$.addEventListener("keydown",(t=>this.#W(t))),this["#input"].addEventListener("focusin",(t=>this.#la(t))),this["#input"].addEventListener("focusout",(t=>this.#ha(t))),this["#input"].addEventListener("input",(t=>this.#Tt(t)))}connectedCallback(){this.#da(),this.#J()}attributeChangedCallback(t,e,i){e!==i&&("spellcheck"===t?this.#hs():"disabled"===t&&this.#vt())}clear(){let t=[...this.children].filter((t=>"x-tag"===t.localName));if(t.length>0){for(let e of t)e.remove(),this.dispatchEvent(new CustomEvent("remove",{detail:e}));this.#ca(),this.#da(),this.dispatchEvent(new CustomEvent("change"))}}getSuggestions(t){return[]}#ua(){let t=this["#input"].value;if(this["#input"].value="",this.#pa(),t.endsWith(this.delimiter)&&(t=t.substring(0,t.length-1)),t=t.trim(),t.length>0&&!1===this.value.includes(t)){let e;if(t.includes(":")){let[i,s]=t.split(":").map((t=>t.trim()));e=Ns`<x-tag class="tag" value="${t}" removable><x-label slot="scope">${i}</x-label><x-label>${s}</x-label></x-tag>`}else e=Ns`<x-tag class="tag" value="${t}" removable><x-label>${t}</x-label></x-tag>`;this.append(e),this.dispatchEvent(new CustomEvent("add",{detail:e})),this.dispatchEvent(new CustomEvent("change"))}this["#input"].style.minWidth="0px",this["#input"].style.minWidth=this["#input"].scrollWidth+"px"}#ma(){this["#suggested-tags"].innerHTML="",!0===this["#suggestions-popover"].opened&&this["#suggestions-popover"].close()}#ba=0;#Y(t){t.target===this&&!1===t.defaultPrevented&&(t.preventDefault(),this["#input"].focus())}#Xs(t){if(this.#ba=Nn(),t.target===this["#input"])this["#input"].value.length>0&&this.#ma();else if(t.target===this["#main"])t.preventDefault(),this["#input"].focus(),this.#ca(!1);else if(t.target.closest("x-popover")){t.preventDefault();let e=t.target.closest("x-tag");e&&(this.append(e),this["#input"].value="",this.#pa(),this.#ca(!1),this.dispatchEvent(new CustomEvent("add",{detail:e})),this.dispatchEvent(new CustomEvent("change")))}else t.target.closest("x-tag")&&""!==this["#input"].value&&(this.#ua(),this.#ca(),this.#da())}#ra(t){t.stopPropagation();let e=t.target;e.remove(),this.#da(),this.dispatchEvent(new CustomEvent("remove",{detail:e})),this.dispatchEvent(new CustomEvent("change"))}#hs(){this["#input"].spellcheck=this.spellcheck}#vt(){this.#J()}async#la(){this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#ha(){this.#ua(),this.#da(),this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),this["#suggestions-popover"].close()}#Tt(t){this["#input"].value.includes(this.delimiter)?(this.#ua(),this.#da(),this.#pa(),this.#ca(!1)):(this.dispatchEvent(new CustomEvent("input")),this.#da(),this.#pa(),this.#ca("deleteContentBackward"!==t.inputType))}#W(t){if("Enter"===t.code||"NumpadEnter"===t.code)t.target===this["#input"]&&(t.preventDefault(),this.#ua(),this.#ca(!1),this.#da(),this.#pa());else if("Backspace"===t.code){if(t.target===this["#input"]){if(0===this["#input"].value.length){let t=[...this.children].filter((t=>"x-tag"===t.localName)),e=t[t.length-1]||null;e&&(e.remove(),this.#ca(),this.#da(),this.dispatchEvent(new CustomEvent("remove",{detail:e})),this.dispatchEvent(new CustomEvent("change")))}}else if("x-tag"===t.target.localName){t.stopImmediatePropagation(),t.preventDefault();let e=[...this.children].filter((t=>"x-tag"===t.localName)),i=t.target,s=e.indexOf(i),n=e[s+1]||null,a=e[s-1]||null;n?n.focus():a?a.focus():this["#input"].focus(),i.remove(),this.#da(),this.dispatchEvent(new CustomEvent("remove",{detail:i})),this.dispatchEvent(new CustomEvent("change"))}}else if("ArrowDown"===t.code){if(this["#suggestions-popover"].opened){let e=[...this["#suggested-tags"].children];if(e.length>1){t.preventDefault();let i=null;{let t=e.find((t=>t.toggled));if(t){t.toggled=!1;let s=e.indexOf(t);i=e[s+1]||e[0]}else i=e[0]}i.toggled=!0,i.scrollIntoViewIfNeeded();{let t=i.querySelector("x-label").textContent,e=this["#input"].selectionStart;this["#input"].value=t,this.#pa(),this.#ga(e,t.length)}}}}else if("ArrowUp"===t.code){if(this["#suggestions-popover"].opened){let e=[...this["#suggested-tags"].children];if(e.length>1){t.preventDefault();let i=null;{let t=e.find((t=>t.toggled));if(t){t.toggled=!1;let s=e.indexOf(t);i=e[s-1]||e[e.length-1]}else i=e[e.length-1]}i.toggled=!0,i.scrollIntoViewIfNeeded();{let t=i.querySelector("x-label").textContent,e=this["#input"].selectionStart;this["#input"].value=t,this.#pa(),this.#ga(e,t.length)}}}}else"ArrowLeft"!==t.code&&"ArrowRight"!==t.code||this.#ma()}#Xt(){this.#da()}#da(){let t=this.querySelector(":scope > x-label");t&&(t.hidden=this.value.length>0||this["#input"].value.length>0)}#J(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#pa(){this["#input"].style.minWidth="0px",this["#input"].style.minWidth=this["#input"].scrollWidth+"px"}#ga(t=0,e=this["#input"].value.length){this["#input"].selectionStart=t,this["#input"].selectionEnd=e}#ca(t=!0){if(this.suggestions){let e=this["#input"].value;this["#input"].selectionStart!==this["#input"].selectionEnd&&(e=e.substring(0,this["#input"].selectionStart));let i=this.getSuggestions(e);if(i.length>0&&!0===t){let t=this["#input"].value,e=i[0].querySelector("x-label").textContent;this["#input"].value=e,this.#pa(),this.#ga(t.length,e.length)}if(0===i.length)this["#suggested-tags"].innerHTML="",!0===this["#suggestions-popover"].opened&&this["#suggestions-popover"].close();else{let s=this["#input"].getBoundingClientRect();this["#suggested-tags"].innerHTML="",this["#suggested-tags"].append(...i),!0===t&&e.length>0&&(i[0].toggled=!0),!1===this["#suggestions-popover"].opened||this["#suggestions-popover"].close(!1),this["#suggestions-popover"].open(s),this["#suggested-tags"].scrollTop=0}}}}customElements.define("x-tagsinput",br);class gr extends HTMLElement{static observedAttributes=["value","spellcheck","disabled","validation"];static#z=Ns`<template><div id="main"><slot></slot><div id="editor" contenteditable="plaintext-only" spellcheck="false"></div></div></template>`;static#E=Fs`:host{display:block flex;position:relative;width:100%;min-height:100px;box-sizing:border-box;font-size:0.78125rem;overflow:auto}:host(:hover){cursor:text}:host([mixed]){color:rgba(0, 0, 0, 0.7)}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}:host(:not(:focus)) ::selection{color:inherit;background:none}::-webkit-scrollbar{max-width:6px;max-height:6px;background:none}::-webkit-scrollbar-track{border-radius:25px}::-webkit-scrollbar-thumb{background-color:rgba(0, 0, 0, 0.2);border-radius:25px}::-webkit-scrollbar-corner{display:none}#main{display:flex;flex-flow:column;width:100%;min-height:100%}#editor{flex:1;padding:2px 6px;box-sizing:border-box;color:inherit;background:none;border:none;outline:none;font-family:inherit;font-size:inherit}
`;get value(){return this["#editor"].textContent}set value(t){if(this["#editor"].textContent=t,this.matches(":focus")){document.execCommand("selectAll"),("chromium"===Hn()?this.#$.getSelection():window.getSelection()).collapseToEnd()}"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#rs)&&this.reportValidity(),this.#zt()}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get minLength(){return this.hasAttribute("minlength")?parseInt(this.getAttribute("minlength")):0}set minLength(t){this.setAttribute("minlength",t)}get maxLength(){return this.hasAttribute("maxlength")?parseInt(this.getAttribute("maxlength")):Infinity}set maxLength(t){this.setAttribute("maxlength",t)}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get validation(){return this.hasAttribute("validation")?this.getAttribute("validation"):"auto"}set validation(t){this.setAttribute("validation",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#$=null;#fa="";#U=0;#Et=null;#rs=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[gr.#E],this.#$.append(document.importNode(gr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#P(t))),this.addEventListener("focusin",(t=>this.#Rt(t))),this.addEventListener("focusout",(t=>this.#Pt(t))),this["#editor"].addEventListener("click",(t=>this.#xa(t))),this["#editor"].addEventListener("input",(t=>this.#fn(t))),"gecko"===Hn()&&(this["#editor"].setAttribute("contenteditable",""),this["#editor"].addEventListener("beforeinput",(t=>{if("insertFromPaste"===t.inputType&&t.dataTransfer.types.includes("text/plain")){t.preventDefault();let e=window.getSelection(),i=e.getRangeAt(0);i.deleteContents(),i.insertNode(document.createTextNode(t.dataTransfer.getData("text/plain"))),e.collapseToEnd()}})))}connectedCallback(){this.#J(),this.#zt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#rs)&&this.reportValidity()}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Zt():"spellcheck"===t?this.#hs():"disabled"===t?this.#vt():"validation"===t&&this.#ps())}reportValidity(){let t=new CustomEvent("beforevalidate",{bubbles:!1,cancelable:!0});return this.dispatchEvent(t),!1===t.defaultPrevented&&(this.value.length<this.minLength?this.#Et={href:"#entered-text-is-too-short"}:this.value.length>this.maxLength?this.#Et={href:"#entered-text-is-too-long"}:this.required&&0===this.value.length?this.#Et={href:"#required-field"}:this.#Et=null,this.#Yt()),null===this.#Et&&null===this.#rs}setCustomValidity(t){this.#rs=""===t?null:t,this.#Yt()}#Yt(){let t=this.#rs||this.#Et;t?this.setAttribute("error",""):this.removeAttribute("error");{let e=this.querySelector(':scope > x-tooltip[type="error"]');if(t&&this.matches(":focus")){if(e||(e=Xn("x-tooltip"),e.setAttribute("type","error"),this.append(e)),t.href){let i=t.args?Object.entries(t.args).map((([t,e])=>`${t}:${e}`)).join(","):"";e.innerHTML=`<x-message href="${t.href}" args="${i}"></x-message>`}else e.innerHTML=t;jn(10).then((()=>{e.open(this)}))}else e&&e.close().then((()=>e.remove()))}}#zt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#J(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#Zt(){this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&document.execCommand("selectAll")}#hs(){this["#editor"].spellcheck=this.spellcheck}#vt(){this["#editor"].contentEditable=this.disabled?"false":"plaintext-only",this.#J()}#ps(){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#rs)&&this.reportValidity()}#P(){this.#Yt()}#Rt(){this.#fa=this.value,this.#Yt(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#Pt(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),"auto"===this.validation||"instant"===this.validation?this.reportValidity():"manual"===this.validation&&this.#Yt(),null!==(this.#Et||this.#rs)||this.value===this.#fa&&!this.mixed||(this.mixed=!1,this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),("chromium"===Hn()?this.#$:window).getSelection().collapse(this["#main"])}#xa(t){t.detail>=4&&document.execCommand("selectAll")}#fn(t){this.dispatchEvent(new CustomEvent("input",{bubbles:!0})),this.#zt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#rs)&&this.reportValidity()}}customElements.define("x-texteditor",gr);class fr extends HTMLElement{static#z=Ns`<template><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="40"><animate attributeName="stroke-dasharray" values="0,1000; 200,1000; 245,1000" begin="0s" dur="2s" calcMode="spline" keyTimes="0; 0.5; 1" keySplines="0.8 0.25 0.25 0.9; 0.8 0.25 0.25 0.9" repeatCount="indefinite"></animate><animate attributeName="stroke-dashoffset" values="0px;0px;-260px" begin="0s" dur="2s" keyTimes="0; 0.5; 1" repeatCount="indefinite"></animate><animateTransform type="rotate" additive="sum" attributeName="transform" values="0;360" begin="0s" dur="2s" fill="freeze" repeatCount="indefinite" keyTimes="0; 1"></animateTransform></circle></svg></template>`;static#E=Fs`:host{display:block;width:30px;height:30px;box-sizing:border-box}:host([hidden]){display:none}svg{color:inherit;width:100%;height:100%}svg circle{fill:none;stroke:currentColor;stroke-linecap:round;stroke-width:10px;stroke-dasharray:10, 1000;transform-box:fill-box;transform-origin:50% 50%}
`;get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#wa=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[fr.#E],this.#wa=new IntersectionObserver((t=>this.#Xt()))}connectedCallback(){this.#Xt(),this.#wa.observe(this)}disconnectedCallback(){this.#wa.unobserve(this)}#Xt(){if(this.hidden||this.checkVisibility&&!1===this.checkVisibility())this.#$.innerHTML="";else{null===this.#$.firstElementChild&&this.#$.append(document.importNode(fr.#z.content,!0))}}}customElements.define("x-throbber",fr);class xr extends HTMLElement{static observedAttributes=["title"];static#z=Ns`<template><slot></slot><x-buttons part="buttons" id="buttons"><x-button id="minimize-button" value="minimize" skin="flat" part="button minimize-button" condensed><svg part="icon" viewBox="0 0 100 100"><path></path></svg></x-button><x-button id="maximize-button" value="maximize" skin="flat" part="button maximize-button" condensed><svg part="icon" viewBox="0 0 100 100"><path></path></svg></x-button><x-button id="restore-button" value="restore" skin="flat" part="button restore-button" condensed><svg part="icon" viewBox="0 0 100 100"><path></path></svg></x-button><x-button id="close-button" value="close" skin="flat" part="button close-button" condensed><svg part="icon" viewBox="0 0 100 100"><path></path></svg></x-button></x-buttons></template>`;static#E=Fs`:host{display:block flex;align-items:center;justify-content:space-evenly;width:100%;height:32px;gap:16px;position:relative;box-sizing:border-box;app-region:drag}::slotted(*){user-select:none}#buttons{position:absolute}:host([maximized])::part(maximize-button){display:none}:host(:not([maximized]))::part(restore-button){display:none}#buttons > x-button{margin:0;app-region:no-drag}#buttons > x-button > svg{fill:currentColor}
`;get maximized(){return this.hasAttribute("maximized")}set maximized(t){t?this.setAttribute("maximized",""):this.removeAttribute("maximized")}#$;#R;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Gn.themeStyleSheet,xr.#E],this.#$.append(document.importNode(xr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#buttons"].addEventListener("click",(t=>this.#va(t)))}async connectedCallback(){Gn.addEventListener("themechange",this.#R=()=>this.#ka()),Gn.whenThemeReady.then((()=>{this.#ka()}))}disconnectedCallback(){Gn.removeEventListener("themechange",this.#R)}#va(t){let e=t.target.closest("x-button");e&&this.dispatchEvent(new CustomEvent("buttonclick",{detail:e.value}))}#ka(){for(let t of this["#buttons"].children){let e=getComputedStyle(t).getPropertyValue("--path-data");t.querySelector("path").setAttribute("d",e)}}}customElements.define("x-titlebar",xr);class wr extends HTMLElement{static observedAttributes=["disabled"];static#z=Ns`<template><slot></slot></template>`;static#E=Fs`:host{display:none;bottom:-30px;position:fixed;padding:3px 10px;width:fit-content;height:fit-content;max-width:300px;box-sizing:border-box;pointer-events:none;border-width:1px;border-style:solid;font-size:0.75rem;z-index:99999;--align: bottom;--whitespace: 8px;--open-transition: 0 opacity cubic-bezier(0.4, 0, 0.2, 1);--close-transition: 0 opacity cubic-bezier(0.4, 0, 0.2, 1);}:host([opened]), :host([animating]){display:block}
`;get type(){return this.hasAttribute("type")?this.getAttribute("type"):"hint"}set type(t){this.setAttribute("type",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get opened(){return this.hasAttribute("opened")}#$=null;#jn=null;#Gn;#Si;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[wr.#E],this.#$.append(document.importNode(wr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.disabled&&this.opened&&this.close()}disconnectedCallback(){this.close(!1)}open(t,e=!0){return new Promise((async i=>{if(!1===this.opened&&this.isConnected){if(this.setAttribute("opened",""),this.#_n(t),this.#jn=Un(this),t instanceof Element&&(this.#Si=new ResizeObserver((()=>this.#_n(t))),this.#Si.observe(this)),this.#jn&&this.#jn.addEventListener("scroll",this.#Gn=()=>{this.close()},{once:!0}),e){let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=ja(t);"opacity"===e&&await this.animate({opacity:["0","1"]},{duration:i,easing:s}).finished}this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this}))}i()}))}close(t=!0){return new Promise((async e=>{if(!0===this.opened){if(this.removeAttribute("opened"),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this})),this.#jn&&this.#jn.removeEventListener("scroll",this.#Gn),this.#Si&&(this.#Si.unobserve(this),this.#Si=null),t){let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=ja(t);this.setAttribute("animating",""),"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished}this.removeAttribute("animating")}e()}))}#_n(t){let e=getComputedStyle(this).getPropertyValue("--align").trim();parseInt(getComputedStyle(this).borderWidth);let i=parseInt(getComputedStyle(this).getPropertyValue("--whitespace")),s=0,n=0,a=null;this.style.maxWidth=null,this.style.maxHeight=null,this.style.left="0px",this.style.top="0px";{let e=vi(this.getBoundingClientRect());0===e.top&&0===e.left||(s=-e.left,n=-e.top),a=t instanceof DOMPoint?new DOMRect(t.x,t.y,0,0):t instanceof DOMRect?t:t instanceof Element?t.getBoundingClientRect():new DOMRect}if("bottom"===e||"top"===e){let t=(t=!1)=>{this.style.maxHeight=null;let e=vi(this.getBoundingClientRect()),s=0;if(this.style.top=n+a.bottom+i+"px",e=vi(this.getBoundingClientRect()),s=e.bottom+8-window.innerHeight,t&&s>0){let t=e.height-s;s=0,this.style.maxHeight=t+"px"}return s},r=(t=!1)=>{this.style.maxHeight=null;let e=vi(this.getBoundingClientRect()),s=0;if(this.style.top=n+a.top-i-e.height+"px",e=vi(this.getBoundingClientRect()),s=-(e.top-8),t&&s>0){let t=e.height-s;s=0,this.style.maxHeight=t+"px",this.style.top=n+a.top-i-t+"px"}return s},o=()=>{this.style.maxWidth=null;let t=vi(this.getBoundingClientRect()),e=0,i=0;return this.style.left=s+a.left+a.width/2-t.width/2+"px",t=vi(this.getBoundingClientRect()),e=-(t.left-8),i=t.right+8-window.innerWidth,[e,i]},l=(t=!1)=>{this.style.maxWidth=null;let e=vi(this.getBoundingClientRect()),i=0;if(this.style.left=s+window.innerWidth-8-e.width+"px",e=vi(this.getBoundingClientRect()),i=-(e.left-8),t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px",this.style.left=s+window.innerWidth-8-t+"px"}return i},h=(t=!1)=>{this.style.maxWidth=null;let e=vi(this.getBoundingClientRect()),i=0;if(this.style.left=s+8+"px",e=vi(this.getBoundingClientRect()),i=e.right+8-window.innerWidth,t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px"}return i};if("bottom"===e){let e=t();if(e>0){let i=r();i>0&&(i>e?t(!0):r(!0))}}else if("top"===e){let e=r();if(e>0){let i=t();i>0&&(i>e?r(!0):t(!0))}}{let[t,e]=o();e>0?(t=l(),t>0&&l(!0)):t>0&&(e=h(),e>0&&h(!0))}}else if("right"===e||"left"===e){let t=(t=!1)=>{this.style.maxWidth=null;let e=vi(this.getBoundingClientRect()),n=0;if(this.style.left=s+a.right+i+"px",e=vi(this.getBoundingClientRect()),n=e.right+8-window.innerWidth,t&&n>0){let t=e.width-n;n=0,this.style.maxWidth=t+"px"}return n},r=(t=!1)=>{this.style.maxWidth=null;let e=vi(this.getBoundingClientRect()),n=0;if(this.style.left=s+a.left-i-e.width+"px",e=vi(this.getBoundingClientRect()),n=-(e.left-8),t&&n>0){let t=e.width-n;n=0,this.style.maxWidth=t+"px",this.style.left=s+a.left-i-t+"px"}return n},o=()=>{this.style.maxHeight=null;let t=vi(this.getBoundingClientRect()),e=0,i=0;return this.style.top=n+a.top+a.height/2-t.height/2+"px",t=vi(this.getBoundingClientRect()),e=-(t.top-8),i=t.bottom+8-window.innerHeight,[e,i]},l=(t=!1)=>{this.style.maxHeight=null;let e=vi(this.getBoundingClientRect()),i=0;if(this.style.top=n+window.innerHeight-8-e.height+"px",e=vi(this.getBoundingClientRect()),i=-(e.top-8),t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px",this.style.top=n+window.innerHeight-8-t+"px"}return i},h=(t=!1)=>{this.style.maxHeight=null;let e=vi(this.getBoundingClientRect()),i=0;if(this.style.top=n+8+"px",e=vi(this.getBoundingClientRect()),i=e.bottom+8-window.innerHeight,t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px"}return i};if("right"===e){let e=t();if(e>0){let i=r();i>0&&(i>e?t(!0):r(!0))}}else if("left"===e){let e=r();if(e>0){let i=t();i>0&&(i>e?r(!0):t(!0))}}{let[t,e]=o();e>0?(t=l(),t>0&&l(!0)):t>0&&(e=h(),e>0&&h(!0))}}}}customElements.define("x-tooltip",wr);export{Gn as default};